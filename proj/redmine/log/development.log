# Logfile created on Fri Dec 23 00:33:02 +0400 2011Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (2732.8ms)[0m   [0mCREATE TABLE `schema_migrations` (`version` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW KEYS FROM `schema_migrations`[0m
  [4;35;1mSQL (6.4ms)[0m   [0mCREATE UNIQUE INDEX `unique_schema_migrations` ON `schema_migrations` (`version`)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to Setup (1)
  [4;36;1mSQL (0.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (15.9ms)[0m   [0mCREATE TABLE `attachments` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `container_id` int(11) DEFAULT 0 NOT NULL, `container_type` varchar(30) DEFAULT '' NOT NULL, `filename` varchar(255) DEFAULT '' NOT NULL, `disk_filename` varchar(255) DEFAULT '' NOT NULL, `filesize` int(11) DEFAULT 0 NOT NULL, `content_type` varchar(60) DEFAULT '', `digest` varchar(40) DEFAULT '' NOT NULL, `downloads` int(11) DEFAULT 0 NOT NULL, `author_id` int(11) DEFAULT 0 NOT NULL, `created_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.3ms)[0m   [0mCREATE TABLE `auth_sources` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `type` varchar(30) DEFAULT '' NOT NULL, `name` varchar(60) DEFAULT '' NOT NULL, `host` varchar(60), `port` int(11), `account` varchar(60), `account_password` varchar(60), `base_dn` varchar(255), `attr_login` varchar(30), `attr_firstname` varchar(30), `attr_lastname` varchar(30), `attr_mail` varchar(30), `onthefly_register` tinyint(1) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.9ms)[0m   [0mCREATE TABLE `custom_fields` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `type` varchar(30) DEFAULT '' NOT NULL, `name` varchar(30) DEFAULT '' NOT NULL, `field_format` varchar(30) DEFAULT '' NOT NULL, `possible_values` text, `regexp` varchar(255) DEFAULT '', `min_length` int(11) DEFAULT 0 NOT NULL, `max_length` int(11) DEFAULT 0 NOT NULL, `is_required` tinyint(1) DEFAULT 0 NOT NULL, `is_for_all` tinyint(1) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.4ms)[0m   [0mCREATE TABLE `custom_fields_projects` (`custom_field_id` int(11) DEFAULT 0 NOT NULL, `project_id` int(11) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.0ms)[0m   [0mCREATE TABLE `custom_fields_trackers` (`custom_field_id` int(11) DEFAULT 0 NOT NULL, `tracker_id` int(11) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.3ms)[0m   [0mCREATE TABLE `custom_values` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `customized_type` varchar(30) DEFAULT '' NOT NULL, `customized_id` int(11) DEFAULT 0 NOT NULL, `custom_field_id` int(11) DEFAULT 0 NOT NULL, `value` text) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (16.4ms)[0m   [0mCREATE TABLE `documents` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) DEFAULT 0 NOT NULL, `category_id` int(11) DEFAULT 0 NOT NULL, `title` varchar(60) DEFAULT '' NOT NULL, `description` text, `created_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `documents`[0m
  [4;35;1mSQL (5.2ms)[0m   [0mCREATE INDEX `documents_project_id` ON `documents` (`project_id`)[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (3.9ms)[0m   [0mCREATE TABLE `enumerations` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `opt` varchar(4) DEFAULT '' NOT NULL, `name` varchar(30) DEFAULT '' NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.7ms)[0m   [0mCREATE TABLE `issue_categories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) DEFAULT 0 NOT NULL, `name` varchar(30) DEFAULT '' NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW KEYS FROM `issue_categories`[0m
  [4;35;1mSQL (7.7ms)[0m   [0mCREATE INDEX `issue_categories_project_id` ON `issue_categories` (`project_id`)[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.2ms)[0m   [0mCREATE TABLE `issue_histories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `issue_id` int(11) DEFAULT 0 NOT NULL, `status_id` int(11) DEFAULT 0 NOT NULL, `author_id` int(11) DEFAULT 0 NOT NULL, `notes` text, `created_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `issue_histories`[0m
  [4;35;1mSQL (6.0ms)[0m   [0mCREATE INDEX `issue_histories_issue_id` ON `issue_histories` (`issue_id`)[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (10.0ms)[0m   [0mCREATE TABLE `issue_statuses` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(30) DEFAULT '' NOT NULL, `is_closed` tinyint(1) DEFAULT 0 NOT NULL, `is_default` tinyint(1) DEFAULT 0 NOT NULL, `html_color` varchar(6) DEFAULT 'FFFFFF' NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.3ms)[0m   [0mCREATE TABLE `issues` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `tracker_id` int(11) DEFAULT 0 NOT NULL, `project_id` int(11) DEFAULT 0 NOT NULL, `subject` varchar(255) DEFAULT '' NOT NULL, `description` text, `due_date` date, `category_id` int(11), `status_id` int(11) DEFAULT 0 NOT NULL, `assigned_to_id` int(11), `priority_id` int(11) DEFAULT 0 NOT NULL, `fixed_version_id` int(11), `author_id` int(11) DEFAULT 0 NOT NULL, `lock_version` int(11) DEFAULT 0 NOT NULL, `created_on` datetime, `updated_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (10.8ms)[0m   [0mCREATE INDEX `issues_project_id` ON `issues` (`project_id`)[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.1ms)[0m   [0mCREATE TABLE `members` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11) DEFAULT 0 NOT NULL, `project_id` int(11) DEFAULT 0 NOT NULL, `role_id` int(11) DEFAULT 0 NOT NULL, `created_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.0ms)[0m   [0mCREATE TABLE `news` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11), `title` varchar(60) DEFAULT '' NOT NULL, `summary` varchar(255) DEFAULT '', `description` text, `author_id` int(11) DEFAULT 0 NOT NULL, `created_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `news`[0m
  [4;35;1mSQL (10.4ms)[0m   [0mCREATE INDEX `news_project_id` ON `news` (`project_id`)[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (7.1ms)[0m   [0mCREATE TABLE `permissions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `controller` varchar(30) DEFAULT '' NOT NULL, `action` varchar(30) DEFAULT '' NOT NULL, `description` varchar(60) DEFAULT '' NOT NULL, `is_public` tinyint(1) DEFAULT 0 NOT NULL, `sort` int(11) DEFAULT 0 NOT NULL, `mail_option` tinyint(1) DEFAULT 0 NOT NULL, `mail_enabled` tinyint(1) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (19.1ms)[0m   [0mCREATE TABLE `permissions_roles` (`permission_id` int(11) DEFAULT 0 NOT NULL, `role_id` int(11) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `permissions_roles`[0m
  [4;35;1mSQL (6.0ms)[0m   [0mCREATE INDEX `permissions_roles_role_id` ON `permissions_roles` (`role_id`)[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.5ms)[0m   [0mCREATE TABLE `projects` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(30) DEFAULT '' NOT NULL, `description` varchar(255) DEFAULT '' NOT NULL, `homepage` varchar(60) DEFAULT '', `is_public` tinyint(1) DEFAULT 1 NOT NULL, `parent_id` int(11), `projects_count` int(11) DEFAULT 0, `created_on` datetime, `updated_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.0ms)[0m   [0mCREATE TABLE `roles` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(30) DEFAULT '' NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (39.7ms)[0m   [0mCREATE TABLE `tokens` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11) DEFAULT 0 NOT NULL, `action` varchar(30) DEFAULT '' NOT NULL, `value` varchar(40) DEFAULT '' NOT NULL, `created_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.4ms)[0m   [0mCREATE TABLE `trackers` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(30) DEFAULT '' NOT NULL, `is_in_chlog` tinyint(1) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (7.8ms)[0m   [0mCREATE TABLE `users` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `login` varchar(30) DEFAULT '' NOT NULL, `hashed_password` varchar(40) DEFAULT '' NOT NULL, `firstname` varchar(30) DEFAULT '' NOT NULL, `lastname` varchar(30) DEFAULT '' NOT NULL, `mail` varchar(60) DEFAULT '' NOT NULL, `mail_notification` tinyint(1) DEFAULT 1 NOT NULL, `admin` tinyint(1) DEFAULT 0 NOT NULL, `status` int(11) DEFAULT 1 NOT NULL, `last_login_on` datetime, `language` varchar(2) DEFAULT '', `auth_source_id` int(11), `created_on` datetime, `updated_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.5ms)[0m   [0mCREATE TABLE `versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) DEFAULT 0 NOT NULL, `name` varchar(30) DEFAULT '' NOT NULL, `description` varchar(255) DEFAULT '', `effective_date` date, `created_on` datetime, `updated_on` datetime) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW KEYS FROM `versions`[0m
  [4;35;1mSQL (8.0ms)[0m   [0mCREATE INDEX `versions_project_id` ON `versions` (`project_id`)[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.9ms)[0m   [0mCREATE TABLE `workflows` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `tracker_id` int(11) DEFAULT 0 NOT NULL, `old_status_id` int(11) DEFAULT 0 NOT NULL, `new_status_id` int(11) DEFAULT 0 NOT NULL, `role_id` int(11) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSetup::Permission Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('show', 0, 'projects', 'label_overview', 1, 100, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.6ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('changelog', 0, 'projects', 'label_change_log', 1, 105, 0)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('issue_report', 0, 'reports', 'label_report_plural', 1, 110, 0)[0m
  [4;35;1mSQL (1.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('settings', 0, 'projects', 'label_settings', 0, 150, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'projects', 'button_edit', 0, 151, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.5ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('list_members', 0, 'projects', 'button_list', 1, 200, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_member', 0, 'projects', 'button_add', 0, 220, 0)[0m
  [4;35;1mSQL (17.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.5ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'members', 'button_edit', 0, 221, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'members', 'button_delete', 0, 222, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_version', 0, 'projects', 'button_add', 0, 320, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'versions', 'button_edit', 0, 321, 0)[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'versions', 'button_delete', 0, 322, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_issue_category', 0, 'projects', 'button_add', 0, 420, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'issue_categories', 'button_edit', 0, 421, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'issue_categories', 'button_delete', 0, 422, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('list_issues', 0, 'projects', 'button_list', 1, 1000, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('export_issues_csv', 0, 'projects', 'label_export_csv', 1, 1001, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('show', 0, 'issues', 'button_view', 1, 1005, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('download', 0, 'issues', 'button_download', 1, 1010, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_issue', 1, 'projects', 'button_add', 0, 1050, 1)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'issues', 'button_edit', 0, 1055, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('change_status', 1, 'issues', 'label_change_status', 0, 1060, 1)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'issues', 'button_delete', 0, 1065, 0)[0m
  [4;35;1mSQL (0.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_attachment', 0, 'issues', 'label_attachment_new', 0, 1070, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy_attachment', 0, 'issues', 'label_attachment_delete', 0, 1075, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('list_news', 0, 'projects', 'button_list', 1, 1100, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('show', 0, 'news', 'button_view', 1, 1101, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_news', 0, 'projects', 'button_add', 0, 1120, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'news', 'button_edit', 0, 1121, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'news', 'button_delete', 0, 1122, 0)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('list_documents', 0, 'projects', 'button_list', 1, 1200, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('show', 0, 'documents', 'button_view', 1, 1201, 0)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('download', 0, 'documents', 'button_download', 1, 1202, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_document', 0, 'projects', 'button_add', 0, 1220, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'documents', 'button_edit', 0, 1221, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'documents', 'button_delete', 0, 1222, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_attachment', 0, 'documents', 'label_attachment_new', 0, 1223, 0)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy_attachment', 0, 'documents', 'label_attachment_delete', 0, 1224, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('list_files', 0, 'projects', 'button_list', 1, 1300, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('download', 0, 'versions', 'button_download', 1, 1301, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetup::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_file', 0, 'projects', 'button_add', 0, 1320, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy_file', 0, 'versions', 'button_delete', 0, 1322, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetup::User Columns (4.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetup::User Create (0.5ms)[0m   [0mINSERT INTO `users` (`created_on`, `hashed_password`, `admin`, `language`, `lastname`, `mail`, `updated_on`, `firstname`, `mail_notification`, `login`, `status`, `last_login_on`, `auth_source_id`) VALUES('2011-12-23 00:33:08', 'd033e22ae348aeb5660fc2140aec35850c4da997', 1, 'en', 'Admin', 'admin@example.net', '2011-12-23 00:33:08', 'Redmine', 1, 'admin', 1, NULL, NULL)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('1')[0m
Migrating to IssueMove (2)
  [4;36;1mIssueMove::Permission Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mIssueMove::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('move_issues', 0, 'projects', 'button_move', 0, 1061, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('2')[0m
Migrating to IssueAddNote (3)
  [4;35;1mIssueAddNote::Permission Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mIssueAddNote::Permission Create (0.6ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_note', 0, 'issues', 'label_add_note', 0, 1057, 1)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('3')[0m
Migrating to ExportPdf (4)
  [4;36;1mExportPdf::Permission Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mExportPdf::Permission Create (0.8ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('export_issues_pdf', 0, 'projects', 'label_export_pdf', 1, 1002, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mExportPdf::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('export_pdf', 0, 'issues', 'label_export_pdf', 1, 1015, 0)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('4')[0m
Migrating to IssueStartDate (5)
  [4;36;1mSQL (37.7ms)[0m   [0;1mALTER TABLE `issues` ADD `start_date` date[0m
  [4;35;1mSQL (6.5ms)[0m   [0mALTER TABLE `issues` ADD `done_ratio` int(11) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('5')[0m
Migrating to CalendarAndActivity (6)
  [4;35;1mCalendarAndActivity::Permission Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCalendarAndActivity::Permission Create (0.6ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('activity', 0, 'projects', 'label_activity', 1, 160, 0)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCalendarAndActivity::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('calendar', 0, 'projects', 'label_calendar', 1, 165, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCalendarAndActivity::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('gantt', 0, 'projects', 'label_gantt', 1, 166, 0)[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('6')[0m
Migrating to CreateJournals (7)
  [4;36;1mSQL (1.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.8ms)[0m   [0mCREATE TABLE `journals` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `journalized_id` int(11) DEFAULT 0 NOT NULL, `journalized_type` varchar(30) DEFAULT '' NOT NULL, `user_id` int(11) DEFAULT 0 NOT NULL, `notes` text, `created_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (4.2ms)[0m   [0mCREATE TABLE `journal_details` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `journal_id` int(11) DEFAULT 0 NOT NULL, `property` varchar(30) DEFAULT '' NOT NULL, `prop_key` varchar(30) DEFAULT '' NOT NULL, `old_value` varchar(255), `value` varchar(255)) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW KEYS FROM `journals`[0m
  [4;35;1mSQL (49.8ms)[0m   [0mCREATE INDEX `journals_journalized_id` ON `journals` (`journalized_id`, `journalized_type`)[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `journal_details`[0m
  [4;35;1mSQL (7.8ms)[0m   [0mCREATE INDEX `journal_details_journal_id` ON `journal_details` (`journal_id`)[0m
  [4;36;1mCreateJournals::Permission Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCreateJournals::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('history', 0, 'issues', 'label_history', 1, 1006, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mCreateJournals::IssueHistory Load (0.8ms)[0m   [0;1mSELECT * FROM `issue_histories` [0m
  [4;35;1mSQL (1.9ms)[0m   [0mDROP TABLE `issue_histories`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('7')[0m
Migrating to CreateUserPreferences (8)
  [4;35;1mSQL (5.4ms)[0m   [0mCREATE TABLE `user_preferences` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11) DEFAULT 0 NOT NULL, `others` text) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('8')[0m
Migrating to AddHideMailPref (9)
  [4;35;1mSQL (21.8ms)[0m   [0mALTER TABLE `user_preferences` ADD `hide_mail` tinyint(1) DEFAULT 0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('9')[0m
Migrating to CreateComments (10)
  [4;35;1mSQL (3.2ms)[0m   [0mCREATE TABLE `comments` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `commented_type` varchar(30) DEFAULT '' NOT NULL, `commented_id` int(11) DEFAULT 0 NOT NULL, `author_id` int(11) DEFAULT 0 NOT NULL, `comments` text, `created_on` datetime NOT NULL, `updated_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('10')[0m
Migrating to AddNewsCommentsCount (11)
  [4;35;1mSQL (7.8ms)[0m   [0mALTER TABLE `news` ADD `comments_count` int(11) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('11')[0m
Migrating to AddCommentsPermissions (12)
  [4;35;1mAddCommentsPermissions::Permission Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddCommentsPermissions::Permission Create (0.6ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_comment', 0, 'news', 'label_comment_add', 0, 1130, 0)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddCommentsPermissions::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy_comment', 0, 'news', 'label_comment_delete', 0, 1133, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('12')[0m
Migrating to CreateQueries (13)
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (8.0ms)[0m   [0;1mCREATE TABLE `queries` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11), `name` varchar(255) DEFAULT '' NOT NULL, `filters` text, `user_id` int(11) DEFAULT 0 NOT NULL, `is_public` tinyint(1) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('13')[0m
Migrating to AddQueriesPermissions (14)
  [4;36;1mAddQueriesPermissions::Permission Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddQueriesPermissions::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_query', 0, 'projects', 'button_create', 0, 600, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('14')[0m
Migrating to CreateRepositories (15)
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (5.4ms)[0m   [0;1mCREATE TABLE `repositories` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) DEFAULT 0 NOT NULL, `url` varchar(255) DEFAULT '' NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('15')[0m
Migrating to AddRepositoriesPermissions (16)
  [4;36;1mAddRepositoriesPermissions::Permission Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddRepositoriesPermissions::Permission Create (0.6ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('show', 0, 'repositories', 'button_view', 1, 1450, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddRepositoriesPermissions::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('browse', 0, 'repositories', 'label_browse', 1, 1460, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddRepositoriesPermissions::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('entry', 0, 'repositories', 'entry', 1, 1462, 0)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddRepositoriesPermissions::Permission Create (0.5ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('revisions', 0, 'repositories', 'label_view_revisions', 1, 1470, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mAddRepositoriesPermissions::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('revision', 0, 'repositories', 'label_view_revisions', 1, 1472, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddRepositoriesPermissions::Permission Create (0.5ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('diff', 0, 'repositories', 'diff', 1, 1480, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('16')[0m
Migrating to CreateSettings (17)
  [4;36;1mSQL (2.5ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (43.3ms)[0m   [0mCREATE TABLE `settings` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(30) DEFAULT '' NOT NULL, `value` text) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('17')[0m
Migrating to SetDocAndFilesNotifications (18)
  [4;35;1mSetDocAndFilesNotifications::Permission Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Load (1.2ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`action` = 'add_file' AND `permissions`.`controller` = 'projects') LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Update (55.7ms)[0m   [0;1mUPDATE `permissions` SET `mail_option` = 1 WHERE `id` = 41[0m
  [4;35;1mSQL (14.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Load (1.3ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`action` = 'add_document' AND `permissions`.`controller` = 'projects') LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Update (0.4ms)[0m   [0;1mUPDATE `permissions` SET `mail_option` = 1 WHERE `id` = 34[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Load (1.3ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`action` = 'add_attachment' AND `permissions`.`controller` = 'documents') LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Update (0.4ms)[0m   [0;1mUPDATE `permissions` SET `mail_option` = 1 WHERE `id` = 37[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Load (1.3ms)[0m   [0;1mSELECT * FROM `permissions` WHERE (`permissions`.`action` = 'add_attachment' AND `permissions`.`controller` = 'issues') LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetDocAndFilesNotifications::Permission Update (0.5ms)[0m   [0;1mUPDATE `permissions` SET `mail_option` = 1 WHERE `id` = 24[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('18')[0m
Migrating to AddIssueStatusPosition (19)
  [4;35;1mSQL (50.2ms)[0m   [0mALTER TABLE `issue_statuses` ADD `position` int(11) DEFAULT 1[0m
  [4;36;1mIssueStatus Load (1.3ms)[0m   [0;1mSELECT * FROM `issue_statuses` [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('19')[0m
Migrating to AddRolePosition (20)
  [4;36;1mSQL (10.1ms)[0m   [0;1mALTER TABLE `roles` ADD `position` int(11) DEFAULT 1[0m
  [4;35;1mRole Load (1.2ms)[0m   [0mSELECT * FROM `roles` [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20')[0m
Migrating to AddTrackerPosition (21)
  [4;35;1mSQL (8.4ms)[0m   [0mALTER TABLE `trackers` ADD `position` int(11) DEFAULT 1[0m
  [4;36;1mTracker Load (1.1ms)[0m   [0;1mSELECT * FROM `trackers` [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('21')[0m
Migrating to SerializePossiblesValues (22)
  [4;36;1mCustomField Load (1.6ms)[0m   [0;1mSELECT * FROM `custom_fields` [0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('22')[0m
Migrating to AddTrackerIsInRoadmap (23)
  [4;36;1mSQL (13.0ms)[0m   [0;1mALTER TABLE `trackers` ADD `is_in_roadmap` tinyint(1) DEFAULT 1 NOT NULL[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('23')[0m
Migrating to AddRoadmapPermission (24)
  [4;36;1mAddRoadmapPermission::Permission Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddRoadmapPermission::Permission Create (0.7ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('roadmap', 0, 'projects', 'label_roadmap', 1, 107, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('24')[0m
Migrating to AddSearchPermission (25)
  [4;35;1mAddSearchPermission::Permission Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddSearchPermission::Permission Create (0.5ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('search', 0, 'projects', 'label_search', 1, 130, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('25')[0m
Migrating to AddRepositoryLoginAndPassword (26)
  [4;36;1mSQL (9.2ms)[0m   [0;1mALTER TABLE `repositories` ADD `login` varchar(60) DEFAULT ''[0m
  [4;35;1mSQL (7.6ms)[0m   [0mALTER TABLE `repositories` ADD `password` varchar(60) DEFAULT ''[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('26')[0m
Migrating to CreateWikis (27)
  [4;35;1mSQL (5.9ms)[0m   [0mCREATE TABLE `wikis` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) NOT NULL, `start_page` varchar(255) NOT NULL, `status` int(11) DEFAULT 1 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `wikis`[0m
  [4;35;1mSQL (7.7ms)[0m   [0mCREATE INDEX `wikis_project_id` ON `wikis` (`project_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('27')[0m
Migrating to CreateWikiPages (28)
  [4;35;1mSQL (5.7ms)[0m   [0mCREATE TABLE `wiki_pages` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `wiki_id` int(11) NOT NULL, `title` varchar(255) NOT NULL, `created_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW KEYS FROM `wiki_pages`[0m
  [4;35;1mSQL (6.7ms)[0m   [0mCREATE INDEX `wiki_pages_wiki_id_title` ON `wiki_pages` (`wiki_id`, `title`)[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('28')[0m
Migrating to CreateWikiContents (29)
  [4;35;1mSQL (6.7ms)[0m   [0mCREATE TABLE `wiki_contents` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `page_id` int(11) NOT NULL, `author_id` int(11), `text` text, `comments` varchar(255) DEFAULT '', `updated_on` datetime NOT NULL, `version` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `wiki_contents`[0m
  [4;35;1mSQL (33.3ms)[0m   [0mCREATE INDEX `wiki_contents_page_id` ON `wiki_contents` (`page_id`)[0m
  [4;36;1mSQL (31.9ms)[0m   [0;1mCREATE TABLE `wiki_content_versions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `wiki_content_id` int(11) NOT NULL, `page_id` int(11) NOT NULL, `author_id` int(11), `data` blob, `compression` varchar(6) DEFAULT '', `comments` varchar(255) DEFAULT '', `updated_on` datetime NOT NULL, `version` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `wiki_content_versions`[0m
  [4;36;1mSQL (7.5ms)[0m   [0;1mCREATE INDEX `wiki_content_versions_wcid` ON `wiki_content_versions` (`wiki_content_id`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('29')[0m
Migrating to AddProjectsFeedsPermissions (30)
  [4;36;1mAddProjectsFeedsPermissions::Permission Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddProjectsFeedsPermissions::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('feeds', 0, 'projects', 'label_feed_plural', 1, 132, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('30')[0m
Migrating to AddRepositoryRootUrl (31)
  [4;35;1mSQL (8.7ms)[0m   [0mALTER TABLE `repositories` ADD `root_url` varchar(255) DEFAULT ''[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('31')[0m
Migrating to CreateTimeEntries (32)
  [4;35;1mSQL (5.9ms)[0m   [0mCREATE TABLE `time_entries` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, `issue_id` int(11), `hours` float NOT NULL, `comments` varchar(255), `activity_id` int(11) NOT NULL, `spent_on` date NOT NULL, `tyear` int(11) NOT NULL, `tmonth` int(11) NOT NULL, `tweek` int(11) NOT NULL, `created_on` datetime NOT NULL, `updated_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `time_entries`[0m
  [4;35;1mSQL (8.1ms)[0m   [0mCREATE INDEX `time_entries_project_id` ON `time_entries` (`project_id`)[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `time_entries`[0m
  [4;35;1mSQL (10.8ms)[0m   [0mCREATE INDEX `time_entries_issue_id` ON `time_entries` (`issue_id`)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('32')[0m
Migrating to AddTimelogPermissions (33)
  [4;35;1mAddTimelogPermissions::Permission Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddTimelogPermissions::Permission Create (0.6ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'timelog', 'button_log_time', 0, 1520, 0)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('33')[0m
Migrating to CreateChangesets (34)
  [4;36;1mSQL (8.9ms)[0m   [0;1mCREATE TABLE `changesets` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `repository_id` int(11) NOT NULL, `revision` int(11) NOT NULL, `committer` varchar(30), `committed_on` datetime NOT NULL, `comments` text) ENGINE=InnoDB[0m
  [4;35;1mSQL (2.1ms)[0m   [0mSHOW KEYS FROM `changesets`[0m
  [4;36;1mSQL (7.1ms)[0m   [0;1mCREATE UNIQUE INDEX `changesets_repos_rev` ON `changesets` (`repository_id`, `revision`)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('34')[0m
Migrating to CreateChanges (35)
  [4;36;1mSQL (5.8ms)[0m   [0;1mCREATE TABLE `changes` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `changeset_id` int(11) NOT NULL, `action` varchar(1) DEFAULT '' NOT NULL, `path` varchar(255) DEFAULT '' NOT NULL, `from_path` varchar(255), `from_revision` int(11)) ENGINE=InnoDB[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `changes`[0m
  [4;36;1mSQL (20.3ms)[0m   [0;1mCREATE INDEX `changesets_changeset_id` ON `changes` (`changeset_id`)[0m
  [4;35;1mSQL (0.3ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('35')[0m
Migrating to AddChangesetCommitDate (36)
  [4;36;1mSQL (5.2ms)[0m   [0;1mALTER TABLE `changesets` ADD `commit_date` date[0m
  [4;35;1mChangeset Update (0.4ms)[0m   [0mUPDATE `changesets` SET commit_date = committed_on [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('36')[0m
Migrating to AddProjectIdentifier (37)
  [4;35;1mSQL (6.4ms)[0m   [0mALTER TABLE `projects` ADD `identifier` varchar(20)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('37')[0m
Migrating to AddCustomFieldIsFilter (38)
  [4;35;1mSQL (7.7ms)[0m   [0mALTER TABLE `custom_fields` ADD `is_filter` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('38')[0m
Migrating to CreateWatchers (39)
  [4;35;1mSQL (5.4ms)[0m   [0mCREATE TABLE `watchers` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `watchable_type` varchar(255) DEFAULT '' NOT NULL, `watchable_id` int(11) DEFAULT 0 NOT NULL, `user_id` int(11)) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('39')[0m
Migrating to CreateChangesetsIssues (40)
  [4;35;1mSQL (6.7ms)[0m   [0mCREATE TABLE `changesets_issues` (`changeset_id` int(11) NOT NULL, `issue_id` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `changesets_issues`[0m
  [4;35;1mSQL (9.6ms)[0m   [0mCREATE UNIQUE INDEX `changesets_issues_ids` ON `changesets_issues` (`changeset_id`, `issue_id`)[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('40')[0m
Migrating to RenameCommentToComments (41)
  [4;35;1mSQL (3.2ms)[0m   [0mSHOW FIELDS FROM `comments`[0m
  [4;36;1mSQL (3.0ms)[0m   [0;1mSHOW FIELDS FROM `wiki_contents`[0m
  [4;35;1mSQL (3.1ms)[0m   [0mSHOW FIELDS FROM `wiki_content_versions`[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW FIELDS FROM `time_entries`[0m
  [4;35;1mSQL (3.0ms)[0m   [0mSHOW FIELDS FROM `changesets`[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('41')[0m
Migrating to CreateIssueRelations (42)
  [4;35;1mSQL (12.4ms)[0m   [0mCREATE TABLE `issue_relations` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `issue_from_id` int(11) NOT NULL, `issue_to_id` int(11) NOT NULL, `relation_type` varchar(255) DEFAULT '' NOT NULL, `delay` int(11)) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('42')[0m
Migrating to AddRelationsPermissions (43)
  [4;35;1mAddRelationsPermissions::Permission Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddRelationsPermissions::Permission Create (0.7ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('new', 0, 'issue_relations', 'label_relation_new', 0, 1080, 0)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddRelationsPermissions::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'issue_relations', 'label_relation_delete', 0, 1085, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('43')[0m
Migrating to SetLanguageLengthToFive (44)
  [4;35;1mSQL (4.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (23.5ms)[0m   [0;1mALTER TABLE `users` CHANGE `language` `language` varchar(5) DEFAULT ''[0m
  [4;35;1mSQL (0.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('44')[0m
Migrating to CreateBoards (45)
  [4;36;1mSQL (3.6ms)[0m   [0;1mCREATE TABLE `boards` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11) NOT NULL, `name` varchar(255) DEFAULT '' NOT NULL, `description` varchar(255), `position` int(11) DEFAULT 1, `topics_count` int(11) DEFAULT 0 NOT NULL, `messages_count` int(11) DEFAULT 0 NOT NULL, `last_message_id` int(11)) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `boards`[0m
  [4;36;1mSQL (4.8ms)[0m   [0;1mCREATE INDEX `boards_project_id` ON `boards` (`project_id`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('45')[0m
Migrating to CreateMessages (46)
  [4;36;1mSQL (4.5ms)[0m   [0;1mCREATE TABLE `messages` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `board_id` int(11) NOT NULL, `parent_id` int(11), `subject` varchar(255) DEFAULT '' NOT NULL, `content` text, `author_id` int(11), `replies_count` int(11) DEFAULT 0 NOT NULL, `last_reply_id` int(11), `created_on` datetime NOT NULL, `updated_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `messages`[0m
  [4;36;1mSQL (5.3ms)[0m   [0;1mCREATE INDEX `messages_board_id` ON `messages` (`board_id`)[0m
  [4;35;1mSQL (1.8ms)[0m   [0mSHOW KEYS FROM `messages`[0m
  [4;36;1mSQL (9.3ms)[0m   [0;1mCREATE INDEX `messages_parent_id` ON `messages` (`parent_id`)[0m
  [4;35;1mSQL (3.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('46')[0m
Migrating to AddBoardsPermissions (47)
  [4;36;1mAddBoardsPermissions::Permission Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mAddBoardsPermissions::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('new', 0, 'boards', 'button_add', 0, 2000, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddBoardsPermissions::Permission Create (0.3ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('edit', 0, 'boards', 'button_edit', 0, 2005, 0)[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mAddBoardsPermissions::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'boards', 'button_delete', 0, 2010, 0)[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('47')[0m
Migrating to AllowNullVersionEffectiveDate (48)
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW FIELDS FROM `versions`[0m
  [4;36;1mSQL (6.1ms)[0m   [0;1mALTER TABLE `versions` CHANGE `effective_date` `effective_date` date DEFAULT NULL[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('48')[0m
Migrating to AddWikiDestroyPagePermission (49)
  [4;36;1mAddWikiDestroyPagePermission::Permission Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mAddWikiDestroyPagePermission::Permission Create (0.3ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy', 0, 'wiki', 'button_delete', 0, 1740, 0)[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('49')[0m
Migrating to AddWikiAttachmentsPermissions (50)
  [4;35;1mAddWikiAttachmentsPermissions::Permission Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `permissions`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAddWikiAttachmentsPermissions::Permission Create (0.4ms)[0m   [0mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('add_attachment', 0, 'wiki', 'label_attachment_new', 0, 1750, 0)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mAddWikiAttachmentsPermissions::Permission Create (0.4ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('destroy_attachment', 0, 'wiki', 'label_attachment_delete', 0, 1755, 0)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('50')[0m
Migrating to AddProjectStatus (51)
  [4;35;1mSQL (17.9ms)[0m   [0mALTER TABLE `projects` ADD `status` int(11) DEFAULT 1 NOT NULL[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('51')[0m
Migrating to AddChangesRevision (52)
  [4;35;1mSQL (13.3ms)[0m   [0mALTER TABLE `changes` ADD `revision` varchar(255)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('52')[0m
Migrating to AddChangesBranch (53)
  [4;35;1mSQL (9.8ms)[0m   [0mALTER TABLE `changes` ADD `branch` varchar(255)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('53')[0m
Migrating to AddChangesetsScmid (54)
  [4;35;1mSQL (9.4ms)[0m   [0mALTER TABLE `changesets` ADD `scmid` varchar(255)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('54')[0m
Migrating to AddRepositoriesType (55)
  [4;35;1mSQL (10.1ms)[0m   [0mALTER TABLE `repositories` ADD `type` varchar(255)[0m
  [4;36;1mRepository Update (0.6ms)[0m   [0;1mUPDATE `repositories` SET type = 'Subversion' [0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('55')[0m
Migrating to AddRepositoriesChangesPermission (56)
  [4;36;1mAddRepositoriesChangesPermission::Permission Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `permissions`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAddRepositoriesChangesPermission::Permission Create (0.5ms)[0m   [0;1mINSERT INTO `permissions` (`action`, `mail_enabled`, `controller`, `description`, `is_public`, `sort`, `mail_option`) VALUES('changes', 0, 'repositories', 'label_change_plural', 1, 1475, 0)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('56')[0m
Migrating to AddVersionsWikiPageTitle (57)
  [4;35;1mSQL (14.7ms)[0m   [0mALTER TABLE `versions` ADD `wiki_page_title` varchar(255)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('57')[0m
Migrating to AddIssueCategoriesAssignedToId (58)
  [4;35;1mSQL (7.7ms)[0m   [0mALTER TABLE `issue_categories` ADD `assigned_to_id` int(11)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('58')[0m
Migrating to AddRolesAssignable (59)
  [4;35;1mSQL (11.5ms)[0m   [0mALTER TABLE `roles` ADD `assignable` tinyint(1) DEFAULT 1[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('59')[0m
Migrating to ChangeChangesetsCommitterLimit (60)
  [4;35;1mSQL (3.2ms)[0m   [0mSHOW FIELDS FROM `changesets`[0m
  [4;36;1mSQL (9.7ms)[0m   [0;1mALTER TABLE `changesets` CHANGE `committer` `committer` varchar(255) DEFAULT NULL[0m
  [4;35;1mSQL (1.3ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('60')[0m
Migrating to AddRolesBuiltin (61)
  [4;36;1mSQL (7.5ms)[0m   [0;1mALTER TABLE `roles` ADD `builtin` int(11) DEFAULT 0 NOT NULL[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('61')[0m
Migrating to InsertBuiltinRoles (62)
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mRole Load (0.7ms)[0m   [0;1mSELECT `roles`.id FROM `roles` WHERE (`roles`.`name` = BINARY 'Non member') LIMIT 1[0m
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mRole Create (0.4ms)[0m   [0;1mINSERT INTO `roles` (`name`, `position`, `builtin`, `assignable`) VALUES('Non member', 1, 1, 1)[0m
  [4;35;1mSQL (11.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT `roles`.id FROM `roles` WHERE (`roles`.`name` = BINARY 'Anonymous') LIMIT 1[0m
  [4;36;1mRole Load (1.1ms)[0m   [0;1mSELECT * FROM `roles` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mRole Create (0.4ms)[0m   [0mINSERT INTO `roles` (`name`, `position`, `builtin`, `assignable`) VALUES('Anonymous', 2, 2, 1)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('62')[0m
Migrating to AddRolesPermissions (63)
  [4;36;1mSQL (7.1ms)[0m   [0;1mALTER TABLE `roles` ADD `permissions` text[0m
  [4;35;1mSQL (1.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('63')[0m
Migrating to DropPermissions (64)
  [4;36;1mSQL (1.7ms)[0m   [0;1mDROP TABLE `permissions`[0m
  [4;35;1mSQL (1.5ms)[0m   [0mDROP TABLE `permissions_roles`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('64')[0m
Migrating to AddSettingsUpdatedOn (65)
  [4;35;1mSQL (10.2ms)[0m   [0mALTER TABLE `settings` ADD `updated_on` datetime[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('65')[0m
Migrating to AddCustomValueCustomizedIndex (66)
  [4;36;1mSQL (1.3ms)[0m   [0;1mSHOW KEYS FROM `custom_values`[0m
  [4;35;1mSQL (7.1ms)[0m   [0mCREATE INDEX `custom_values_customized` ON `custom_values` (`customized_type`, `customized_id`)[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('66')[0m
Migrating to CreateWikiRedirects (67)
  [4;35;1mSQL (3.9ms)[0m   [0mCREATE TABLE `wiki_redirects` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `wiki_id` int(11) NOT NULL, `title` varchar(255), `redirects_to` varchar(255), `created_on` datetime NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW KEYS FROM `wiki_redirects`[0m
  [4;35;1mSQL (5.7ms)[0m   [0mCREATE INDEX `wiki_redirects_wiki_id_title` ON `wiki_redirects` (`wiki_id`, `title`)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('67')[0m
Migrating to CreateEnabledModules (68)
  [4;35;1mSQL (9.1ms)[0m   [0mCREATE TABLE `enabled_modules` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `project_id` int(11), `name` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW KEYS FROM `enabled_modules`[0m
  [4;35;1mSQL (6.5ms)[0m   [0mCREATE INDEX `enabled_modules_project_id` ON `enabled_modules` (`project_id`)[0m
  [4;36;1mProject Load (1.0ms)[0m   [0;1mSELECT * FROM `projects` [0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('68')[0m
Migrating to AddIssuesEstimatedHours (69)
  [4;36;1mSQL (9.2ms)[0m   [0;1mALTER TABLE `issues` ADD `estimated_hours` float[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('69')[0m
Migrating to ChangeAttachmentsContentTypeLimit (70)
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW FIELDS FROM `attachments`[0m
  [4;35;1mSQL (5.1ms)[0m   [0mALTER TABLE `attachments` CHANGE `content_type` `content_type` varchar(255) DEFAULT ''[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('70')[0m
Migrating to AddQueriesColumnNames (71)
  [4;35;1mSQL (4.4ms)[0m   [0mALTER TABLE `queries` ADD `column_names` text[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('71')[0m
Migrating to AddEnumerationsPosition (72)
  [4;35;1mEnumeration Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `enumerations`[0m
  [4;36;1mSQL (14.2ms)[0m   [0;1mALTER TABLE `enumerations` ADD `position` int(11) DEFAULT 1[0m
  [4;35;1mEnumeration Load (0.6ms)[0m   [0mSELECT * FROM `enumerations` ORDER BY enumerations.position ASC[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('72')[0m
Migrating to AddEnumerationsIsDefault (73)
  [4;35;1mSQL (3.6ms)[0m   [0mALTER TABLE `enumerations` ADD `is_default` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('73')[0m
Migrating to AddAuthSourcesTls (74)
  [4;35;1mSQL (7.2ms)[0m   [0mALTER TABLE `auth_sources` ADD `tls` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('74')[0m
Migrating to AddMembersMailNotification (75)
  [4;35;1mSQL (7.9ms)[0m   [0mALTER TABLE `members` ADD `mail_notification` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('75')[0m
Migrating to AllowNullPosition (76)
  [4;35;1mSQL (1.8ms)[0m   [0mSHOW FIELDS FROM `issue_statuses`[0m
  [4;36;1mSQL (4.5ms)[0m   [0;1mALTER TABLE `issue_statuses` CHANGE `position` `position` int(11) DEFAULT 1[0m
  [4;35;1mSQL (3.7ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mSQL (7.4ms)[0m   [0;1mALTER TABLE `roles` CHANGE `position` `position` int(11) DEFAULT 1[0m
  [4;35;1mSQL (1.6ms)[0m   [0mSHOW FIELDS FROM `trackers`[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mALTER TABLE `trackers` CHANGE `position` `position` int(11) DEFAULT 1[0m
  [4;35;1mSQL (2.1ms)[0m   [0mSHOW FIELDS FROM `boards`[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mALTER TABLE `boards` CHANGE `position` `position` int(11) DEFAULT 1[0m
  [4;35;1mSQL (1.3ms)[0m   [0mSHOW FIELDS FROM `enumerations`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mALTER TABLE `enumerations` CHANGE `position` `position` int(11) DEFAULT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('76')[0m
Migrating to RemoveIssueStatusesHtmlColor (77)
  [4;36;1mSQL (6.9ms)[0m   [0;1mALTER TABLE `issue_statuses` DROP `html_color`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('77')[0m
Migrating to AddCustomFieldsPosition (78)
  [4;36;1mSQL (5.1ms)[0m   [0;1mALTER TABLE `custom_fields` ADD `position` int(11) DEFAULT 1[0m
  [4;35;1mCustomField Load (1.3ms)[0m   [0mSELECT * FROM `custom_fields` [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('78')[0m
Migrating to AddUserPreferencesTimeZone (79)
  [4;35;1mSQL (7.5ms)[0m   [0mALTER TABLE `user_preferences` ADD `time_zone` varchar(255)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('79')[0m
Migrating to AddUsersType (80)
  [4;35;1mSQL (5.2ms)[0m   [0mALTER TABLE `users` ADD `type` varchar(255)[0m
  [4;36;1mUser Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Update (0.3ms)[0m   [0mUPDATE `users` SET type = 'User' WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('80')[0m
Migrating to CreateProjectsTrackers (81)
  [4;35;1mSQL (4.0ms)[0m   [0mCREATE TABLE `projects_trackers` (`project_id` int(11) DEFAULT 0 NOT NULL, `tracker_id` int(11) DEFAULT 0 NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mSHOW KEYS FROM `projects_trackers`[0m
  [4;35;1mSQL (7.2ms)[0m   [0mCREATE INDEX `projects_trackers_project_id` ON `projects_trackers` (`project_id`)[0m
  [4;36;1mTracker Load (0.8ms)[0m   [0;1mSELECT * FROM `trackers` [0m
  [4;35;1mProject Load (0.9ms)[0m   [0mSELECT * FROM `projects` [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('81')[0m
Migrating to AddMessagesLocked (82)
  [4;35;1mSQL (5.1ms)[0m   [0mALTER TABLE `messages` ADD `locked` tinyint(1) DEFAULT 0[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('82')[0m
Migrating to AddMessagesSticky (83)
  [4;35;1mSQL (18.9ms)[0m   [0mALTER TABLE `messages` ADD `sticky` int(11) DEFAULT 0[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('83')[0m
Migrating to ChangeAuthSourcesAccountLimit (84)
  [4;35;1mSQL (3.7ms)[0m   [0mSHOW FIELDS FROM `auth_sources`[0m
  [4;36;1mSQL (9.1ms)[0m   [0;1mALTER TABLE `auth_sources` CHANGE `account` `account` varchar(255) DEFAULT NULL[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('84')[0m
Migrating to AddRoleTrackerOldStatusIndexToWorkflows (85)
  [4;36;1mSQL (3.0ms)[0m   [0;1mSHOW KEYS FROM `workflows`[0m
  [4;35;1mSQL (5.0ms)[0m   [0mCREATE INDEX `wkfs_role_tracker_old_status` ON `workflows` (`role_id`, `tracker_id`, `old_status_id`)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('85')[0m
Migrating to AddCustomFieldsSearchable (86)
  [4;35;1mSQL (6.8ms)[0m   [0mALTER TABLE `custom_fields` ADD `searchable` tinyint(1) DEFAULT 0[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('86')[0m
Migrating to ChangeProjectsDescriptionToText (87)
  [4;35;1mSQL (5.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mSQL (9.5ms)[0m   [0;1mALTER TABLE `projects` CHANGE `description` `description` text DEFAULT NULL[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('87')[0m
Migrating to AddCustomFieldsDefaultValue (88)
  [4;36;1mSQL (10.2ms)[0m   [0;1mALTER TABLE `custom_fields` ADD `default_value` text[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('88')[0m
Migrating to AddAttachmentsDescription (89)
  [4;36;1mSQL (8.1ms)[0m   [0;1mALTER TABLE `attachments` ADD `description` varchar(255)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('89')[0m
Migrating to ChangeVersionsNameLimit (90)
  [4;36;1mSQL (5.2ms)[0m   [0;1mSHOW FIELDS FROM `versions`[0m
  [4;35;1mSQL (13.0ms)[0m   [0mALTER TABLE `versions` CHANGE `name` `name` varchar(255) DEFAULT '' NOT NULL[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('90')[0m
Migrating to ChangeChangesetsRevisionToString (91)
  [4;35;1mSQL (3.2ms)[0m   [0mSHOW FIELDS FROM `changesets`[0m
  [4;36;1mSQL (12.0ms)[0m   [0;1mALTER TABLE `changesets` CHANGE `revision` `revision` varchar(255) NOT NULL[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('91')[0m
Migrating to ChangeChangesFromRevisionToString (92)
  [4;36;1mSQL (3.2ms)[0m   [0;1mSHOW FIELDS FROM `changes`[0m
  [4;35;1mSQL (16.8ms)[0m   [0mALTER TABLE `changes` CHANGE `from_revision` `from_revision` varchar(255) DEFAULT NULL[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('92')[0m
Migrating to AddWikiPagesProtected (93)
  [4;35;1mSQL (9.3ms)[0m   [0mALTER TABLE `wiki_pages` ADD `protected` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('93')[0m
Migrating to ChangeProjectsHomepageLimit (94)
  [4;35;1mSQL (6.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mSQL (9.2ms)[0m   [0;1mALTER TABLE `projects` CHANGE `homepage` `homepage` varchar(255) DEFAULT ''[0m
  [4;35;1mSQL (2.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('94')[0m
Migrating to AddWikiPagesParentId (95)
  [4;36;1mSQL (13.0ms)[0m   [0;1mALTER TABLE `wiki_pages` ADD `parent_id` int(11) DEFAULT NULL[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('95')[0m
Migrating to AddCommitAccessPermission (96)
  [4;36;1mRole Load (1.6ms)[0m   [0;1mSELECT * FROM `roles` [0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('96')[0m
Migrating to AddViewWikiEditsPermission (97)
  [4;36;1mRole Load (1.1ms)[0m   [0;1mSELECT * FROM `roles` [0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('97')[0m
Migrating to SetTopicAuthorsAsWatchers (98)
  [4;36;1mSQL (1.2ms)[0m   [0;1mINSERT INTO watchers (watchable_type, watchable_id, user_id) SELECT DISTINCT 'Message', COALESCE(m.parent_id, m.id), m.author_id FROM messages m, users u WHERE m.author_id = u.id AND u.status = 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('98')[0m
Migrating to AddDeleteWikiPagesAttachmentsPermission (99)
  [4;36;1mRole Load (1.1ms)[0m   [0;1mSELECT * FROM `roles` [0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('99')[0m
Migrating to AddChangesetsUserId (100)
  [4;36;1mSQL (49.9ms)[0m   [0;1mALTER TABLE `changesets` ADD `user_id` int(11) DEFAULT NULL[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('100')[0m
Migrating to PopulateChangesetsUserId (101)
  [4;36;1mSQL (12.9ms)[0m   [0;1mSELECT DISTINCT committer FROM changesets[0m
  [4;35;1mSQL (4.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('101')[0m
Migrating to AddCustomFieldsEditable (102)
  [4;36;1mSQL (8.1ms)[0m   [0;1mALTER TABLE `custom_fields` ADD `editable` tinyint(1) DEFAULT 1[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('102')[0m
Migrating to SetCustomFieldsEditable (103)
  [4;36;1mUserCustomField Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mUserCustomField Update (0.5ms)[0m   [0mUPDATE `custom_fields` SET editable = 0 WHERE ( (`custom_fields`.`type` = 'UserCustomField' ) ) [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('103')[0m
Migrating to AddProjectsLftAndRgt (104)
  [4;35;1mSQL (16.2ms)[0m   [0mALTER TABLE `projects` ADD `lft` int(11)[0m
  [4;36;1mSQL (12.0ms)[0m   [0;1mALTER TABLE `projects` ADD `rgt` int(11)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('104')[0m
Migrating to BuildProjectsTree (105)
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT count(*) AS count_all FROM `projects` LEFT OUTER JOIN `projects` AS parent ON `projects`.`parent_id` = parent.id WHERE (`projects`.`lft` IS NULL OR `projects`.`rgt` IS NULL OR `projects`.`lft` >= `projects`.`rgt` OR (`projects`.`parent_id` IS NOT NULL AND (`projects`.`lft` <= parent.`lft` OR `projects`.`rgt` >= parent.`rgt`))) [0m
  [4;36;1mProject Load (0.8ms)[0m   [0;1mSELECT `lft`, COUNT(`lft`) FROM `projects` GROUP BY `lft` 
 HAVING COUNT(`lft`) > 1 LIMIT 1[0m
  [4;35;1mProject Load (0.5ms)[0m   [0mSELECT `rgt`, COUNT(`rgt`) FROM `projects` GROUP BY `rgt` 
 HAVING COUNT(`rgt`) > 1 LIMIT 1[0m
  [4;36;1mProject Load (0.9ms)[0m   [0;1mSELECT * FROM `projects` WHERE (`projects`.`parent_id` IS NULL) ORDER BY `lft`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('105')[0m
Migrating to RemoveProjectsProjectsCount (106)
  [4;36;1mSQL (10.8ms)[0m   [0;1mALTER TABLE `projects` DROP `projects_count`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('106')[0m
Migrating to AddOpenIdAuthenticationTables (107)
  [4;36;1mSQL (3.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (5.4ms)[0m   [0mCREATE TABLE `open_id_authentication_associations` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `issued` int(11), `lifetime` int(11), `handle` varchar(255), `assoc_type` varchar(255), `server_url` blob, `secret` blob) ENGINE=InnoDB[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (9.1ms)[0m   [0mCREATE TABLE `open_id_authentication_nonces` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `timestamp` int(11) NOT NULL, `server_url` varchar(255), `salt` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.0ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('107')[0m
Migrating to AddIdentityUrlToUsers (108)
  [4;35;1mSQL (27.3ms)[0m   [0mALTER TABLE `users` ADD `identity_url` varchar(255)[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('108')[0m
Migrating to AddWatchersUserIdTypeIndex (20090214190337)
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `watchers`[0m
  [4;36;1mSQL (23.2ms)[0m   [0;1mCREATE INDEX `watchers_user_id_type` ON `watchers` (`user_id`, `watchable_type`)[0m
  [4;35;1mSQL (0.3ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090214190337')[0m
Migrating to AddQueriesSortCriteria (20090312172426)
  [4;36;1mSQL (6.4ms)[0m   [0;1mALTER TABLE `queries` ADD `sort_criteria` text[0m
  [4;35;1mSQL (0.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090312172426')[0m
Migrating to AddProjectsTrackersUniqueIndex (20090312194159)
  [4;36;1mProject Load (2.4ms)[0m   [0;1mSELECT * FROM `projects` [0m
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW KEYS FROM `projects_trackers`[0m
  [4;36;1mSQL (30.2ms)[0m   [0;1mCREATE UNIQUE INDEX `projects_trackers_unique` ON `projects_trackers` (`project_id`, `tracker_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090312194159')[0m
Migrating to ExtendSettingsName (20090318181151)
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (7.8ms)[0m   [0mALTER TABLE `settings` CHANGE `name` `name` varchar(255) DEFAULT '' NOT NULL[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090318181151')[0m
Migrating to AddTypeToEnumerations (20090323224724)
  [4;35;1mSQL (5.4ms)[0m   [0mALTER TABLE `enumerations` ADD `type` varchar(255)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090323224724')[0m
Migrating to UpdateEnumerationsToSti (20090401221305)
  [4;35;1mEnumeration Update (0.7ms)[0m   [0mUPDATE `enumerations` SET type = 'IssuePriority' WHERE (opt = 'IPRI') [0m
  [4;36;1mEnumeration Update (0.4ms)[0m   [0;1mUPDATE `enumerations` SET type = 'DocumentCategory' WHERE (opt = 'DCAT') [0m
  [4;35;1mEnumeration Update (0.3ms)[0m   [0mUPDATE `enumerations` SET type = 'TimeEntryActivity' WHERE (opt = 'ACTI') [0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090401221305')[0m
Migrating to AddActiveFieldToEnumerations (20090401231134)
  [4;35;1mSQL (8.4ms)[0m   [0mALTER TABLE `enumerations` ADD `active` tinyint(1) DEFAULT 1 NOT NULL[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090401231134')[0m
Migrating to AddProjectToEnumerations (20090403001910)
  [4;35;1mSQL (7.8ms)[0m   [0mALTER TABLE `enumerations` ADD `project_id` int(11) DEFAULT NULL[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW KEYS FROM `enumerations`[0m
  [4;35;1mSQL (9.6ms)[0m   [0mCREATE INDEX `index_enumerations_on_project_id` ON `enumerations` (`project_id`)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090403001910')[0m
Migrating to AddParentIdToEnumerations (20090406161854)
  [4;35;1mSQL (8.5ms)[0m   [0mALTER TABLE `enumerations` ADD `parent_id` int(11) DEFAULT NULL[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090406161854')[0m
Migrating to AddQueriesGroupBy (20090425161243)
  [4;35;1mSQL (9.2ms)[0m   [0mALTER TABLE `queries` ADD `group_by` varchar(255)[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090425161243')[0m
Migrating to CreateMemberRoles (20090503121501)
  [4;35;1mSQL (5.0ms)[0m   [0mCREATE TABLE `member_roles` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `member_id` int(11) NOT NULL, `role_id` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20090503121501')[0m
Migrating to PopulateMemberRoles (20090503121505)
  [4;35;1mMemberRole Delete all (0.6ms)[0m   [0mDELETE FROM `member_roles` [0m
  [4;36;1mMember Load (0.9ms)[0m   [0;1mSELECT * FROM `members` [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090503121505')[0m
Migrating to DropMembersRoleId (20090503121510)
  [4;36;1mSQL (14.6ms)[0m   [0;1mALTER TABLE `members` DROP `role_id`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090503121510')[0m
Migrating to FixMessagesStickyNull (20090614091200)
  [4;36;1mMessage Update (0.5ms)[0m   [0;1mUPDATE `messages` SET sticky = 0 WHERE (sticky IS NULL) [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090614091200')[0m
Migrating to PopulateUsersType (20090704172350)
  [4;36;1mPrincipal Update (1.3ms)[0m   [0;1mUPDATE `users` SET type = 'User' WHERE (type IS NULL) [0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090704172350')[0m
Migrating to CreateGroupsUsers (20090704172355)
  [4;36;1mSQL (18.2ms)[0m   [0;1mCREATE TABLE `groups_users` (`group_id` int(11) NOT NULL, `user_id` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW KEYS FROM `groups_users`[0m
  [4;36;1mSQL (4.0ms)[0m   [0;1mCREATE UNIQUE INDEX `groups_users_ids` ON `groups_users` (`group_id`, `user_id`)[0m
  [4;35;1mSQL (0.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090704172355')[0m
Migrating to AddMemberRolesInheritedFrom (20090704172358)
  [4;36;1mSQL (9.8ms)[0m   [0;1mALTER TABLE `member_roles` ADD `inherited_from` int(11)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20090704172358')[0m
Migrating to FixUsersCustomValues (20091010093521)
  [4;36;1mCustomValue Update (1.1ms)[0m   [0;1mUPDATE `custom_values` SET customized_type = 'Principal' WHERE (customized_type = 'User') [0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091010093521')[0m
Migrating to AddMissingIndexesToWorkflows (20091017212227)
  [4;36;1mSQL (4.7ms)[0m   [0;1mSHOW KEYS FROM `workflows`[0m
  [4;35;1mSQL (10.0ms)[0m   [0mCREATE INDEX `index_workflows_on_old_status_id` ON `workflows` (`old_status_id`)[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `workflows`[0m
  [4;35;1mSQL (10.5ms)[0m   [0mCREATE INDEX `index_workflows_on_role_id` ON `workflows` (`role_id`)[0m
  [4;36;1mSQL (4.8ms)[0m   [0;1mSHOW KEYS FROM `workflows`[0m
  [4;35;1mSQL (12.9ms)[0m   [0mCREATE INDEX `index_workflows_on_new_status_id` ON `workflows` (`new_status_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017212227')[0m
Migrating to AddMissingIndexesToCustomFieldsProjects (20091017212457)
  [4;35;1mSQL (3.0ms)[0m   [0mSHOW KEYS FROM `custom_fields_projects`[0m
  [4;36;1mSQL (9.4ms)[0m   [0;1mCREATE INDEX `index_custom_fields_projects_on_custom_field_id_and_project_id` ON `custom_fields_projects` (`custom_field_id`, `project_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017212457')[0m
Migrating to AddMissingIndexesToMessages (20091017212644)
  [4;36;1mSQL (3.4ms)[0m   [0;1mSHOW KEYS FROM `messages`[0m
  [4;35;1mSQL (8.9ms)[0m   [0mCREATE INDEX `index_messages_on_last_reply_id` ON `messages` (`last_reply_id`)[0m
  [4;36;1mSQL (4.3ms)[0m   [0;1mSHOW KEYS FROM `messages`[0m
  [4;35;1mSQL (9.5ms)[0m   [0mCREATE INDEX `index_messages_on_author_id` ON `messages` (`author_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017212644')[0m
Migrating to AddMissingIndexesToRepositories (20091017212938)
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW KEYS FROM `repositories`[0m
  [4;36;1mSQL (11.9ms)[0m   [0;1mCREATE INDEX `index_repositories_on_project_id` ON `repositories` (`project_id`)[0m
  [4;35;1mSQL (0.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017212938')[0m
Migrating to AddMissingIndexesToComments (20091017213027)
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `comments`[0m
  [4;35;1mSQL (7.9ms)[0m   [0mCREATE INDEX `index_comments_on_commented_id_and_commented_type` ON `comments` (`commented_id`, `commented_type`)[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mSHOW KEYS FROM `comments`[0m
  [4;35;1mSQL (24.6ms)[0m   [0mCREATE INDEX `index_comments_on_author_id` ON `comments` (`author_id`)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213027')[0m
Migrating to AddMissingIndexesToEnumerations (20091017213113)
  [4;35;1mSQL (2.5ms)[0m   [0mSHOW KEYS FROM `enumerations`[0m
  [4;36;1mSQL (9.9ms)[0m   [0;1mCREATE INDEX `index_enumerations_on_id_and_type` ON `enumerations` (`id`, `type`)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017213113')[0m
Migrating to AddMissingIndexesToWikiPages (20091017213151)
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW KEYS FROM `wiki_pages`[0m
  [4;35;1mSQL (8.1ms)[0m   [0mCREATE INDEX `index_wiki_pages_on_wiki_id` ON `wiki_pages` (`wiki_id`)[0m
  [4;36;1mSQL (4.2ms)[0m   [0;1mSHOW KEYS FROM `wiki_pages`[0m
  [4;35;1mSQL (9.3ms)[0m   [0mCREATE INDEX `index_wiki_pages_on_parent_id` ON `wiki_pages` (`parent_id`)[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213151')[0m
Migrating to AddMissingIndexesToWatchers (20091017213228)
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW KEYS FROM `watchers`[0m
  [4;36;1mSQL (7.3ms)[0m   [0;1mCREATE INDEX `index_watchers_on_user_id` ON `watchers` (`user_id`)[0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW KEYS FROM `watchers`[0m
  [4;36;1mSQL (7.9ms)[0m   [0;1mCREATE INDEX `index_watchers_on_watchable_id_and_watchable_type` ON `watchers` (`watchable_id`, `watchable_type`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017213228')[0m
Migrating to AddMissingIndexesToAuthSources (20091017213257)
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `auth_sources`[0m
  [4;35;1mSQL (7.8ms)[0m   [0mCREATE INDEX `index_auth_sources_on_id_and_type` ON `auth_sources` (`id`, `type`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213257')[0m
Migrating to AddMissingIndexesToDocuments (20091017213332)
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `documents`[0m
  [4;36;1mSQL (9.1ms)[0m   [0;1mCREATE INDEX `index_documents_on_category_id` ON `documents` (`category_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017213332')[0m
Migrating to AddMissingIndexesToTokens (20091017213444)
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW KEYS FROM `tokens`[0m
  [4;35;1mSQL (6.8ms)[0m   [0mCREATE INDEX `index_tokens_on_user_id` ON `tokens` (`user_id`)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213444')[0m
Migrating to AddMissingIndexesToChangesets (20091017213536)
  [4;35;1mSQL (2.5ms)[0m   [0mSHOW KEYS FROM `changesets`[0m
  [4;36;1mSQL (7.8ms)[0m   [0;1mCREATE INDEX `index_changesets_on_user_id` ON `changesets` (`user_id`)[0m
  [4;35;1mSQL (2.8ms)[0m   [0mSHOW KEYS FROM `changesets`[0m
  [4;36;1mSQL (8.1ms)[0m   [0;1mCREATE INDEX `index_changesets_on_repository_id` ON `changesets` (`repository_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017213536')[0m
Migrating to AddMissingIndexesToIssueCategories (20091017213642)
  [4;36;1mSQL (2.5ms)[0m   [0;1mSHOW KEYS FROM `issue_categories`[0m
  [4;35;1mSQL (8.3ms)[0m   [0mCREATE INDEX `index_issue_categories_on_assigned_to_id` ON `issue_categories` (`assigned_to_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213642')[0m
Migrating to AddMissingIndexesToMemberRoles (20091017213716)
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `member_roles`[0m
  [4;36;1mSQL (7.6ms)[0m   [0;1mCREATE INDEX `index_member_roles_on_member_id` ON `member_roles` (`member_id`)[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `member_roles`[0m
  [4;36;1mSQL (6.6ms)[0m   [0;1mCREATE INDEX `index_member_roles_on_role_id` ON `member_roles` (`role_id`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017213716')[0m
Migrating to AddMissingIndexesToBoards (20091017213757)
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `boards`[0m
  [4;35;1mSQL (18.5ms)[0m   [0mCREATE INDEX `index_boards_on_last_message_id` ON `boards` (`last_message_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213757')[0m
Migrating to AddMissingIndexesToUserPreferences (20091017213835)
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW KEYS FROM `user_preferences`[0m
  [4;36;1mSQL (7.2ms)[0m   [0;1mCREATE INDEX `index_user_preferences_on_user_id` ON `user_preferences` (`user_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017213835')[0m
Migrating to AddMissingIndexesToIssues (20091017213910)
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (21.4ms)[0m   [0mCREATE INDEX `index_issues_on_status_id` ON `issues` (`status_id`)[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (8.6ms)[0m   [0mCREATE INDEX `index_issues_on_category_id` ON `issues` (`category_id`)[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (9.9ms)[0m   [0mCREATE INDEX `index_issues_on_assigned_to_id` ON `issues` (`assigned_to_id`)[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (9.5ms)[0m   [0mCREATE INDEX `index_issues_on_fixed_version_id` ON `issues` (`fixed_version_id`)[0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (9.8ms)[0m   [0mCREATE INDEX `index_issues_on_tracker_id` ON `issues` (`tracker_id`)[0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (9.5ms)[0m   [0mCREATE INDEX `index_issues_on_priority_id` ON `issues` (`priority_id`)[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (10.4ms)[0m   [0mCREATE INDEX `index_issues_on_author_id` ON `issues` (`author_id`)[0m
  [4;36;1mSQL (1.1ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017213910')[0m
Migrating to AddMissingIndexesToMembers (20091017214015)
  [4;35;1mSQL (2.1ms)[0m   [0mSHOW KEYS FROM `members`[0m
  [4;36;1mSQL (7.9ms)[0m   [0;1mCREATE INDEX `index_members_on_user_id` ON `members` (`user_id`)[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `members`[0m
  [4;36;1mSQL (7.4ms)[0m   [0;1mCREATE INDEX `index_members_on_project_id` ON `members` (`project_id`)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214015')[0m
Migrating to AddMissingIndexesToCustomFields (20091017214107)
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `custom_fields`[0m
  [4;35;1mSQL (13.1ms)[0m   [0mCREATE INDEX `index_custom_fields_on_id_and_type` ON `custom_fields` (`id`, `type`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017214107')[0m
Migrating to AddMissingIndexesToQueries (20091017214136)
  [4;35;1mSQL (2.1ms)[0m   [0mSHOW KEYS FROM `queries`[0m
  [4;36;1mSQL (7.3ms)[0m   [0;1mCREATE INDEX `index_queries_on_project_id` ON `queries` (`project_id`)[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `queries`[0m
  [4;36;1mSQL (11.2ms)[0m   [0;1mCREATE INDEX `index_queries_on_user_id` ON `queries` (`user_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214136')[0m
Migrating to AddMissingIndexesToTimeEntries (20091017214236)
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW KEYS FROM `time_entries`[0m
  [4;35;1mSQL (8.6ms)[0m   [0mCREATE INDEX `index_time_entries_on_activity_id` ON `time_entries` (`activity_id`)[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mSHOW KEYS FROM `time_entries`[0m
  [4;35;1mSQL (25.0ms)[0m   [0mCREATE INDEX `index_time_entries_on_user_id` ON `time_entries` (`user_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017214236')[0m
Migrating to AddMissingIndexesToNews (20091017214308)
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW KEYS FROM `news`[0m
  [4;36;1mSQL (7.8ms)[0m   [0;1mCREATE INDEX `index_news_on_author_id` ON `news` (`author_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214308')[0m
Migrating to AddMissingIndexesToUsers (20091017214336)
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
  [4;35;1mSQL (24.4ms)[0m   [0mCREATE INDEX `index_users_on_id_and_type` ON `users` (`id`, `type`)[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
  [4;35;1mSQL (8.8ms)[0m   [0mCREATE INDEX `index_users_on_auth_source_id` ON `users` (`auth_source_id`)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017214336')[0m
Migrating to AddMissingIndexesToAttachments (20091017214406)
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `attachments`[0m
  [4;36;1mSQL (9.9ms)[0m   [0;1mCREATE INDEX `index_attachments_on_container_id_and_container_type` ON `attachments` (`container_id`, `container_type`)[0m
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW KEYS FROM `attachments`[0m
  [4;36;1mSQL (25.8ms)[0m   [0;1mCREATE INDEX `index_attachments_on_author_id` ON `attachments` (`author_id`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214406')[0m
Migrating to AddMissingIndexesToWikiContents (20091017214440)
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `wiki_contents`[0m
  [4;35;1mSQL (6.1ms)[0m   [0mCREATE INDEX `index_wiki_contents_on_author_id` ON `wiki_contents` (`author_id`)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017214440')[0m
Migrating to AddMissingIndexesToCustomValues (20091017214519)
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `custom_values`[0m
  [4;36;1mSQL (9.1ms)[0m   [0;1mCREATE INDEX `index_custom_values_on_custom_field_id` ON `custom_values` (`custom_field_id`)[0m
  [4;35;1mSQL (0.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214519')[0m
Migrating to AddMissingIndexesToJournals (20091017214611)
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW KEYS FROM `journals`[0m
  [4;35;1mSQL (9.5ms)[0m   [0mCREATE INDEX `index_journals_on_user_id` ON `journals` (`user_id`)[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW KEYS FROM `journals`[0m
  [4;35;1mSQL (8.8ms)[0m   [0mCREATE INDEX `index_journals_on_journalized_id` ON `journals` (`journalized_id`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017214611')[0m
Migrating to AddMissingIndexesToIssueRelations (20091017214644)
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `issue_relations`[0m
  [4;36;1mSQL (8.5ms)[0m   [0;1mCREATE INDEX `index_issue_relations_on_issue_from_id` ON `issue_relations` (`issue_from_id`)[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `issue_relations`[0m
  [4;36;1mSQL (6.5ms)[0m   [0;1mCREATE INDEX `index_issue_relations_on_issue_to_id` ON `issue_relations` (`issue_to_id`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214644')[0m
Migrating to AddMissingIndexesToWikiRedirects (20091017214720)
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW KEYS FROM `wiki_redirects`[0m
  [4;35;1mSQL (4.4ms)[0m   [0mCREATE INDEX `index_wiki_redirects_on_wiki_id` ON `wiki_redirects` (`wiki_id`)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091017214720')[0m
Migrating to AddMissingIndexesToCustomFieldsTrackers (20091017214750)
  [4;35;1mSQL (1.0ms)[0m   [0mSHOW KEYS FROM `custom_fields_trackers`[0m
  [4;36;1mSQL (4.4ms)[0m   [0;1mCREATE INDEX `index_custom_fields_trackers_on_custom_field_id_and_tracker_id` ON `custom_fields_trackers` (`custom_field_id`, `tracker_id`)[0m
  [4;35;1mSQL (0.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091017214750')[0m
Migrating to AddActivityIndexes (20091025163651)
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW KEYS FROM `journals`[0m
  [4;35;1mSQL (4.3ms)[0m   [0mCREATE INDEX `index_journals_on_created_on` ON `journals` (`created_on`)[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `changesets`[0m
  [4;35;1mSQL (22.0ms)[0m   [0mCREATE INDEX `index_changesets_on_committed_on` ON `changesets` (`committed_on`)[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `wiki_content_versions`[0m
  [4;35;1mSQL (9.2ms)[0m   [0mCREATE INDEX `index_wiki_content_versions_on_updated_on` ON `wiki_content_versions` (`updated_on`)[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW KEYS FROM `messages`[0m
  [4;35;1mSQL (9.6ms)[0m   [0mCREATE INDEX `index_messages_on_created_on` ON `messages` (`created_on`)[0m
  [4;36;1mSQL (5.7ms)[0m   [0;1mSHOW KEYS FROM `issues`[0m
  [4;35;1mSQL (6.1ms)[0m   [0mCREATE INDEX `index_issues_on_created_on` ON `issues` (`created_on`)[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `news`[0m
  [4;35;1mSQL (5.4ms)[0m   [0mCREATE INDEX `index_news_on_created_on` ON `news` (`created_on`)[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `attachments`[0m
  [4;35;1mSQL (5.2ms)[0m   [0mCREATE INDEX `index_attachments_on_created_on` ON `attachments` (`created_on`)[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW KEYS FROM `documents`[0m
  [4;35;1mSQL (5.0ms)[0m   [0mCREATE INDEX `index_documents_on_created_on` ON `documents` (`created_on`)[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `time_entries`[0m
  [4;35;1mSQL (4.3ms)[0m   [0mCREATE INDEX `index_time_entries_on_created_on` ON `time_entries` (`created_on`)[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091025163651')[0m
Migrating to AddVersionsStatus (20091108092559)
  [4;35;1mSQL (5.1ms)[0m   [0mALTER TABLE `versions` ADD `status` varchar(255) DEFAULT 'open'[0m
  [4;36;1mVersion Update (0.4ms)[0m   [0;1mUPDATE `versions` SET status = 'open' [0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091108092559')[0m
Migrating to AddViewIssuesPermission (20091114105931)
  [4;36;1mRole Load (0.9ms)[0m   [0;1mSELECT * FROM `roles` [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mRole Load (0.9ms)[0m   [0;1mSELECT `roles`.id FROM `roles` WHERE (`roles`.`name` = BINARY 'Non member' AND `roles`.id <> 1) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mRole Load (0.7ms)[0m   [0mSELECT `roles`.id FROM `roles` WHERE (`roles`.`name` = BINARY 'Anonymous' AND `roles`.id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091114105931')[0m
Migrating to AddDefaultDoneRatioToIssueStatus (20091123212029)
  [4;36;1mSQL (4.4ms)[0m   [0;1mALTER TABLE `issue_statuses` ADD `default_done_ratio` int(11)[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091123212029')[0m
Migrating to AddVersionsSharing (20091205124427)
  [4;36;1mSQL (8.5ms)[0m   [0;1mALTER TABLE `versions` ADD `sharing` varchar(255) DEFAULT 'none' NOT NULL[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `versions`[0m
  [4;36;1mSQL (4.6ms)[0m   [0;1mCREATE INDEX `index_versions_on_sharing` ON `versions` (`sharing`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091205124427')[0m
Migrating to AddLftAndRgtIndexesToProjects (20091220183509)
  [4;36;1mSQL (1.7ms)[0m   [0;1mSHOW KEYS FROM `projects`[0m
  [4;35;1mSQL (7.8ms)[0m   [0mCREATE INDEX `index_projects_on_lft` ON `projects` (`lft`)[0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mSHOW KEYS FROM `projects`[0m
  [4;35;1mSQL (7.9ms)[0m   [0mCREATE INDEX `index_projects_on_rgt` ON `projects` (`rgt`)[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091220183509')[0m
Migrating to AddIndexToSettingsName (20091220183727)
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW KEYS FROM `settings`[0m
  [4;36;1mSQL (9.5ms)[0m   [0;1mCREATE INDEX `index_settings_on_name` ON `settings` (`name`)[0m
  [4;35;1mSQL (0.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091220183727')[0m
Migrating to AddIndexesToIssueStatus (20091220184736)
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `issue_statuses`[0m
  [4;35;1mSQL (20.6ms)[0m   [0mCREATE INDEX `index_issue_statuses_on_position` ON `issue_statuses` (`position`)[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW KEYS FROM `issue_statuses`[0m
  [4;35;1mSQL (7.1ms)[0m   [0mCREATE INDEX `index_issue_statuses_on_is_closed` ON `issue_statuses` (`is_closed`)[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `issue_statuses`[0m
  [4;35;1mSQL (6.6ms)[0m   [0mCREATE INDEX `index_issue_statuses_on_is_default` ON `issue_statuses` (`is_default`)[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091220184736')[0m
Migrating to RemoveEnumerationsOpt (20091225164732)
  [4;35;1mSQL (8.2ms)[0m   [0mALTER TABLE `enumerations` DROP `opt`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20091225164732')[0m
Migrating to ChangeWikiContentsTextLimit (20091227112908)
  [4;35;1mSQL (3.1ms)[0m   [0mSHOW FIELDS FROM `wiki_contents`[0m
  [4;36;1mSQL (10.3ms)[0m   [0;1mALTER TABLE `wiki_contents` CHANGE `text` `text` text(16777216) DEFAULT NULL[0m
  [4;35;1mSQL (4.7ms)[0m   [0mSHOW FIELDS FROM `wiki_content_versions`[0m
  [4;36;1mSQL (10.1ms)[0m   [0;1mALTER TABLE `wiki_content_versions` CHANGE `data` `data` blob(16777216) DEFAULT NULL[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20091227112908')[0m
Migrating to ChangeUsersMailNotificationToString (20100129193402)
  [4;36;1mSQL (5.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (2.8ms)[0m   [0mSHOW COLUMNS FROM `users` LIKE 'mail_notification'[0m
  [4;36;1mSQL (9.7ms)[0m   [0;1mALTER TABLE `users` CHANGE `mail_notification` `mail_notification_bool` tinyint(1) DEFAULT 1 NOT NULL[0m
  [4;35;1mSQL (11.8ms)[0m   [0mALTER TABLE `users` ADD `mail_notification` varchar(255) DEFAULT '' NOT NULL[0m
  [4;36;1mUser Update (1.4ms)[0m   [0;1mUPDATE `users` SET mail_notification = 'all' WHERE (mail_notification_bool = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Update (1.5ms)[0m   [0mUPDATE `users` SET mail_notification = 'selected' WHERE (EXISTS (SELECT 1 FROM members WHERE members.mail_notification = 1 AND members.user_id = users.id)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Update (0.6ms)[0m   [0;1mUPDATE `users` SET mail_notification = 'only_my_events' WHERE (mail_notification NOT IN ('all', 'selected')) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (10.5ms)[0m   [0mALTER TABLE `users` DROP `mail_notification_bool`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100129193402')[0m
Migrating to UpdateMailNotificationValues (20100129193813)
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100129193813')[0m
Migrating to AddIndexOnChangesetsScmid (20100221100219)
  [4;36;1mSQL (4.1ms)[0m   [0;1mSHOW KEYS FROM `changesets`[0m
  [4;35;1mSQL (9.7ms)[0m   [0mCREATE INDEX `changesets_repos_scmid` ON `changesets` (`repository_id`, `scmid`)[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100221100219')[0m
Migrating to AddIssuesNestedSetsColumns (20100313132032)
  [4;35;1mSQL (16.7ms)[0m   [0mALTER TABLE `issues` ADD `parent_id` int(11) DEFAULT NULL[0m
  [4;36;1mSQL (12.5ms)[0m   [0;1mALTER TABLE `issues` ADD `root_id` int(11) DEFAULT NULL[0m
  [4;35;1mSQL (13.6ms)[0m   [0mALTER TABLE `issues` ADD `lft` int(11) DEFAULT NULL[0m
  [4;36;1mSQL (12.4ms)[0m   [0;1mALTER TABLE `issues` ADD `rgt` int(11) DEFAULT NULL[0m
  [4;35;1mIssue Update (0.6ms)[0m   [0mUPDATE `issues` SET parent_id = NULL, root_id = id, lft = 1, rgt = 2 [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100313132032')[0m
Migrating to AddIndexOnIssuesNestedSet (20100313171051)
  [4;35;1mSQL (4.1ms)[0m   [0mSHOW KEYS FROM `issues`[0m
  [4;36;1mSQL (25.8ms)[0m   [0;1mCREATE INDEX `index_issues_on_root_id_and_lft_and_rgt` ON `issues` (`root_id`, `lft`, `rgt`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100313171051')[0m
Migrating to ChangeChangesPathLengthLimit (20100705164950)
  [4;36;1mSQL (3.3ms)[0m   [0;1mSHOW FIELDS FROM `changes`[0m
  [4;35;1mSQL (8.8ms)[0m   [0mALTER TABLE `changes` CHANGE `path` `path` text DEFAULT NULL[0m
  [4;36;1mSQL (3.4ms)[0m   [0;1mSHOW FIELDS FROM `changes`[0m
  [4;35;1mSQL (7.6ms)[0m   [0mALTER TABLE `changes` CHANGE `path` `path` text NOT NULL[0m
  [4;36;1mSQL (3.4ms)[0m   [0;1mSHOW FIELDS FROM `changes`[0m
  [4;35;1mSQL (8.2ms)[0m   [0mALTER TABLE `changes` CHANGE `from_path` `from_path` text DEFAULT NULL[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100705164950')[0m
Migrating to EnableCalendarAndGanttModulesWhereAppropriate (20100819172912)
  [4;35;1mEnabledModule Load (0.9ms)[0m   [0mSELECT * FROM `enabled_modules` WHERE (name = 'issue_tracking') [0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100819172912')[0m
Migrating to AddUniqueIndexOnMembers (20101104182107)
  [4;35;1mMemberRole Delete all (0.6ms)[0m   [0mDELETE FROM `member_roles` WHERE (member_id NOT IN (SELECT id FROM members)) [0m
  [4;36;1mMemberRole Update (0.4ms)[0m   [0;1mUPDATE `member_roles` SET member_id = (SELECT min(m2.id) FROM members m1, members m2 WHERE m1.user_id = m2.user_id AND m1.project_id = m2.project_id AND m1.id = member_roles.member_id) [0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT m.id FROM members m WHERE m.id > (SELECT min(m1.id) FROM members m1 WHERE m1.user_id = m.user_id AND m1.project_id = m.project_id)[0m
  [4;36;1mSQL (1.5ms)[0m   [0;1mSHOW KEYS FROM `members`[0m
  [4;35;1mSQL (6.0ms)[0m   [0mCREATE UNIQUE INDEX `index_members_on_user_id_and_project_id` ON `members` (`user_id`, `project_id`)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20101104182107')[0m
Migrating to AddCustomFieldsVisible (20101107130441)
  [4;35;1mSQL (8.6ms)[0m   [0mALTER TABLE `custom_fields` ADD `visible` tinyint(1) DEFAULT 1 NOT NULL[0m
  [4;36;1mCustomField Update (0.6ms)[0m   [0;1mUPDATE `custom_fields` SET visible = 1 [0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20101107130441')[0m
Migrating to ChangeProjectsNameLimit (20101114115114)
  [4;36;1mSQL (4.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mSQL (9.0ms)[0m   [0mALTER TABLE `projects` CHANGE `name` `name` varchar(255) DEFAULT '' NOT NULL[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20101114115114')[0m
Migrating to ChangeProjectsIdentifierLimit (20101114115359)
  [4;35;1mSQL (4.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mSQL (8.7ms)[0m   [0;1mALTER TABLE `projects` CHANGE `identifier` `identifier` varchar(255) DEFAULT NULL[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20101114115359')[0m
Migrating to AddWorkflowsAssigneeAndAuthor (20110220160626)
  [4;36;1mSQL (8.9ms)[0m   [0;1mALTER TABLE `workflows` ADD `assignee` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;35;1mSQL (8.5ms)[0m   [0mALTER TABLE `workflows` ADD `author` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;36;1mWorkflow Update (0.8ms)[0m   [0;1mUPDATE `workflows` SET assignee = 0 [0m
  [4;35;1mWorkflow Update (0.3ms)[0m   [0mUPDATE `workflows` SET author = 0 [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110220160626')[0m
Migrating to AddUsersSalt (20110223180944)
  [4;35;1mSQL (10.1ms)[0m   [0mALTER TABLE `users` ADD `salt` varchar(64)[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110223180944')[0m
Migrating to SaltUserPasswords (20110223180953)
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (2.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (users.id >= 0) AND (salt IS NULL OR salt = '') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY users.id ASC LIMIT 1000[0m
  [4;35;1mUser Update (0.8ms)[0m   [0mUPDATE `users` SET salt = '21594cc7ae3beaa0cec3524293e43dd8', hashed_password = 'e5759acb0823d93b1289e882884b6f2aefa42366' WHERE (id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110223180953')[0m
Migrating to AddRepositoriesPathEncoding (20110224000000)
  [4;36;1mSQL (10.4ms)[0m   [0;1mALTER TABLE `repositories` ADD `path_encoding` varchar(64) DEFAULT NULL[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110224000000')[0m
Migrating to ChangeRepositoriesPasswordLimit (20110226120112)
  [4;36;1mSQL (3.2ms)[0m   [0;1mSHOW FIELDS FROM `repositories`[0m
  [4;35;1mSQL (9.4ms)[0m   [0mALTER TABLE `repositories` CHANGE `password` `password` varchar(255) DEFAULT ''[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110226120112')[0m
Migrating to ChangeAuthSourcesAccountPasswordLimit (20110226120132)
  [4;35;1mSQL (4.3ms)[0m   [0mSHOW FIELDS FROM `auth_sources`[0m
  [4;36;1mSQL (7.3ms)[0m   [0;1mALTER TABLE `auth_sources` CHANGE `account_password` `account_password` varchar(255) DEFAULT ''[0m
  [4;35;1mSQL (1.1ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110226120132')[0m
Migrating to ChangeJournalDetailsValuesToText (20110227125750)
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW FIELDS FROM `journal_details`[0m
  [4;35;1mSQL (9.3ms)[0m   [0mALTER TABLE `journal_details` CHANGE `old_value` `old_value` text DEFAULT NULL[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW FIELDS FROM `journal_details`[0m
  [4;35;1mSQL (8.6ms)[0m   [0mALTER TABLE `journal_details` CHANGE `value` `value` text DEFAULT NULL[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110227125750')[0m
Migrating to AddRepositoriesLogEncoding (20110228000000)
  [4;35;1mSQL (8.9ms)[0m   [0mALTER TABLE `repositories` ADD `log_encoding` varchar(64) DEFAULT NULL[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110228000000')[0m
Migrating to CopyRepositoriesLogEncoding (20110228000100)
  [4;35;1mSetting Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSetting Load (1.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_logs_encoding') LIMIT 1[0m
  [4;35;1mRepository Load (1.6ms)[0m   [0mSELECT * FROM `repositories` [0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20110228000100')[0m
Migrating to AddIndexToUsersType (20110401192910)
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW KEYS FROM `users`[0m
  [4;36;1mSQL (38.2ms)[0m   [0;1mCREATE INDEX `index_users_on_type` ON `users` (`type`)[0m
  [4;35;1mSQL (0.6ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110401192910')[0m
Migrating to AddRolesIssuesVisibility (20110408103312)
  [4;36;1mSQL (8.5ms)[0m   [0;1mALTER TABLE `roles` ADD `issues_visibility` varchar(30) DEFAULT 'default' NOT NULL[0m
  [4;35;1mSQL (0.9ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110408103312')[0m
Migrating to AddIssuesIsPrivate (20110412065600)
  [4;36;1mSQL (12.4ms)[0m   [0;1mALTER TABLE `issues` ADD `is_private` tinyint(1) DEFAULT 0 NOT NULL[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110412065600')[0m
Migrating to AddRepositoriesExtraInfo (20110511000000)
  [4;36;1mSQL (8.0ms)[0m   [0;1mALTER TABLE `repositories` ADD `extra_info` text[0m
  [4;35;1mSQL (1.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20110511000000')[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (3.6ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (2.8ms)[0m   [0mSHOW FIELDS FROM `attachments`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `attachments`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW KEYS FROM `attachments`[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW FIELDS FROM `auth_sources`[0m
  [4;35;1mSQL (3.1ms)[0m   [0mdescribe `auth_sources`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW KEYS FROM `auth_sources`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW FIELDS FROM `boards`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mdescribe `boards`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `boards`[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW FIELDS FROM `changes`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mdescribe `changes`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `changes`[0m
  [4;35;1mSQL (3.1ms)[0m   [0mSHOW FIELDS FROM `changesets`[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mdescribe `changesets`[0m
  [4;35;1mSQL (3.2ms)[0m   [0mSHOW KEYS FROM `changesets`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW FIELDS FROM `changesets_issues`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `changesets_issues`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `changesets_issues`[0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW FIELDS FROM `comments`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mdescribe `comments`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW KEYS FROM `comments`[0m
  [4;36;1mSQL (4.2ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mSQL (4.2ms)[0m   [0mdescribe `custom_fields`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `custom_fields`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW FIELDS FROM `custom_fields_projects`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mdescribe `custom_fields_projects`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW KEYS FROM `custom_fields_projects`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields_trackers`[0m
  [4;35;1mSQL (1.7ms)[0m   [0mdescribe `custom_fields_trackers`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mSHOW KEYS FROM `custom_fields_trackers`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mdescribe `custom_values`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW KEYS FROM `custom_values`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW FIELDS FROM `documents`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mdescribe `documents`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `documents`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW FIELDS FROM `enabled_modules`[0m
  [4;36;1mSQL (1.9ms)[0m   [0;1mdescribe `enabled_modules`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW KEYS FROM `enabled_modules`[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW FIELDS FROM `enumerations`[0m
  [4;35;1mSQL (2.8ms)[0m   [0mdescribe `enumerations`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `enumerations`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW FIELDS FROM `groups_users`[0m
  [4;36;1mSQL (1.7ms)[0m   [0;1mdescribe `groups_users`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `groups_users`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW FIELDS FROM `issue_categories`[0m
  [4;35;1mSQL (2.1ms)[0m   [0mdescribe `issue_categories`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `issue_categories`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW FIELDS FROM `issue_relations`[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mdescribe `issue_relations`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `issue_relations`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mdescribe `issue_statuses`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `issue_statuses`[0m
  [4;35;1mSQL (5.4ms)[0m   [0mSHOW FIELDS FROM `issues`[0m
  [4;36;1mSQL (5.3ms)[0m   [0;1mdescribe `issues`[0m
  [4;35;1mSQL (4.3ms)[0m   [0mSHOW KEYS FROM `issues`[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW FIELDS FROM `journal_details`[0m
  [4;35;1mSQL (2.5ms)[0m   [0mdescribe `journal_details`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mSHOW KEYS FROM `journal_details`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW FIELDS FROM `journals`[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mdescribe `journals`[0m
  [4;35;1mSQL (2.8ms)[0m   [0mSHOW KEYS FROM `journals`[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW FIELDS FROM `member_roles`[0m
  [4;35;1mSQL (2.1ms)[0m   [0mdescribe `member_roles`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `member_roles`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mdescribe `members`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mSHOW KEYS FROM `members`[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW FIELDS FROM `messages`[0m
  [4;35;1mSQL (3.5ms)[0m   [0mdescribe `messages`[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mSHOW KEYS FROM `messages`[0m
  [4;35;1mSQL (3.0ms)[0m   [0mSHOW FIELDS FROM `news`[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mdescribe `news`[0m
  [4;35;1mSQL (2.4ms)[0m   [0mSHOW KEYS FROM `news`[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW FIELDS FROM `open_id_authentication_associations`[0m
  [4;35;1mSQL (2.6ms)[0m   [0mdescribe `open_id_authentication_associations`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `open_id_authentication_associations`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW FIELDS FROM `open_id_authentication_nonces`[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mdescribe `open_id_authentication_nonces`[0m
  [4;35;1mSQL (1.8ms)[0m   [0mSHOW KEYS FROM `open_id_authentication_nonces`[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mSQL (3.5ms)[0m   [0mdescribe `projects`[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW KEYS FROM `projects`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW FIELDS FROM `projects_trackers`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mdescribe `projects_trackers`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `projects_trackers`[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mSQL (3.0ms)[0m   [0mdescribe `queries`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW KEYS FROM `queries`[0m
  [4;35;1mSQL (3.3ms)[0m   [0mSHOW FIELDS FROM `repositories`[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mdescribe `repositories`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `repositories`[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mSQL (2.7ms)[0m   [0mdescribe `roles`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `roles`[0m
  [4;35;1mSQL (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mdescribe `settings`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `settings`[0m
  [4;36;1mSQL (3.8ms)[0m   [0;1mSHOW FIELDS FROM `time_entries`[0m
  [4;35;1mSQL (3.6ms)[0m   [0mdescribe `time_entries`[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW KEYS FROM `time_entries`[0m
  [4;35;1mSQL (2.5ms)[0m   [0mSHOW FIELDS FROM `tokens`[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mdescribe `tokens`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `tokens`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW FIELDS FROM `trackers`[0m
  [4;35;1mSQL (2.3ms)[0m   [0mdescribe `trackers`[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `trackers`[0m
  [4;35;1mSQL (2.5ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mdescribe `user_preferences`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW KEYS FROM `user_preferences`[0m
  [4;36;1mSQL (4.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (4.4ms)[0m   [0mdescribe `users`[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW KEYS FROM `users`[0m
  [4;35;1mSQL (3.3ms)[0m   [0mSHOW FIELDS FROM `versions`[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mdescribe `versions`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `versions`[0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mSHOW FIELDS FROM `watchers`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mdescribe `watchers`[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mSHOW KEYS FROM `watchers`[0m
  [4;35;1mSQL (3.2ms)[0m   [0mSHOW FIELDS FROM `wiki_content_versions`[0m
  [4;36;1mSQL (3.0ms)[0m   [0;1mdescribe `wiki_content_versions`[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW KEYS FROM `wiki_content_versions`[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW FIELDS FROM `wiki_contents`[0m
  [4;35;1mSQL (4.8ms)[0m   [0mdescribe `wiki_contents`[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW KEYS FROM `wiki_contents`[0m
  [4;35;1mSQL (3.2ms)[0m   [0mSHOW FIELDS FROM `wiki_pages`[0m
  [4;36;1mSQL (4.3ms)[0m   [0;1mdescribe `wiki_pages`[0m
  [4;35;1mSQL (3.3ms)[0m   [0mSHOW KEYS FROM `wiki_pages`[0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW FIELDS FROM `wiki_redirects`[0m
  [4;35;1mSQL (31.4ms)[0m   [0mdescribe `wiki_redirects`[0m
  [4;36;1mSQL (2.4ms)[0m   [0;1mSHOW KEYS FROM `wiki_redirects`[0m
  [4;35;1mSQL (2.0ms)[0m   [0mSHOW FIELDS FROM `wikis`[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mdescribe `wikis`[0m
  [4;35;1mSQL (1.9ms)[0m   [0mSHOW KEYS FROM `wikis`[0m
  [4;36;1mSQL (3.6ms)[0m   [0;1mSHOW FIELDS FROM `workflows`[0m
  [4;35;1mSQL (3.5ms)[0m   [0mdescribe `workflows`[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mSHOW KEYS FROM `workflows`[0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (2.2ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (4.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (3.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to AddStartDateEndDateIsClosedToProject (1)
  [4;36;1mSQL (3.9ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (48.7ms)[0m   [0mALTER TABLE `projects` ADD `start_pr_date` datetime[0m
  [4;36;1mSQL (7.5ms)[0m   [0;1mALTER TABLE `projects` ADD `end_pr_date` datetime[0m
  [4;35;1mSQL (7.9ms)[0m   [0mALTER TABLE `projects` ADD `is_pr_closed` int(11) DEFAULT 0[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('1-redmine_ababylon2')[0m
Migrating to AddStavkaToUser (2)
  [4;35;1mSQL (9.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (8.7ms)[0m   [0;1mALTER TABLE `users` ADD `stavka` float DEFAULT 0[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('2-redmine_ababylon2')[0m
Migrating to CreateStavkaRights (3)
  [4;36;1mSQL (8.8ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (4.7ms)[0m   [0mCREATE TABLE `stavka_rights` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11) NOT NULL, `stavka_user_id` int(11) NOT NULL, `right` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.2ms)[0m   [0;1mSHOW KEYS FROM `stavka_rights`[0m
  [4;35;1mSQL (4.7ms)[0m   [0mCREATE INDEX `index_stavka_rights_on_user_id` ON `stavka_rights` (`user_id`)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('3-redmine_ababylon2')[0m
Migrating to CreateTableOptions (4)
  [4;35;1mSQL (4.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (4.3ms)[0m   [0;1mCREATE TABLE `table_options` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `user_id` int(11) NOT NULL, `table_name` varchar(255) NOT NULL, `option_name` varchar(255), `option_type` varchar(255), `value` varchar(255), `field_order` int(11)) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('4-redmine_ababylon2')[0m
  [4;36;1mSQL (4.6ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (4.1ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (6.6ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (6.8ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.4ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (3.2ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to AddDefaultProductManagerAndDefaultProjectManagerIdsToProject (1)
  [4;35;1mSQL (3.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (18.2ms)[0m   [0;1mALTER TABLE `projects` ADD `default_product_manager_id` int(11)[0m
  [4;35;1mSQL (18.9ms)[0m   [0mALTER TABLE `projects` ADD `default_project_manager_id` int(11)[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('1-redmine_addons')[0m
Migrating to AddJabberFieldToUsers (2)
  [4;35;1mSQL (3.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (4.7ms)[0m   [0;1mALTER TABLE `users` ADD `jabber` varchar(255)[0m
  [4;35;1mSQL (0.4ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('2-redmine_addons')[0m
Migrating to AddDoneDateToIssues (3)
  [4;36;1mSQL (5.9ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (14.2ms)[0m   [0mALTER TABLE `issues` ADD `done_date` datetime[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('3-redmine_addons')[0m
Migrating to AddAcceptDateToIssues (4)
  [4;35;1mSQL (10.5ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (9.1ms)[0m   [0;1mALTER TABLE `issues` ADD `accept_date` datetime[0m
  [4;35;1mSQL (0.5ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('4-redmine_addons')[0m
Migrating to AddAuditorIdToIssues (5)
  [4;36;1mSQL (3.4ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (7.1ms)[0m   [0mALTER TABLE `issues` ADD `auditor_id` int(11)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('5-redmine_addons')[0m
  [4;35;1mSQL (5.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (7.1ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.5ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateDepartments (1)
  [4;35;1mSQL (3.8ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (5.4ms)[0m   [0;1mCREATE TABLE `departments` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255), `parent_id` int(11), `manager_id` int(11), `created_at` datetime, `updated_at` datetime) ENGINE=InnoDB[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('1-redmine_addons2')[0m
Migrating to AddUserDepartment (2)
  [4;36;1mSQL (6.9ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (9.1ms)[0m   [0mALTER TABLE `users` ADD `department_id` int(11)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('2-redmine_addons2')[0m
  [4;35;1mSQL (6.0ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (4.1ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (7.4ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.2ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (3.9ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
Migrating to CreateChartTimeEntries (20100222185306)
  [4;35;1mSQL (3.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (4.6ms)[0m   [0;1mCREATE TABLE `chart_time_entries` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `day` int(11) NOT NULL, `week` int(11) NOT NULL, `month` int(11) NOT NULL, `logged_hours` float NOT NULL, `entries` int(11) NOT NULL, `user_id` int(11) NOT NULL, `issue_id` int(11), `activity_id` int(11), `project_id` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (4.6ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_day` ON `chart_time_entries` (`day`)[0m
  [4;35;1mSQL (1.7ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (4.4ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_week` ON `chart_time_entries` (`week`)[0m
  [4;35;1mSQL (1.6ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (16.8ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_month` ON `chart_time_entries` (`month`)[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (6.0ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_user_id` ON `chart_time_entries` (`user_id`)[0m
  [4;35;1mSQL (1.4ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (5.2ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_issue_id` ON `chart_time_entries` (`issue_id`)[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (6.5ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_activity_id` ON `chart_time_entries` (`activity_id`)[0m
  [4;35;1mSQL (4.0ms)[0m   [0mSHOW KEYS FROM `chart_time_entries`[0m
  [4;36;1mSQL (8.4ms)[0m   [0;1mCREATE INDEX `index_chart_time_entries_on_project_id` ON `chart_time_entries` (`project_id`)[0m
  [4;35;1mSQL (0.7ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100222185306-redmine_charts')[0m
Migrating to CreateChartDoneRatios (20100222185307)
  [4;36;1mSQL (10.0ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (4.7ms)[0m   [0mCREATE TABLE `chart_done_ratios` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `day` int(11) NOT NULL, `week` int(11) NOT NULL, `month` int(11) NOT NULL, `project_id` int(11) NOT NULL, `issue_id` int(11) NOT NULL, `done_ratio` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW KEYS FROM `chart_done_ratios`[0m
  [4;35;1mSQL (5.2ms)[0m   [0mCREATE INDEX `index_chart_done_ratios_on_day` ON `chart_done_ratios` (`day`)[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mSHOW KEYS FROM `chart_done_ratios`[0m
  [4;35;1mSQL (4.3ms)[0m   [0mCREATE INDEX `index_chart_done_ratios_on_week` ON `chart_done_ratios` (`week`)[0m
  [4;36;1mSQL (2.1ms)[0m   [0;1mSHOW KEYS FROM `chart_done_ratios`[0m
  [4;35;1mSQL (13.4ms)[0m   [0mCREATE INDEX `index_chart_done_ratios_on_month` ON `chart_done_ratios` (`month`)[0m
  [4;36;1mSQL (3.0ms)[0m   [0;1mSHOW KEYS FROM `chart_done_ratios`[0m
  [4;35;1mSQL (31.3ms)[0m   [0mCREATE INDEX `index_chart_done_ratios_on_project_id` ON `chart_done_ratios` (`project_id`)[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mSHOW KEYS FROM `chart_done_ratios`[0m
  [4;35;1mSQL (9.0ms)[0m   [0mCREATE INDEX `index_chart_done_ratios_on_issue_id` ON `chart_done_ratios` (`issue_id`)[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100222185307-redmine_charts')[0m
Migrating to CreateChartIssueStatuses (20100222185308)
  [4;35;1mSQL (13.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (4.4ms)[0m   [0;1mCREATE TABLE `chart_issue_statuses` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `day` int(11) NOT NULL, `week` int(11) NOT NULL, `month` int(11) NOT NULL, `project_id` int(11) NOT NULL, `issue_id` int(11) NOT NULL, `status_id` int(11) NOT NULL) ENGINE=InnoDB[0m
  [4;35;1mSQL (1.2ms)[0m   [0mSHOW KEYS FROM `chart_issue_statuses`[0m
  [4;36;1mSQL (7.0ms)[0m   [0;1mCREATE INDEX `index_chart_issue_statuses_on_day` ON `chart_issue_statuses` (`day`)[0m
  [4;35;1mSQL (2.3ms)[0m   [0mSHOW KEYS FROM `chart_issue_statuses`[0m
  [4;36;1mSQL (8.2ms)[0m   [0;1mCREATE INDEX `index_chart_issue_statuses_on_week` ON `chart_issue_statuses` (`week`)[0m
  [4;35;1mSQL (3.4ms)[0m   [0mSHOW KEYS FROM `chart_issue_statuses`[0m
  [4;36;1mSQL (7.5ms)[0m   [0;1mCREATE INDEX `index_chart_issue_statuses_on_month` ON `chart_issue_statuses` (`month`)[0m
  [4;35;1mSQL (2.1ms)[0m   [0mSHOW KEYS FROM `chart_issue_statuses`[0m
  [4;36;1mSQL (10.4ms)[0m   [0;1mCREATE INDEX `index_chart_issue_statuses_on_project_id` ON `chart_issue_statuses` (`project_id`)[0m
  [4;35;1mSQL (3.1ms)[0m   [0mSHOW KEYS FROM `chart_issue_statuses`[0m
  [4;36;1mSQL (8.7ms)[0m   [0;1mCREATE INDEX `index_chart_issue_statuses_on_issue_id` ON `chart_issue_statuses` (`issue_id`)[0m
  [4;35;1mSQL (0.8ms)[0m   [0mINSERT INTO schema_migrations (version) VALUES ('20100222185308-redmine_charts')[0m
Migrating to CreateChartSavedConditions (20100407184912)
  [4;36;1mSQL (6.9ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (8.4ms)[0m   [0mCREATE TABLE `chart_saved_conditions` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `name` varchar(255) NOT NULL, `project_id` int(11), `conditions` varchar(255) NOT NULL, `chart` varchar(255) NOT NULL) ENGINE=InnoDB[0m
  [4;36;1mSQL (1.6ms)[0m   [0;1mSHOW KEYS FROM `chart_saved_conditions`[0m
  [4;35;1mSQL (4.8ms)[0m   [0mCREATE INDEX `index_chart_saved_conditions_on_project_id` ON `chart_saved_conditions` (`project_id`)[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('20100407184912-redmine_charts')[0m
  [4;35;1mSQL (5.5ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (2.2ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (3.3ms)[0m   [0mSELECT version FROM schema_migrations[0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (3.4ms)[0m   [0mSELECT version FROM schema_migrations[0m
Migrating to CreateMyPageTabs (1)
  [4;36;1mSQL (3.3ms)[0m   [0;1mSELECT version FROM schema_migrations[0m
  [4;35;1mSQL (21.7ms)[0m   [0mCREATE TABLE `my_page_tabs` (`id` int(11) DEFAULT NULL auto_increment PRIMARY KEY, `query_id` int(11), `title` varchar(255), `position` int(11)) ENGINE=InnoDB[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mINSERT INTO schema_migrations (version) VALUES ('1-redmine_tabbed_my_page')[0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (4.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mTracker Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `trackers`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mBEGIN[0m
  [4;35;1mTracker Load (0.8ms)[0m   [0mSELECT `trackers`.id FROM `trackers` WHERE (`trackers`.`name` = BINARY 'idea') LIMIT 1[0m
  [4;36;1mTracker Load (1.1ms)[0m   [0;1mSELECT * FROM `trackers` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mTracker Create (0.5ms)[0m   [0mINSERT INTO `trackers` (`name`, `position`, `is_in_roadmap`, `is_in_chlog`) VALUES('idea', 1, 1, 0)[0m
  [4;36;1mSQL (2.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mTracker Load (0.8ms)[0m   [0;1mSELECT `trackers`.id FROM `trackers` WHERE (`trackers`.`name` = BINARY 'task') LIMIT 1[0m
  [4;35;1mTracker Load (1.2ms)[0m   [0mSELECT * FROM `trackers` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mTracker Create (0.5ms)[0m   [0;1mINSERT INTO `trackers` (`name`, `position`, `is_in_roadmap`, `is_in_chlog`) VALUES('task', 2, 1, 0)[0m
  [4;35;1mSQL (1.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mTracker Load (0.8ms)[0m   [0mSELECT `trackers`.id FROM `trackers` WHERE (`trackers`.`name` = BINARY 'error') LIMIT 1[0m
  [4;36;1mTracker Load (1.0ms)[0m   [0;1mSELECT * FROM `trackers` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mTracker Create (0.5ms)[0m   [0mINSERT INTO `trackers` (`name`, `position`, `is_in_roadmap`, `is_in_chlog`) VALUES('error', 3, 1, 0)[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (4.1ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mIssueStatus Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mIssueStatus Load (0.8ms)[0m   [0;1mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'new') LIMIT 1[0m
  [4;35;1mIssueStatus Load (1.1ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mIssueStatus Create (0.5ms)[0m   [0;1mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('new', 1, 0, NULL, 0)[0m
  [4;35;1mSQL (7.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mIssueStatus Load (0.8ms)[0m   [0mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'analysis') LIMIT 1[0m
  [4;36;1mIssueStatus Load (1.2ms)[0m   [0;1mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mIssueStatus Create (0.5ms)[0m   [0mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('analysis', 2, 0, NULL, 0)[0m
  [4;36;1mSQL (16.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mIssueStatus Load (0.8ms)[0m   [0;1mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'implementation') LIMIT 1[0m
  [4;35;1mIssueStatus Load (1.4ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mIssueStatus Create (0.5ms)[0m   [0;1mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('implementation', 3, 0, NULL, 0)[0m
  [4;35;1mSQL (3.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mIssueStatus Load (0.7ms)[0m   [0mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'in_progress') LIMIT 1[0m
  [4;36;1mIssueStatus Load (1.1ms)[0m   [0;1mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mIssueStatus Create (0.3ms)[0m   [0mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('in_progress', 4, 0, NULL, 0)[0m
  [4;36;1mSQL (1.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mIssueStatus Load (0.8ms)[0m   [0;1mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'audit') LIMIT 1[0m
  [4;35;1mIssueStatus Load (1.2ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mIssueStatus Create (0.6ms)[0m   [0;1mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('audit', 5, 0, NULL, 0)[0m
  [4;35;1mSQL (1.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mIssueStatus Load (0.8ms)[0m   [0mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'install') LIMIT 1[0m
  [4;36;1mIssueStatus Load (1.3ms)[0m   [0;1mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mIssueStatus Create (0.5ms)[0m   [0mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('install', 6, 0, NULL, 0)[0m
  [4;36;1mSQL (1.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mIssueStatus Load (0.9ms)[0m   [0;1mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'testing') LIMIT 1[0m
  [4;35;1mIssueStatus Load (1.2ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mIssueStatus Create (0.5ms)[0m   [0;1mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('testing', 7, 0, NULL, 0)[0m
  [4;35;1mSQL (2.0ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mIssueStatus Load (0.8ms)[0m   [0mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'closed') LIMIT 1[0m
  [4;36;1mIssueStatus Load (1.2ms)[0m   [0;1mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;35;1mIssueStatus Create (0.5ms)[0m   [0mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('closed', 8, 0, NULL, 0)[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mIssueStatus Load (0.8ms)[0m   [0;1mSELECT `issue_statuses`.id FROM `issue_statuses` WHERE (`issue_statuses`.`name` = BINARY 'rejected') LIMIT 1[0m
  [4;35;1mIssueStatus Load (1.3ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (1 = 1) ORDER BY position DESC LIMIT 1[0m
  [4;36;1mIssueStatus Create (0.5ms)[0m   [0;1mINSERT INTO `issue_statuses` (`name`, `position`, `is_default`, `default_done_ratio`, `is_closed`) VALUES('rejected', 9, 0, NULL, 0)[0m
  [4;35;1mSQL (17.4ms)[0m   [0mCOMMIT[0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-23 00:42:00) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (4.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (2.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
WARNING: Can't mass-assign these protected attributes: login
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_notification_option') LIMIT 1[0m
  [4;36;1mAnonymousUser Create (0.6ms)[0m   [0;1mINSERT INTO `users` (`salt`, `created_on`, `stavka`, `hashed_password`, `admin`, `language`, `lastname`, `mail`, `updated_on`, `type`, `firstname`, `mail_notification`, `jabber`, `login`, `status`, `identity_url`, `last_login_on`, `auth_source_id`, `department_id`) VALUES(NULL, '2011-12-23 00:42:00', 0.0, '', 0, '', 'Anonymous', '', '2011-12-23 00:42:00', 'AnonymousUser', '', 'only_my_events', NULL, '', 0, NULL, NULL, NULL, NULL)[0m
  [4;35;1mCustomValue Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (4.1ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (5.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetting Load (1.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Redirected to http://localhost:3000/account/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F
Filter chain halted as [:require_login] rendered_or_redirected.
Completed in 61ms (DB: 27) | 302 Found [http://localhost/]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-23 00:42:01) [GET]
  Parameters: {"back_url"=>"http://localhost:3000/", "action"=>"login", "controller"=>"account"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (5.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
Rendering template within layouts/base
Rendering account/login
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autologin') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'lost_password') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.9ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 2) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 2) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUserPreference Create (0.5ms)[0m   [0mINSERT INTO `user_preferences` (`hide_mail`, `others`, `user_id`, `time_zone`) VALUES(0, '--- {}\n\n', 2, NULL)[0m
  [4;36;1mSQL (20.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'self_registration') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Completed in 561ms (View: 539, DB: 11) | 200 OK [http://localhost/account/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-23 00:42:11) [POST]
  Parameters: {"back_url"=>"http%3A%2F%2Flocalhost%3A3000%2F", "action"=>"login", "authenticity_token"=>"YWp1bQnZ2Xpn4AwnSj8ucqucEEL4iYhzItWct/+lyfA=", "username"=>"admin", "controller"=>"account", "password"=>"[FILTERED]", "login"=>"Login »"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mAnonymousUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Columns (4.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (BINARY login = 'admin') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.7ms)[0m   [0mUPDATE `users` SET `last_login_on` = '2011-12-23 00:42:11', `updated_on` = '2011-12-23 00:42:11' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (1.5ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (3.5ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (18.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 69ms (DB: 43) | 302 Found [http://localhost/account/login]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-23 00:42:11) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mMyPageTab Load (0.8ms)[0m   [0mSELECT * FROM `my_page_tabs` ORDER BY position[0m
Rendering template within layouts/base
Rendering my/page
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mIssueStatus Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mIssueStatus Load (0.8ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (`issue_statuses`.`id` = 4) LIMIT 1[0m
Rendered issues/_issues_js_init (12.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.9ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUserPreference Create (0.5ms)[0m   [0mINSERT INTO `user_preferences` (`hide_mail`, `others`, `user_id`, `time_zone`) VALUES(0, '--- {}\n\n', 1, NULL)[0m
  [4;36;1mSQL (7.0ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 591, DB: 19) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-23 00:42:15) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mRole Load (1.1ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;36;1mTracker Load (0.8ms)[0m   [0;1mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (15.9ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 571ms (View: 530, DB: 18) | 200 OK [http://localhost/admin]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#departments (for 127.0.0.1 at 2011-12-23 00:42:25) [GET]
  Parameters: {"action"=>"departments", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

ActionController::UnknownAction (No action responded to departments. Actions: accept_api_auth?, accept_key_auth_actions, accept_rss_auth?, api_key_from_request, api_offset_and_limit, api_request?, authorize, authorize_global, back_url, check_if_login_required, check_project_privacy, check_project_uniqueness, current_language, current_menu_item, day_name, default_configuration, default_search_scope, default_search_scopes, default_template, delete_broken_cookies, deny_access, filename_for_content_disposition, find_current_user, find_issues, find_language, find_model_object, find_optional_project, find_project, find_project_by_project_id, find_project_from_association, format_date, format_time, index, info, invalid_authenticity_token, l_hours, l_or_humanize, ll, logged_user=, menu_items, month_name, object_errors_to_json, parse_qvalues, per_page_option, pick_layout, plugins, projects, query_statement_invalid, redirect_back_or_default, redirect_to_project_menu_item, render_403, render_404, render_attachment_warning_if_needed, render_error, render_feed, render_validation_errors, require_admin, require_login, set_flash_from_bulk_issue_save, set_language_if_valid, set_localization, sort_clause, sort_clear, sort_header_tag, sort_init, sort_link, sort_name, sort_update, test_email, use_layout, user_setup, and valid_languages):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2011-12-23 00:42:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

LoadError (Expected /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/helpers/departments_helper.rb to define DepartmentsHelper):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:1
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.0ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:48:32) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

NameError (uninitialized constant DepartmentsController::Otdel):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:5:in `index'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (82.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:52:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-23 00:53:15) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mMyPageTab Load (0.6ms)[0m   [0;1mSELECT * FROM `my_page_tabs` ORDER BY position[0m
Rendering template within layouts/base
Rendering my/page
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mIssueStatus Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `issue_statuses`[0m
  [4;36;1mIssueStatus Load (0.7ms)[0m   [0;1mSELECT * FROM `issue_statuses` WHERE (`issue_statuses`.`id` = 4) LIMIT 1[0m
Rendered issues/_issues_js_init (20.6ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mUserPreference Load (1.2ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1081ms (View: 941, DB: 13) | 200 OK [http://localhost/]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:53:24) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1265ms (View: 1232, DB: 14) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#new (for 127.0.0.1 at 2011-12-23 00:53:28) [GET]
  Parameters: {"action"=>"new", "controller"=>"department"}

NameError (uninitialized constant DepartmentController):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.6ms)
Rendered rescues/_request_and_response (1.8ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#new (for 127.0.0.1 at 2011-12-23 00:54:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"department"}

NameError (uninitialized constant DepartmentController):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (24.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:55:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 673ms (View: 628, DB: 21) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#new (for 127.0.0.1 at 2011-12-23 00:55:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"department"}

NameError (uninitialized constant DepartmentController):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (23.9ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:56:40) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.0ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:56:55) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 773ms (View: 742, DB: 14) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 00:56:58) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.5ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 00:58:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 882ms (View: 852, DB: 12) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.5ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 00:58:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.0ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:00:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 666ms (View: 631, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:00:50) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.6ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:02:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:02:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (81.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ApplicationController#index (for 127.0.0.1 at 2011-12-23 01:03:00) [GET]

ActionController::RoutingError (No route matches "/department" with {:method=>:get}):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:03:04) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (84.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:03:58) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:04:13) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.1ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 597ms (View: 565, DB: 14) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:04:18) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.7ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:04:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:04:45) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:05:29) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:05:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 617ms (View: 582, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:05:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.9ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:05:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.4ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:07:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 612ms (View: 574, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:07:57) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.7ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:12:19) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:12:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (82.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:12:41) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 605ms (View: 573, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:12:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.8ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:13:06) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:14:17) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 601ms (View: 568, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:14:21) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.7ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:14:24) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:17:31) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 599ms (View: 565, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:17:33) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.5ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:17:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ProjectsController#index (for 127.0.0.1 at 2011-12-23 01:17:45) [GET]
  Parameters: {"action"=>"index", "controller"=>"projects"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mProject Load (142.5ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status=1) ORDER BY lft[0m
Rendering template within layouts/base
Rendering projects/index
  [4;36;1mToken Load (47.4ms)[0m   [0;1mSELECT * FROM `tokens` WHERE (`tokens`.user_id = 1 AND (action='feeds')) LIMIT 1[0m
  [4;35;1mToken Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `tokens`[0m
  [4;36;1mSQL (9.0ms)[0m   [0;1mBEGIN[0m
  [4;35;1mToken Load (21.7ms)[0m   [0mSELECT `tokens`.id FROM `tokens` WHERE (`tokens`.`value` = BINARY '') LIMIT 1[0m
  [4;36;1mToken Delete all (17.9ms)[0m   [0;1mDELETE FROM `tokens` WHERE (user_id = 1 AND action = 'feeds') [0m
  [4;35;1mToken Create (18.5ms)[0m   [0mINSERT INTO `tokens` (`created_on`, `action`, `user_id`, `value`) VALUES('2011-12-23 01:17:46', 'feeds', 1, 'd5a39697b7c344b016976fd5f3ecbe868fbb12d1')[0m
  [4;36;1mSQL (32.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1104ms (View: 928, DB: 159) | 200 OK [http://localhost/projects]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing ProjectsController#index (for 127.0.0.1 at 2011-12-23 01:17:48) [GET]
  Parameters: {"action"=>"index", "controller"=>"projects"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mProject Load (1.2ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status=1) ORDER BY lft[0m
Rendering template within layouts/base
Rendering projects/index
  [4;36;1mToken Load (13.3ms)[0m   [0;1mSELECT * FROM `tokens` WHERE (`tokens`.user_id = 1 AND (action='feeds')) LIMIT 1[0m
  [4;35;1mToken Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `tokens`[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 608ms (View: 575, DB: 17) | 200 OK [http://localhost/projects]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing ProjectsController#index (for 127.0.0.1 at 2011-12-23 01:17:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"projects"}
  [4;36;1mSetting Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mProject Load (1.0ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status=1) ORDER BY lft[0m
Rendering template within layouts/base
Rendering projects/index
  [4;35;1mToken Load (0.6ms)[0m   [0mSELECT * FROM `tokens` WHERE (`tokens`.user_id = 1 AND (action='feeds')) LIMIT 1[0m
  [4;36;1mToken Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `tokens`[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 625ms (View: 592, DB: 18) | 200 OK [http://localhost/projects]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:18:11) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:20:49) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 612ms (View: 577, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:20:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.0ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:20:56) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:29:17) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:29:30) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 571, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:29:32) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.1ms)
Rendered rescues/_request_and_response (1.1ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:29:34) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:29:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (81.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:41:06) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 568, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:41:10) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.3ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:44:54) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (60.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 637ms (View: 541, DB: 72) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:44:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.9ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:45:01) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:47:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 562ms (View: 528, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:47:18) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.4ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:47:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (28.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:48:56) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 545ms (View: 514, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:48:59) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (31.9ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:49:02) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (30.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:50:48) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 575ms (View: 540, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:50:51) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.3ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:53:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 557ms (View: 518, DB: 20) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:53:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}

ArgumentError (A copy of ApplicationController has been removed from the module tree but is still active!):
  app/controllers/application_controller.rb:58:in `user_setup'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (33.9ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:57:21) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 557ms (View: 522, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:57:24) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 531ms (View: 498, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:57:27) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 526ms (View: 497, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:57:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.7ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 554ms (View: 521, DB: 19) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:57:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (undefined method `departments_path' for #<ActionView::Base:0x48fe2c0>) on line #3 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(@department) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (36.8ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:58:14) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (undefined method `departments_path' for #<ActionView::Base:0x499ed38>) on line #3 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(@department) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (35.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:58:22) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (undefined method `departments_path' for #<ActionView::Base:0x49f0f70>) on line #3 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(@department) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (92.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:59:13) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 521ms (View: 492, DB: 15) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 01:59:39) [POST]
  Parameters: {"commit"=>"Create", "action"=>"new", "authenticity_token"=>"5UdnCEU784/iqekmrv18TPJAMV5ckqZXiHMpLlAr4VM=", "controller"=>"departments", "department"=>{"name"=>"Отдела 1", "parent_id"=>""}}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 547ms (View: 517, DB: 16) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:59:44) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 533ms (View: 502, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:59:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 591ms (View: 559, DB: 18) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 01:59:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 648ms (View: 619, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 02:00:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 589ms (View: 558, DB: 17) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 02:02:00) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (`@/departments/create' is not allowed as an instance variable name) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(url_for(:controller => 'departments', :action => "create"),  :method => "post",  :name => 'create_department_form') do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>
7:     <%= f.label :name %><br />

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 02:02:17) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (`@/departments/create' is not allowed as an instance variable name) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(url_for(:controller => 'departments', :action => "create"),  :method => "post") do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>
7:     <%= f.label :name %><br />

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (36.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 02:03:20) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id) on line #3 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(@departments) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (35.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 02:03:30) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new

ActionView::TemplateError (undefined method `departments_path' for #<ActionView::Base:0x4ee1bd8>) on line #3 of vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:
1: <h1>New department</h1>
2: 
3: <% form_for(@department) do |f| %>
4:   <%= f.error_messages %>
5: 
6:   <p>

    vendor/plugins/redmine_addons2/app/views/departments/new.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (35.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-23 02:03:49) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 537ms (View: 508, DB: 16) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-23 02:04:27) [POST]
  Parameters: {"commit"=>"Create", "action"=>"create", "authenticity_token"=>"5UdnCEU784/iqekmrv18TPJAMV5ckqZXiHMpLlAr4VM=", "controller"=>"departments", "department"=>{"name"=>"Отдел 1", "parent_id"=>""}}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Create (9.9ms)[0m   [0;1mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('Отдел 1', '2011-12-23 02:04:27', '2011-12-23 02:04:27', NULL, NULL)[0m
  [4;35;1mSQL (30.9ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments/1
Completed in 66ms (DB: 49) | 302 Found [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 02:04:28) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (11.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 638ms (View: 589, DB: 32) | 200 OK [http://localhost/departments/1]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 02:04:34) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.7ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (3.1ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 536ms (View: 501, DB: 21) | 200 OK [http://localhost/departments/1]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 02:04:37) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (16.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 576ms (View: 528, DB: 32) | 200 OK [http://localhost/departments/1]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 02:04:41) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 596ms (View: 506, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 02:04:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 635ms (View: 605, DB: 16) | 200 OK [http://localhost/departments/1/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 02:05:01) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 547ms (View: 517, DB: 15) | 200 OK [http://localhost/departments/1]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 02:05:04) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 544ms (View: 514, DB: 16) | 200 OK [http://localhost/departments/1]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-23 22:52:10) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Redirected to http://localhost:3000/account/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F
Filter chain halted as [:require_login] rendered_or_redirected.
Completed in 24ms (DB: 9) | 302 Found [http://localhost/]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-23 22:52:11) [GET]
  Parameters: {"back_url"=>"http://localhost:3000/", "action"=>"login", "controller"=>"account"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (2.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
Rendering template within layouts/base
Rendering account/login
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autologin') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'lost_password') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 2) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'self_registration') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Completed in 888ms (View: 862, DB: 10) | 200 OK [http://localhost/account/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-23 22:52:19) [POST]
  Parameters: {"back_url"=>"http%3A%2F%2Flocalhost%3A3000%2F", "action"=>"login", "authenticity_token"=>"BlDFWUJoMDAeebMBvrm02gOX6A//bf6S6hmI7fwG+XM=", "username"=>"admin", "controller"=>"account", "password"=>"[FILTERED]", "login"=>"Login »"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mAnonymousUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (BINARY login = 'admin') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET `last_login_on` = '2011-12-23 22:52:19', `updated_on` = '2011-12-23 22:52:19' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (1.5ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (2.9ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (87.5ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 137ms (DB: 111) | 302 Found [http://localhost/account/login]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-23 22:52:20) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mMyPageTab Load (0.6ms)[0m   [0mSELECT * FROM `my_page_tabs` ORDER BY position[0m
Rendering template within layouts/base
Rendering my/page
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mIssueStatus Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mIssueStatus Load (0.9ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (`issue_statuses`.`id` = 4) LIMIT 1[0m
Rendered issues/_issues_js_init (49.7ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.1ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 630ms (View: 583, DB: 17) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 22:54:55) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (14.6ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 674ms (View: 621, DB: 19) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-23 22:55:09) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mRole Load (0.8ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;36;1mTracker Load (0.5ms)[0m   [0;1mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (16.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 667ms (View: 609, DB: 18) | 200 OK [http://localhost/admin]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-23 22:55:13) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;36;1mGroup Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;36;1mSQL (63.8ms)[0m   [0;1mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.4ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 762ms (View: 714, DB: 24) | 200 OK [http://localhost/users]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-23 23:12:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.6ms)
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 632ms (View: 524, DB: 24) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:12:41) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 533ms (View: 504, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:13:32) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 582ms (View: 550, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 23:13:36) [GET]
  Parameters: {"action"=>"show", "id"=>"1", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 593, DB: 20) | 200 OK [http://localhost/departments/1]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:13:54) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 610ms (View: 576, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:13:56) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 535ms (View: 504, DB: 16) | 200 OK [http://localhost/departments]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` [0m
  [4;35;1mDepartment Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Create (385.7ms)[0m   [0mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('Отдел2', '2011-12-23 23:15:22', '2011-12-23 23:15:22', NULL, 1)[0m
  [4;36;1mSQL (26.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:15:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 528ms (View: 498, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:16:17) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 535ms (View: 505, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:17:46) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit

ActionView::TemplateError (uninitialized constant ActionView::Base::CompiledTemplates::Page) on line #11 of vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:
8:     <%= f.text_field :name %>
9:   </p>
10:   <p>
11:   	<%= f.collection_select :parent_id, Page.all(:order => "name"), :id, :name, :include_blank => true %>
12:   </p>
13:   <p>
14:     <%= f.label :parent_id %><br />

    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:11
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (37.4ms)
Rendered rescues/_request_and_response (18.9ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:18:05) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (42.2ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 580ms (View: 549, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 23:18:21) [GET]
  Parameters: {"action"=>"show", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 534ms (View: 504, DB: 16) | 200 OK [http://localhost/departments/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 23:18:24) [GET]
  Parameters: {"action"=>"show", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 595ms (View: 562, DB: 18) | 200 OK [http://localhost/departments/2]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:18:31) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 540ms (View: 510, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:18:35) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 535ms (View: 505, DB: 16) | 200 OK [http://localhost/departments/1/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-23 23:28:34) [GET]
  Parameters: {"action"=>"show", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 496, DB: 16) | 200 OK [http://localhost/departments/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:28:38) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (0.0ms)[0m   [0;1mMysql::ServerError::BadFieldError: Unknown column 'name' in 'order clause': SELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY name[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'name' in 'order clause': SELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) )  ORDER BY name) on line #15 of vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:
12:   </p>
13:   <p>
14:     <%= f.label :manage_id %><br />
15:     <%= f.collection_select :manager_id, User.all(:order => "name"), :id, :name, :include_blank => true %>
16:   </p>
17:   <p>
18:     <%= f.submit 'Update' %>

    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:28:50) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (60.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'name' in 'order clause': SELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY name[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'name' in 'order clause': SELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) )  ORDER BY name) on line #15 of vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:
12:   </p>
13:   <p>
14:     <%= f.label :manage_id %><br />
15:     <%= f.collection_select :manager_id, User.all(:order => "name"), :id, :login, :include_blank => true %>
16:   </p>
17:   <p>
18:     <%= f.submit 'Update' %>

    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:28:58) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login[0m
  [4;35;1mAnonymousUser Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 551ms (View: 518, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mUser Columns (5.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (3.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (4.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:29:40) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY firstname[0m
  [4;35;1mAnonymousUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 562ms (View: 531, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:30:29) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY firstname[0m

ActionView::TemplateError (undefined local variable or method `firstname' for #<ActionView::Base:0x54d51c0>) on line #15 of vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:
12:   </p>
13:   <p>
14:     <%= f.label :manage_id %><br />
15:     <%= f.collection_select :manager_id, User.all(:order => "firstname"), :id, "#{firstname} #{lastname}", :include_blank => true %>
16:   </p>
17:   <p>
18:     <%= f.submit 'Update' %>

    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (34.7ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:30:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY firstname[0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m

ActionView::TemplateError (undefined method `firstname lastname' for #<AnonymousUser:0x3405ff8>) on line #15 of vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:
12:   </p>
13:   <p>
14:     <%= f.label :manage_id %><br />
15:     <%= f.collection_select :manager_id, User.all(:order => "firstname"), :id, "#{:firstname} #{:lastname}", :include_blank => true %>
16:   </p>
17:   <p>
18:     <%= f.submit 'Update' %>

    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:3
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (107.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:31:15) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY firstname[0m
  [4;36;1mAnonymousUser Columns (70.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (4.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 557ms (View: 522, DB: 20) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:31:32) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 555ms (View: 521, DB: 19) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:37:36) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 543ms (View: 512, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:37:46) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 554ms (View: 523, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:38:21) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 538ms (View: 508, DB: 16) | 200 OK [http://localhost/departments/2/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:39:50) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m

ArgumentError (syntax error on line 2, col 15: `	label_manager: "Department manager"'):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:133:in `load'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:133:in `load'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:144:in `load_file'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:143:in `open'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:143:in `load_file'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:205:in `load_yml'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:191:in `send'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:191:in `load_file'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `load_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `each'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `load_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/simple.rb:57:in `init_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/simple.rb:40:in `available_locales'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/config.rb:39:in `available_locales'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n.rb:36:in `available_locales'
  app/controllers/application_controller.rb:509:in `default_template'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.8ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:40:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m

ArgumentError (syntax error on line 2, col 15: `	label_manager: "Department manager"'):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:133:in `load'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:133:in `load'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:144:in `load_file'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:143:in `open'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:143:in `load_file'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:205:in `load_yml'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:191:in `send'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:191:in `load_file'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `load_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `each'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `load_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/simple.rb:57:in `init_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/simple.rb:40:in `available_locales'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/config.rb:39:in `available_locales'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n.rb:36:in `available_locales'
  app/controllers/application_controller.rb:509:in `default_template'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.5ms)
Rendered rescues/_request_and_response (0.9ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:40:47) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m

ArgumentError (syntax error on line 2, col 15: `	label_manager: "Department manager"'):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:133:in `load'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:133:in `load'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:144:in `load_file'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:143:in `open'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/yaml.rb:143:in `load_file'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:205:in `load_yml'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:191:in `send'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:191:in `load_file'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `load_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `each'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/base.rb:20:in `load_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/simple.rb:57:in `init_translations'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/backend/simple.rb:40:in `available_locales'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n/config.rb:39:in `available_locales'
  /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/i18n-0.4.2/lib/i18n.rb:36:in `available_locales'
  app/controllers/application_controller.rb:509:in `default_template'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:42:25) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 611ms (View: 575, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-23 23:42:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mRole Load (0.7ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;35;1mTracker Load (0.5ms)[0m   [0mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (15.6ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 612ms (View: 513, DB: 17) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-23 23:43:00) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (4.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 712ms (View: 605, DB: 22) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#1 (for 127.0.0.1 at 2011-12-23 23:43:05) [GET]
  Parameters: {"action"=>"1", "id"=>"edit", "controller"=>"users"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

ActionController::UnknownAction (No action responded to 1. Actions: accept_api_auth?, accept_key_auth_actions, accept_rss_auth?, api_key_from_request, api_offset_and_limit, api_request?, authorize, authorize_global, back_url, check_if_login_required, check_project_privacy, check_project_uniqueness, create, current_language, current_menu_item, custom_field_formats_for_select, custom_field_label_tag, custom_field_tag, custom_field_tag_for_bulk_edit, custom_field_tag_with_label, custom_fields_tabs, day_name, default_search_scope, default_search_scopes, default_template, delete_broken_cookies, deny_access, destroy, destroy_membership, edit, edit_membership, filename_for_content_disposition, find_current_user, find_issues, find_language, find_model_object, find_optional_project, find_project, find_project_by_project_id, find_project_from_association, format_date, format_time, format_value, index, invalid_authenticity_token, l_hours, l_or_humanize, ll, logged_user=, menu_items, month_name, new, object_errors_to_json, parse_qvalues, per_page_option, pick_layout, query_statement_invalid, redirect_back_or_default, redirect_to_project_menu_item, render_403, render_404, render_api_custom_values, render_attachment_warning_if_needed, render_error, render_feed, render_validation_errors, require_admin, require_login, set_flash_from_bulk_issue_save, set_language_if_valid, set_localization, show, show_value, sort_clause, sort_clear, sort_header_tag, sort_init, sort_link, sort_name, sort_update, update, update_with_babylon2, update_without_babylon2, use_layout, user_setup, and valid_languages):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.5ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#1 (for 127.0.0.1 at 2011-12-23 23:43:42) [GET]
  Parameters: {"action"=>"1", "id"=>"edit", "controller"=>"users"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

ActionController::UnknownAction (No action responded to 1. Actions: accept_api_auth?, accept_key_auth_actions, accept_rss_auth?, api_key_from_request, api_offset_and_limit, api_request?, authorize, authorize_global, back_url, check_if_login_required, check_project_privacy, check_project_uniqueness, create, current_language, current_menu_item, custom_field_formats_for_select, custom_field_label_tag, custom_field_tag, custom_field_tag_for_bulk_edit, custom_field_tag_with_label, custom_fields_tabs, day_name, default_search_scope, default_search_scopes, default_template, delete_broken_cookies, deny_access, destroy, destroy_membership, edit, edit_membership, filename_for_content_disposition, find_current_user, find_issues, find_language, find_model_object, find_optional_project, find_project, find_project_by_project_id, find_project_from_association, format_date, format_time, format_value, index, invalid_authenticity_token, l_hours, l_or_humanize, ll, logged_user=, menu_items, month_name, new, object_errors_to_json, parse_qvalues, per_page_option, pick_layout, query_statement_invalid, redirect_back_or_default, redirect_to_project_menu_item, render_403, render_404, render_api_custom_values, render_attachment_warning_if_needed, render_error, render_feed, render_validation_errors, require_admin, require_login, set_flash_from_bulk_issue_save, set_language_if_valid, set_localization, show, show_value, sort_clause, sort_clear, sort_header_tag, sort_init, sort_link, sort_name, sort_update, update, update_with_babylon2, update_without_babylon2, use_layout, user_setup, and valid_languages):
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendering rescues/layout (not_found)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-23 23:45:37) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (1.2ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (1.0ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.6ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (13.4ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (38.0ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (126.9ms)
Rendered users/_preferences (690.6ms)
Rendered users/_form (871.0ms)
Rendered users/_general (907.5ms)
  [4;36;1mRole Load (1.4ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (2.2ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (45.3ms)
Rendered common/_tabs (961.0ms)
Rendered admin/_menu (15.1ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1690ms (View: 1624, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:49:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 653ms (View: 622, DB: 14) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:49:27) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 547ms (View: 516, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-23 23:49:49) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mRole Load (0.5ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;35;1mTracker Load (0.4ms)[0m   [0mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (3.0ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 568ms (View: 526, DB: 16) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-23 23:49:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 654ms (View: 542, DB: 22) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-23 23:49:56) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAuthSource Load (0.8ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
  [4;35;1mMember Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;36;1mGroup Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mStavkaRight Load (0.4ms)[0m   [0mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mProject Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;36;1mProject Load (1.0ms)[0m   [0;1mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (95.3ms)
Rendered users/_preferences (5.8ms)
Rendered users/_form (116.2ms)
Rendered users/_general (122.3ms)
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mProject Load (0.9ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.6ms)
Rendered common/_tabs (127.1ms)
Rendered admin/_menu (3.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 656ms (View: 564, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-23 23:51:15) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 601ms (View: 570, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:51:18) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 611ms (View: 518, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-23 23:51:30) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (4.4ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 626ms (View: 577, DB: 22) | 200 OK [http://localhost/departments/2/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 00:09:33) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 627ms (View: 589, DB: 18) | 200 OK [http://localhost/departments/2/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 00:19:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 617ms (View: 580, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 00:21:20) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 521ms (View: 491, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 00:21:22) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 527ms (View: 498, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:25:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 540ms (View: 511, DB: 15) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-24 00:30:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mRole Load (1.2ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;35;1mTracker Load (0.6ms)[0m   [0mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (76.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 612ms (View: 563, DB: 17) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-24 00:30:40) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 654ms (View: 608, DB: 21) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:34:02) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 604ms (View: 573, DB: 18) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-24 00:34:20) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;36;1mGroup Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.0ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 627ms (View: 582, DB: 20) | 200 OK [http://localhost/users]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:41:33) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 620ms (View: 582, DB: 15) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-24 00:41:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mRole Load (0.8ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;36;1mTracker Load (0.4ms)[0m   [0;1mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (16.3ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 624ms (View: 582, DB: 17) | 200 OK [http://localhost/admin]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SettingsController#index (for 127.0.0.1 at 2011-12-24 00:41:55) [GET]
  Parameters: {"action"=>"index", "controller"=>"settings"}
  [4;35;1mSetting Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/admin
Rendering settings/edit
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'welcome_text') LIMIT 1[0m
  [4;35;1mSetting Load (1.2ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'text_formatting') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'attachment_max_size') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'activity_days_default') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'host_name') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'protocol') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'cache_formatted_text') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'wiki_compression') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'feeds_limit') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'file_max_size_displayed') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'diff_max_lines_displayed') LIMIT 1[0m
Rendered settings/_general (86.2ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_language') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_default') LIMIT 1[0m
Rendered settings/_display (17.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autologin') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'self_registration') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'lost_password') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
Rendered settings/_authentication (9.7ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_projects_public') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_projects_modules') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'sequential_project_identifiers') LIMIT 1[0m
  [4;35;1mRole Load (0.5ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'new_project_user_role_id') LIMIT 1[0m
Rendered settings/_projects (80.3ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'cross_project_issue_relations') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'display_subprojects_issues') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'issue_done_ratio') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'issues_export_limit') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gantt_items_limit') LIMIT 1[0m
  [4;36;1mQuery Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mIssueCustomField Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mIssueCustomField Load (1.2ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE ( (`custom_fields`.`type` = 'IssueCustomField' ) ) [0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'issue_list_default_columns') LIMIT 1[0m
Rendered settings/_issues (46.2ms)
Rendered settings/_notifications (1.4ms)
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_handler_body_delimiters') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_handler_api_enabled') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_handler_api_key') LIMIT 1[0m
Rendered settings/_mail_handler (6.9ms)
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'enabled_scm') LIMIT 1[0m
Shelling out: 'svn' --version
Shelling out: 'darcs' --version
Shelling out: 'hg' --version
Shelling out: 'cvs' --version
Shelling out: 'bzr' --version
Shelling out: 'git' --version --no-color
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autofetch_changesets') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'sys_api_enabled') LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'sys_api_key') LIMIT 1[0m
  [4;35;1mSetting Load (1.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'repositories_encodings') LIMIT 1[0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'repository_log_display_limit') LIMIT 1[0m
  [4;35;1mSetting Load (1.1ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_ref_keywords') LIMIT 1[0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_fix_keywords') LIMIT 1[0m
  [4;35;1mIssueStatus Load (2.3ms)[0m   [0mSELECT * FROM `issue_statuses` [0m
  [4;36;1mIssueStatus Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mSetting Load (1.2ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_fix_status_id') LIMIT 1[0m
  [4;36;1mSetting Load (1.2ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_fix_done_ratio') LIMIT 1[0m
  [4;35;1mSetting Load (1.1ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_logtime_enabled') LIMIT 1[0m
  [4;36;1mTimeEntryActivity Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `enumerations`[0m
  [4;35;1mTimeEntryActivity Load (54.6ms)[0m   [0mSELECT * FROM `enumerations` WHERE (`enumerations`.`project_id` IS NULL) AND ( (`enumerations`.`type` = 'TimeEntryActivity' ) ) ORDER BY enumerations.position ASC[0m
  [4;36;1mSetting Load (1.2ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_logtime_activity_id') LIMIT 1[0m
Rendered settings/_repositories (668.8ms)
Rendered common/_tabs (943.3ms)
Rendered admin/_menu (3.4ms)
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1662ms (View: 1572, DB: 14) | 200 OK [http://localhost/settings]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SettingsController#edit (for 127.0.0.1 at 2011-12-24 00:42:48) [POST]
  Parameters: {"commit"=>"Save", "action"=>"edit", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "settings"=>{"user_format"=>"firstname_lastname", "start_of_week"=>"", "date_format"=>"", "default_language"=>"ru", "gravatar_default"=>"", "gravatar_enabled"=>"0", "time_format"=>"", "ui_theme"=>""}, "controller"=>"settings", "tab"=>"display"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_default') LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetting Load (1.3ms)[0m   [0mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'gravatar_default') LIMIT 1[0m
  [4;36;1mSetting Create (1.0ms)[0m   [0;1mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('gravatar_default', '2011-12-24 00:42:48', '')[0m
  [4;35;1mSQL (1.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_language') LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'default_language') LIMIT 1[0m
  [4;35;1mSetting Create (0.4ms)[0m   [0mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('default_language', '2011-12-24 00:42:48', 'ru')[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'date_format') LIMIT 1[0m
  [4;36;1mSetting Create (0.4ms)[0m   [0;1mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('date_format', '2011-12-24 00:42:48', '')[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Create (0.4ms)[0m   [0mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('start_of_week', '2011-12-24 00:42:48', '')[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'time_format') LIMIT 1[0m
  [4;36;1mSetting Create (0.4ms)[0m   [0;1mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('time_format', '2011-12-24 00:42:48', '')[0m
  [4;35;1mSQL (0.5ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSetting Load (1.2ms)[0m   [0;1mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mSetting Create (0.4ms)[0m   [0mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('gravatar_enabled', '2011-12-24 00:42:48', '0')[0m
  [4;36;1mSQL (25.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'ui_theme') LIMIT 1[0m
  [4;36;1mSetting Create (0.3ms)[0m   [0;1mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('ui_theme', '2011-12-24 00:42:48', '')[0m
  [4;35;1mSQL (0.6ms)[0m   [0mCOMMIT[0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT `settings`.id FROM `settings` WHERE (`settings`.`name` = BINARY 'user_format') LIMIT 1[0m
  [4;35;1mSetting Create (0.4ms)[0m   [0mINSERT INTO `settings` (`name`, `updated_on`, `value`) VALUES('user_format', '2011-12-24 00:42:48', 'firstname_lastname')[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/settings/edit?tab=display
Completed in 466ms (DB: 55) | 302 Found [http://localhost/settings/edit?tab=display]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing SettingsController#edit (for 127.0.0.1 at 2011-12-24 00:42:49) [GET]
  Parameters: {"action"=>"edit", "controller"=>"settings", "tab"=>"display"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (33.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/admin
Rendering settings/edit
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'welcome_text') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'text_formatting') LIMIT 1[0m
  [4;36;1mSetting Load (1.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'attachment_max_size') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'activity_days_default') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'host_name') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'protocol') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'cache_formatted_text') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'wiki_compression') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'feeds_limit') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'file_max_size_displayed') LIMIT 1[0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'diff_max_lines_displayed') LIMIT 1[0m
Rendered settings/_general (26.1ms)
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_language') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_default') LIMIT 1[0m
Rendered settings/_display (18.1ms)
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autologin') LIMIT 1[0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'self_registration') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'lost_password') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
Rendered settings/_authentication (13.3ms)
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_projects_public') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_projects_modules') LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'sequential_project_identifiers') LIMIT 1[0m
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'new_project_user_role_id') LIMIT 1[0m
Rendered settings/_projects (88.4ms)
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'cross_project_issue_relations') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'display_subprojects_issues') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'issue_done_ratio') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'issues_export_limit') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gantt_items_limit') LIMIT 1[0m
  [4;36;1mQuery Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `queries`[0m
  [4;35;1mIssueCustomField Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mIssueCustomField Load (0.9ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE ( (`custom_fields`.`type` = 'IssueCustomField' ) ) [0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'issue_list_default_columns') LIMIT 1[0m
Rendered settings/_issues (32.6ms)
Rendered settings/_notifications (0.2ms)
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_handler_body_delimiters') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_handler_api_enabled') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_handler_api_key') LIMIT 1[0m
Rendered settings/_mail_handler (7.3ms)
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'enabled_scm') LIMIT 1[0m
  [4;36;1mSetting Load (1.2ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autofetch_changesets') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'sys_api_enabled') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'sys_api_key') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'repositories_encodings') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'repository_log_display_limit') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_ref_keywords') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_fix_keywords') LIMIT 1[0m
  [4;35;1mIssueStatus Load (1.1ms)[0m   [0mSELECT * FROM `issue_statuses` [0m
  [4;36;1mIssueStatus Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_fix_status_id') LIMIT 1[0m
  [4;36;1mSetting Load (1.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_fix_done_ratio') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_logtime_enabled') LIMIT 1[0m
  [4;36;1mTimeEntryActivity Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `enumerations`[0m
  [4;35;1mTimeEntryActivity Load (0.6ms)[0m   [0mSELECT * FROM `enumerations` WHERE (`enumerations`.`project_id` IS NULL) AND ( (`enumerations`.`type` = 'TimeEntryActivity' ) ) ORDER BY enumerations.position ASC[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'commit_logtime_activity_id') LIMIT 1[0m
Rendered settings/_repositories (42.8ms)
Rendered common/_tabs (239.3ms)
Rendered admin/_menu (5.4ms)
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 812ms (View: 747, DB: 49) | 200 OK [http://localhost/settings/edit?tab=display]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:42:58) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 542ms (View: 509, DB: 18) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:44:21) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index

ActionView::TemplateError (uninitialized constant ActionView::Base::CompiledTemplates::Departments) on line #14 of vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:
11:   </tr>
12: 	</thead>
13: 	<tbody>
14: <% Departments.root do |department| %>
15:   <tr>
16:     <td><%=h link_to department.name, edit_department_path(department) %></td>
17:     <td><%=h department.parent.name if department.parent %></td>

    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (38.6ms)
Rendered rescues/_request_and_response (1.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:44:28) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (2.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 548ms (View: 520, DB: 15) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:44:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 538ms (View: 507, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:45:40) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 559ms (View: 520, DB: 20) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:50:32) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mDepartment Load (1.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x59f6320>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (109.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:53:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x53c0d20>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:54:55) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x56a5298>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (121.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:56:04) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x545bf28>) on line #3 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:3
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (52.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:56:31) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m

ActionView::TemplateError (undefined method `name' for nil:NilClass) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to @department.name, edit_department_path(@department) %></td>
3:   <td><%=h @department.parent.name if @department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 00:57:08) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 543ms (View: 514, DB: 15) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:04:09) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
Rendered departments/_department_child (0.8ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (2.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 547ms (View: 515, DB: 18) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:04:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x577c270>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if department.children != [] %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (120.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:04:54) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x53aa7a0>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if department %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (53.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:05:44) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x5657b38>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (120.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:07:11) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mSQL (92.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x5473358>) on line #5 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;35;1mSQL (2.8ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (46.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:10:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x5473358>) on line #5 of vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;35;1mSQL (3.7ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (117.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:11:04) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mSQL (2.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x5473358>) on line #5 of vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "layouts/department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;35;1mSQL (3.5ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (46.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:11:06) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mSQL (2.8ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (2.8ms)[0m   [0;1mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x5473358>) on line #5 of vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "layouts/department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (115.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:11:22) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mDepartment Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x4e67568>) on line #5 of vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "layouts/department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (49.7ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:11:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x4e67568>) on line #5 of vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "layouts/department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/layouts/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (45.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:11:59) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mSQL (2.6ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x4e67568>) on line #5 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;36;1mSQL (4.6ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (48.9ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:13:05) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) )  LIMIT 1) on line #18 of vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:
15: 			<tr>
16: 				<td><%=h link_to department.name, edit_department_path(department) %></td>
17: 				<td><%=h department.parent.name if department.parent %></td>
18: 				<td><%=h department.manager.name if department.manager %></td>
19: 			</tr>
20: 
21: 		<% end %>

    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:18
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:15:50) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) )  LIMIT 1) on line #18 of vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:
15: 			<tr>
16: 				<td><%=h link_to department.name, edit_department_path(department) %></td>
17: 				<td><%=h department.parent.name if department.parent %></td>
18: 				<td><%=h department.manager.name if department.manager %></td>
19: 			</tr>
20: 
21: 		<% end %>

    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:18
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:16:10) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mUser Load (0.0ms)[0m   [0;1mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) )  LIMIT 1) on line #18 of vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:
15: 			<tr>
16: 				<td><%=h link_to department.name, edit_department_path(department) %></td>
17: 				<td><%=h department.parent.name if department.parent %></td>
18: 				<td><%=h department.manager.name if department.manager %></td>
19: 			</tr>
20: 
21: 		<% end %>

    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:18
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (110.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:16:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

TypeError (superclass mismatch for class User):
  vendor/plugins/redmine_addons2/app/models/department.rb:6
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:7:in `index'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.4ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:16:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mDepartment Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m

ActionView::TemplateError (uninitialized constant Department::Manager) on line #18 of vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:
15: 			<tr>
16: 				<td><%=h link_to department.name, edit_department_path(department) %></td>
17: 				<td><%=h department.parent.name if department.parent %></td>
18: 				<td><%=h department.manager.name if department.manager %></td>
19: 			</tr>
20: 
21: 		<% end %>

    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:18
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (39.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:18:06) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 539ms (View: 508, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:18:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mSQL (2.9ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (3.1ms)[0m   [0mSHOW TABLES[0m

ActionView::TemplateError (undefined method `order' for #<Class:0x4e0caf0>) on line #5 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children.order('name') if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;36;1mSQL (3.0ms)[0m   [0;1mSHOW TABLES[0m
Rendered rescues/_trace (48.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:18:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x4991480>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (121.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:19:19) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x493fe78>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:20:41) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x4e16b68>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <% render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (122.0ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:21:10) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x49d3858>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (52.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:21:22) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_department_child46html46erb_locals_department_department_child_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5: odd number list for Hash
...ion => { department.children } if !department.children.empty...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_department_child46html46erb_locals_department_department_child_object(local_assigns)
            old_output_buffer = output_buffer;object = local_assigns[:object];department_child = local_assigns[:department_child];department = local_assigns[:department];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<tr>\n\t<td>"
; @output_buffer.concat((h link_to department.name, edit_department_path(department) ).to_s); @output_buffer.concat "</td>\n  <td>"
; @output_buffer.concat((h department.parent.name if department.parent ).to_s); @output_buffer.concat "</td>\n</tr>\n"

; @output_buffer.concat(( render :partial => "department_child", :collection => { department.children } if !department.children.empty? ).to_s); @output_buffer.concat "\n"
; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:9:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47index46html46erb'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47index46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5: odd number list for Hash
...ion => { department.children } if !department.children.empty...
                              ^) on line #5 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => { department.children } if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:9:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:25:56) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x4e0b510>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (120.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:27:33) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) ORDER BY name[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x49781b0>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (52.7ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:27:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x48819a0>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (55.9ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:29:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x47d6078>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children if !department.children.empty? %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:22
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (121.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:29:51) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 555, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 01:29:55) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (61.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 603ms (View: 510, DB: 77) | 200 OK [http://localhost/departments/1/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:37:42) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.5ms)
Rendered departments/_department_child (4.7ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 558ms (View: 520, DB: 20) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:37:46) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (1.9ms)
Rendered departments/_department_child (3.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 539ms (View: 502, DB: 18) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:38:11) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.2ms)
Rendered departments/_department_child (3.9ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 553ms (View: 521, DB: 19) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:39:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x4c71740>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <% department.children.each do |dep| %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (115.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:40:04) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0x47bdd70>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <%= render :partial => "department_child", :collection => department.children %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:41:17) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.2ms)
Rendered departments/_department_child (4.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (2.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 572, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:44:11) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.2ms)
Rendered departments/_department_child (4.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 601ms (View: 562, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:44:19) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.1ms)
Rendered departments/_department_child (4.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 653ms (View: 553, DB: 21) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-24 01:44:23) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 548ms (View: 516, DB: 17) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-24 01:44:38) [POST]
  Parameters: {"commit"=>"Create", "action"=>"create", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "parent_id"=>""}}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Create (0.8ms)[0m   [0mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('третий отдел', '2011-12-24 01:44:38', '2011-12-24 01:44:38', NULL, NULL)[0m
  [4;36;1mSQL (1.8ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments/3
Completed in 88ms (DB: 10) | 302 Found [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-24 01:44:39) [GET]
  Parameters: {"action"=>"show", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 541ms (View: 510, DB: 15) | 200 OK [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:44:45) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.9ms)
Rendered departments/_department_child (4.8ms)
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (1.8ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 566ms (View: 536, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-24 01:44:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 579ms (View: 494, DB: 15) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-24 01:45:02) [POST]
  Parameters: {"commit"=>"Create", "action"=>"create", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "controller"=>"departments", "department"=>{"name"=>"четвертый", "parent_id"=>""}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Create (0.6ms)[0m   [0mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('четвертый', '2011-12-24 01:45:02', '2011-12-24 01:45:02', NULL, NULL)[0m
  [4;36;1mSQL (6.8ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments/4
Completed in 30ms (DB: 15) | 302 Found [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#show (for 127.0.0.1 at 2011-12-24 01:45:02) [GET]
  Parameters: {"action"=>"show", "id"=>"4", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 4) [0m
Rendering template within layouts/base
Rendering departments/show
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 529ms (View: 498, DB: 17) | 200 OK [http://localhost/departments/4]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:45:07) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.3ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
Rendered departments/_department_child (2.6ms)
Rendered departments/_department_child (4.9ms)
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (1.4ms)
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.8ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (4.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 636ms (View: 541, DB: 22) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 01:48:00) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 590ms (View: 558, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 01:48:07) [PUT]
  Parameters: {"commit"=>"Update", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Update (22.2ms)[0m   [0;1mUPDATE `departments` SET `updated_at` = '2011-12-24 01:48:07', `parent_id` = 2 WHERE `id` = 3[0m
  [4;35;1mSQL (2.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 49ms (DB: 33) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 01:48:07) [PUT]
  Parameters: {"commit"=>"Update", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 24ms (DB: 8) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 01:48:24) [PUT]
  Parameters: {"commit"=>"Update", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 24ms (DB: 9) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 01:49:02) [PUT]
  Parameters: {"commit"=>"Update", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 26ms (DB: 8) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:49:02) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.7ms)
Rendered departments/_department_child (5.4ms)
Rendered departments/_department_child (7.2ms)
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.5ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (6.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.1ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 580ms (View: 544, DB: 23) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:50:06) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.0ms)
Rendered departments/_department_child (4.8ms)
Rendered departments/_department_child (6.4ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 621ms (View: 591, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:50:16) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.2ms)
Rendered departments/_department_child (4.6ms)
Rendered departments/_department_child (6.3ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (1.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 626ms (View: 591, DB: 19) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:52:20) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m

ActionView::TemplateError (undefined local variable or method `department_counter' for #<ActionView::Base:0x951c008>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(20*department_counter).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <% department.children.each do |dep| %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (53.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:52:42) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m

ActionView::TemplateError (undefined local variable or method `department_counter' for #<ActionView::Base:0x9806a20>) on line #2 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(20*department_counter).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4: </tr>
5: <% department.children.each do |dep| %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:2
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:5
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (51.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:54:27) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (1.9ms)
Rendered departments/_department_child (4.3ms)
Rendered departments/_department_child (6.5ms)
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 561ms (View: 530, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:54:38) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.1ms)
Rendered departments/_department_child (5.0ms)
Rendered departments/_department_child (7.2ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 569ms (View: 539, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:55:18) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.1ms)
Rendered departments/_department_child (4.4ms)
Rendered departments/_department_child (6.6ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 557ms (View: 528, DB: 15) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-24 01:55:47) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;36;1mGroup Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (50.0ms)
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mMember Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (3.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 742ms (View: 693, DB: 24) | 200 OK [http://localhost/users]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:57:00) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (1.9ms)
Rendered departments/_department_child (4.0ms)
Rendered departments/_department_child (5.5ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)

ActionView::TemplateError (undefined local variable or method `sidebar_queries' for #<ActionView::Base:0x95c0838>) on line #19 of vendor/plugins/redmine_issues_group/app/views/issues/_sidebar.rhtml:
16: <%= call_hook(:view_issues_sidebar_planning_bottom) %>
17: <% end %>
18: 
19: <% unless sidebar_queries.empty? -%>
20: <h3><%= l(:label_query_plural) %></h3>
21: <% sidebar_queries.group_by{|q| q.category || "" }.sort.each do |query_group_name, queries| -%>
22: <% unless query_group_name.empty? %>

    vendor/plugins/redmine_issues_group/app/views/issues/_sidebar.rhtml:19:in `_run_rhtml_vendor47plugins47redmine_issues_group47app47views47issues47_sidebar46rhtml_locals_object_sidebar'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:20
    app/helpers/application_helper.rb:873:in `content_for'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:19
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (121.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:57:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (1.9ms)
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (5.6ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
Rendered hooks/redmine_addons/_view_issues_index_bottom (0.4ms)

ActionView::TemplateError (undefined local variable or method `sidebar_queries' for #<ActionView::Base:0x95167c0>) on line #19 of vendor/plugins/redmine_issues_group/app/views/issues/_sidebar.rhtml:
16: <%= call_hook(:view_issues_sidebar_planning_bottom) %>
17: <% end %>
18: 
19: <% unless sidebar_queries.empty? -%>
20: <h3><%= l(:label_query_plural) %></h3>
21: <% sidebar_queries.group_by{|q| q.category || "" }.sort.each do |query_group_name, queries| -%>
22: <% unless query_group_name.empty? %>

    vendor/plugins/redmine_issues_group/app/views/issues/_sidebar.rhtml:19:in `_run_rhtml_vendor47plugins47redmine_issues_group47app47views47issues47_sidebar46rhtml_locals_object_sidebar'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:21
    app/helpers/application_helper.rb:873:in `content_for'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:20
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (45.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:58:14) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.2ms)
Rendered departments/_department_child (4.2ms)
Rendered departments/_department_child (5.9ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 555ms (View: 522, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 01:58:19) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 616ms (View: 517, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 01:58:30) [PUT]
  Parameters: {"commit"=>"Update", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Update (0.7ms)[0m   [0mUPDATE `departments` SET `updated_at` = '2011-12-24 01:58:30', `manager_id` = 1 WHERE `id` = 3[0m
  [4;36;1mSQL (4.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 29ms (DB: 13) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 01:58:30) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.9ms)
Rendered departments/_department_child (5.8ms)
Rendered departments/_department_child (7.8ms)
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.5ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 572ms (View: 540, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 01:58:35) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 625ms (View: 593, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-24 01:59:30) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (4.8ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (4.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 552, DB: 27) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.5ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-24 01:59:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAuthSource Load (1.9ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;36;1mGroup Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;36;1mCustomField Load (0.9ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mStavkaRight Load (0.6ms)[0m   [0mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (6.5ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mProject Columns (4.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;36;1mProject Load (0.9ms)[0m   [0;1mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (105.5ms)
Rendered users/_preferences (630.4ms)
Rendered users/_form (768.5ms)
Rendered users/_general (778.6ms)
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mProject Load (0.8ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (4.4ms)
Rendered common/_tabs (791.1ms)
Rendered admin/_menu (3.4ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1372ms (View: 1336, DB: 12) | 200 OK [http://localhost/users/1/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:00:01) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 581ms (View: 543, DB: 19) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:00:27) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m

ActionView::TemplateError (undefined local variable or method `f' for #<ActionView::Base:0x93dc4e0>) on line #24 of vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:
21: </div>
22: <% end %>
23:   <p>
24:     <%= f.submit 'Save' %>
25:   </p>
26: 
27: </div>

    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:24
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (34.1ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:00:37) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 664ms (View: 561, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:01:22) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 563ms (View: 534, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 02:01:27) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 24ms (DB: 8) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:01:28) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (2.3ms)
Rendered departments/_department_child (4.5ms)
Rendered departments/_department_child (6.2ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 581ms (View: 550, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:01:31) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 666ms (View: 558, DB: 19) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:01:58) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 564ms (View: 533, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 02:02:02) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"2", "controller"=>"departments", "department"=>{"name"=>"Отдел2", "manager_id"=>"", "parent_id"=>"1"}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 23ms (DB: 8) | 302 Found [http://localhost/departments/2]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:02:02) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (1.9ms)
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (5.7ms)
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 644ms (View: 613, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:02:42) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) )  LIMIT 1) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4:   <td><%=h department.manager.name if department.manager %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (136.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:04:16) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) )  LIMIT 1) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4:   <td><%=h department.manager if department.manager %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (49.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:08:21) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Load (0.0ms)[0m   [0;1mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) )  LIMIT 1) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td><%=h department.parent.name if department.parent %></td>
4:   <td><%=h department.manager if department.manager %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:14
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (49.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:08:38) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.7ms)
Rendered departments/_department_child (9.3ms)
Rendered departments/_department_child (17.5ms)
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (3.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 660ms (View: 614, DB: 21) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:08:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 556, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 02:08:49) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"2", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Update (0.7ms)[0m   [0;1mUPDATE `departments` SET `updated_at` = '2011-12-24 02:08:49', `manager_id` = 2 WHERE `id` = 3[0m
  [4;35;1mSQL (35.8ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 63ms (DB: 45) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:08:49) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (2.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (5.1ms)
Rendered departments/_department_child (12.4ms)
Rendered departments/_department_child (21.0ms)
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (3.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 550ms (View: 518, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:08:53) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (61.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 587ms (View: 498, DB: 76) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 02:08:56) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"2", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 25ms (DB: 9) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:08:57) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.2ms)
Rendered departments/_department_child (6.6ms)
Rendered departments/_department_child (9.4ms)
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.8ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 557ms (View: 527, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:09:27) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.0ms)
Rendered departments/_department_child (6.3ms)
Rendered departments/_department_child (10.6ms)
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 600ms (View: 513, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:09:57) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.2ms)
Rendered departments/_department_child (6.6ms)
Rendered departments/_department_child (10.3ms)
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.3ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 559ms (View: 530, DB: 15) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:10:34) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.1ms)
Rendered departments/_department_child (6.5ms)
Rendered departments/_department_child (10.4ms)
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.3ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 561ms (View: 529, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:11:06) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.1ms)
Rendered departments/_department_child (6.5ms)
Rendered departments/_department_child (9.8ms)
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.2ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 570ms (View: 543, DB: 12) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:11:10) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 550ms (View: 519, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 02:11:15) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Update (0.7ms)[0m   [0;1mUPDATE `departments` SET `updated_at` = '2011-12-24 02:11:15', `manager_id` = 1 WHERE `id` = 3[0m
  [4;35;1mSQL (3.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 88ms (DB: 15) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:11:15) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (1.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (6.6ms)
Rendered departments/_department_child (17.0ms)
Rendered departments/_department_child (20.7ms)
  [4;36;1mUser Load (2.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (6.4ms)
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 570ms (View: 540, DB: 15) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` [0m
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mDepartment Load (1.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mDepartment Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Columns (4.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:18:00) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (4.7ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 552ms (View: 521, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-24 02:18:54) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (376.7ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 535ms (View: 507, DB: 15) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:22:03) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.3ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (10.6ms)
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.3ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 527, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:22:27) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.4ms)
Rendered departments/_department_child (8.1ms)
Rendered departments/_department_child (11.1ms)
  [4;35;1mUser Load (2.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (4.8ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 561ms (View: 531, DB: 15) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:22:39) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.4ms)
Rendered departments/_department_child (7.1ms)
Rendered departments/_department_child (10.2ms)
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (3.5ms)
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 563ms (View: 533, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:23:01) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

TypeError (superclass mismatch for class User):
  vendor/plugins/redmine_addons2/app/models/department.rb:7
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:9:in `index'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.8ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:28:45) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

TypeError (superclass mismatch for class User):
  vendor/plugins/redmine_addons2/app/models/department.rb:11
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:9:in `index'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.4ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:35:20) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (2.7ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m
  [4;36;1mSQL (2.5ms)[0m   [0;1mSHOW TABLES[0m

NameError (undefined local variable or method `base' for #<Class:0x4626a48>):
  vendor/plugins/redmine_addons2/app/models/department.rb:12
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:9:in `index'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

  [4;35;1mSQL (2.7ms)[0m   [0mSHOW TABLES[0m
Rendered rescues/_trace (35.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:35:33) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

TypeError (superclass mismatch for class User):
  vendor/plugins/redmine_addons2/app/models/department.rb:11
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:9:in `index'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (83.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:36:56) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) )  LIMIT 1) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td align=center><%=h department.parent.name if department.parent %></td>
4:   <td align=center><%=h department.manager.login if department.manager %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:16
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (47.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:37:09) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' ) )  LIMIT 1) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td align=center><%=h department.parent.name if department.parent %></td>
4:   <td align=center><%=h department.manager.login if department.manager %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:16
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (48.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:37:25) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.2ms)
Rendered departments/_department_child (6.7ms)
Rendered departments/_department_child (13.9ms)
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 644ms (View: 601, DB: 14) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 02:37:30) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (385.0ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 553ms (View: 518, DB: 17) | 200 OK [http://localhost/departments/3/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (5.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (2.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (2.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:50:19) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.4ms)
Rendered departments/_department_child (6.8ms)
Rendered departments/_department_child (14.0ms)
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.5ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 592ms (View: 560, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (5.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 02:54:18) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (59.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.0ms)
Rendered departments/_department_child (6.3ms)
Rendered departments/_department_child (9.0ms)
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 583ms (View: 496, DB: 74) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (8.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (4.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (2.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (2.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (5.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (5.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (5.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (3.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (5.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 03:03:12) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (375.1ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 587ms (View: 499, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 03:03:16) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 33ms (DB: 11) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:03:17) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.8ms)
Rendered departments/_department_child (7.0ms)
Rendered departments/_department_child (10.1ms)
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (4.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 548ms (View: 513, DB: 21) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:04:12) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.4ms)
Rendered departments/_department_child (5.4ms)
Rendered departments/_department_child (7.6ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 543ms (View: 514, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 03:04:31) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (376.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 544ms (View: 503, DB: 21) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-24 03:04:36) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"oQxrljh7vNFf2VQSWCDYJoIEeOPHOn/StSiS1xX6rRI=", "id"=>"2", "controller"=>"departments", "department"=>{"name"=>"Отдел2", "manager_id"=>"2", "parent_id"=>"1"}}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;35;1mDepartment Update (0.6ms)[0m   [0mUPDATE `departments` SET `updated_at` = '2011-12-24 03:04:36', `manager_id` = 2 WHERE `id` = 2[0m
  [4;36;1mSQL (3.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 90ms (DB: 13) | 302 Found [http://localhost/departments/2]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:04:37) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (58.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (13.1ms)
Rendered departments/_department_child (88.1ms)
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 620ms (View: 588, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:07:10) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.8ms)
Rendered departments/_department_child (7.8ms)
Rendered departments/_department_child (9.3ms)
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 548ms (View: 515, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:07:45) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m

ActionView::TemplateError (undefined method `lastname' for nil:NilClass) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td align=center><%=h department.parent.name if department.parent %></td>
4:   <td align=center><%=h department.manager.lastname if department.manager_id %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:16
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (122.3ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:08:01) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 1) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (70.1ms)
Rendered departments/_department_child (73.9ms)
Rendered departments/_department_child (77.5ms)
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 4) AND ( (`users`.`type` = 'User' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 543ms (View: 513, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:08:26) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mUser Load (0.0ms)[0m   [0mMysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m

ActionView::TemplateError (Mysql::ServerError::BadFieldError: Unknown column 'users.manager_id' in 'where clause': SELECT * FROM `users` WHERE (`users`.manager_id = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) )  LIMIT 1) on line #4 of vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:
1: <tr>
2: 	<td <%= department.parent ? "style='padding-left:#{(10*level).to_s}px;'" : ""  %>><%=h link_to department.name, edit_department_path(department) %></td>
3:   <td align=center><%=h department.parent.name if department.parent %></td>
4:   <td align=center><%=h department.manager.lastname if department.manager %></td>
5: </tr>
6: <% department.children.each do |dep| %>
7: <%= render :partial => "department_child", :locals => { :department => dep, :level => level*2 } %>

    vendor/plugins/redmine_addons2/app/views/departments/_department_child.html.erb:4
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:16
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/index.html.erb:15
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (50.2ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 03:24:37) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (7.2ms)
Rendered departments/_department_child (9.4ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 549ms (View: 517, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-24 03:24:44) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (385.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (2.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 552ms (View: 521, DB: 17) | 200 OK [http://localhost/departments/new]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (14.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.7ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mUser Columns (367.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (15.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` [0m
  [4;35;1mDepartment Columns (348.7ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` [0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-24 20:39:46) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.8ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Redirected to http://localhost:3000/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F
Filter chain halted as [:require_login] rendered_or_redirected.
Completed in 46ms (DB: 9) | 302 Found [http://localhost/]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-24 20:39:47) [GET]
  Parameters: {"back_url"=>"http://localhost:3000/", "action"=>"login", "controller"=>"account"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
Rendering template within layouts/base
Rendering account/login
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autologin') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'lost_password') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 2) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'self_registration') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Completed in 943ms (View: 922, DB: 9) | 200 OK [http://localhost/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-24 20:39:56) [POST]
  Parameters: {"back_url"=>"http%3A%2F%2Flocalhost%3A3000%2F", "action"=>"login", "authenticity_token"=>"EqyUKAu0z0WWNGv1KmSIEyuKgF4w3Dp/96KzFNik+l8=", "username"=>"admin", "controller"=>"account", "password"=>"[FILTERED]", "login"=>"Login »"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mAnonymousUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.0ms)[0m   [0mSELECT * FROM `users` WHERE (BINARY login = 'admin') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET `last_login_on` = '2011-12-24 20:39:56', `updated_on` = '2011-12-24 20:39:56' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (1.5ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (3.2ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (43.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 93ms (DB: 67) | 302 Found [http://localhost/login]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-24 20:39:57) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mMyPageTab Load (1.0ms)[0m   [0mSELECT * FROM `my_page_tabs` ORDER BY position[0m
Rendering template within layouts/base
Rendering my/page
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Load (1.1ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mIssueStatus Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mIssueStatus Load (0.8ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (`issue_statuses`.`id` = 4) LIMIT 1[0m
Rendered issues/_issues_js_init (26.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 619ms (View: 548, DB: 19) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-24 20:40:10) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (6.4ms)
Rendered departments/_department_child (11.5ms)
Rendered departments/_department_child (33.9ms)
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (3.0ms)
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 686ms (View: 650, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 20:40:27) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (372.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 606ms (View: 514, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 20:44:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (435.0ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 593ms (View: 564, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:17:23) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (429.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 595ms (View: 565, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:18:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (447.9ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 607ms (View: 576, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:28:30) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:8: syntax error, unexpected ')', expecting tASSOC
...ank => true, {:size=>'25px'} ).to_s); @output_buffer.concat ...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( l(:label_name) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_parent) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, {:size=>'25px'} ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_manager) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<p>\n\t"



; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:8: syntax error, unexpected ')', expecting tASSOC
...ank => true, {:size=>'25px'} ).to_s); @output_buffer.concat ...
                              ^) on line #8 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
5: </p>
6: <p>
7: 	<%= l(:label_parent) %><br />
8: 	<%= f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, {:size=>'25px'} %>
9: </p>
10: <p>
11: 	<%= l(:label_manager) %><br />

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.1ms)
Rendered rescues/_request_and_response (1.0ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:28:42) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (437.6ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 594ms (View: 568, DB: 13) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:28:49) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (461.6ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 630ms (View: 596, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:29:24) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (369.6ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 558, DB: 13) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:38:52) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (380.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 600ms (View: 512, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:39:35) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (369.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 498, DB: 14) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:42:56) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (381.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 550ms (View: 520, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:45:12) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:8: syntax error, unexpected ')', expecting tASSOC
... "width:200px;", :size=>50 } ).to_s); @output_buffer.concat ...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( l(:label_name) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_parent) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, html_options = { :style => "width:200px;", :size=>50 } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_manager) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<p>\n\t"



; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:8: syntax error, unexpected ')', expecting tASSOC
... "width:200px;", :size=>50 } ).to_s); @output_buffer.concat ...
                              ^) on line #8 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
5: </p>
6: <p>
7: 	<%= l(:label_parent) %><br />
8: 	<%= f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, html_options = { :style => "width:200px;", :size=>50 } %>
9: </p>
10: <p>
11: 	<%= l(:label_manager) %><br />

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.6ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:45:27) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:8: syntax error, unexpected ')', expecting tASSOC
...{ :style => "width:200px;" } ).to_s); @output_buffer.concat ...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( l(:label_name) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_parent) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, html_options = { :style => "width:200px;" } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_manager) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<p>\n\t"



; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:8: syntax error, unexpected ')', expecting tASSOC
...{ :style => "width:200px;" } ).to_s); @output_buffer.concat ...
                              ^) on line #8 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
5: </p>
6: <p>
7: 	<%= l(:label_parent) %><br />
8: 	<%= f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, html_options = { :style => "width:200px;" } %>
9: </p>
10: <p>
11: 	<%= l(:label_manager) %><br />

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.8ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:48:09) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (377.2ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 592ms (View: 510, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-24 21:51:08) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (400.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 565ms (View: 534, DB: 17) | 200 OK [http://localhost/departments/3/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-25 15:14:23) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (40.0ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (2.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Redirected to http://localhost:3000/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F
Filter chain halted as [:require_login] rendered_or_redirected.
Completed in 82ms (DB: 49) | 302 Found [http://localhost/]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-25 15:14:24) [GET]
  Parameters: {"back_url"=>"http://localhost:3000/", "action"=>"login", "controller"=>"account"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mAnonymousUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
Rendering template within layouts/base
Rendering account/login
  [4;35;1mSetting Load (1.2ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'autologin') LIMIT 1[0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'lost_password') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.1ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 2) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (1.1ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'self_registration') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'login_required') LIMIT 1[0m
Completed in 925ms (View: 903, DB: 10) | 200 OK [http://localhost/login?back_url=http%3A%2F%2Flocalhost%3A3000%2F]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AccountController#login (for 127.0.0.1 at 2011-12-25 15:14:31) [POST]
  Parameters: {"back_url"=>"http%3A%2F%2Flocalhost%3A3000%2F", "action"=>"login", "authenticity_token"=>"ylsJLam9W5QY3VicgQDZQLA2bVJP3a3XrSDbW1FQNto=", "username"=>"admin", "controller"=>"account", "password"=>"[FILTERED]", "login"=>"Login »"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'rest_api_enabled') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mAnonymousUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (97.3ms)[0m   [0mSELECT * FROM `users` WHERE (BINARY login = 'admin') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (71.0ms)[0m   [0mUPDATE `users` SET `last_login_on` = '2011-12-25 15:14:31', `updated_on` = '2011-12-25 15:14:31' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (1.3ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (3.4ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (45.8ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/
Completed in 262ms (DB: 235) | 302 Found [http://localhost/login]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing MyController#page (for 127.0.0.1 at 2011-12-25 15:14:32) [GET]
  Parameters: {"action"=>"page", "controller"=>"my"}
  [4;35;1mSetting Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.7ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (3.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mMyPageTab Load (0.7ms)[0m   [0mSELECT * FROM `my_page_tabs` ORDER BY position[0m
Rendering template within layouts/base
Rendering my/page
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'start_of_week') LIMIT 1[0m
  [4;35;1mSetting Load (1.2ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mIssueStatus Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `issue_statuses`[0m
  [4;35;1mIssueStatus Load (1.0ms)[0m   [0mSELECT * FROM `issue_statuses` WHERE (`issue_statuses`.`id` = 4) LIMIT 1[0m
Rendered issues/_issues_js_init (55.0ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mUserPreference Load (1.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 669ms (View: 588, DB: 24) | 200 OK [http://localhost/]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 15:14:40) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (5.0ms)
Rendered departments/_department_child (9.5ms)
Rendered departments/_department_child (20.9ms)
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.6ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 669ms (View: 631, DB: 18) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 15:14:44) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (42.3ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (3.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (434.3ms)
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (5.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (4.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 644ms (View: 607, DB: 23) | 200 OK [http://localhost/departments/3/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (4.4ms)[0m   [0;1mSHOW TABLES[0m
  [4;35;1mUser Columns (4.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (3.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (5.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-25 15:17:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mRole Load (1.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;36;1mTracker Load (0.7ms)[0m   [0;1mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (15.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 701ms (View: 558, DB: 18) | 200 OK [http://localhost/admin]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-25 15:17:57) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;36;1mSQL (0.9ms)[0m   [0;1mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;36;1mGroup Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;36;1mSQL (1.5ms)[0m   [0;1mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 696ms (View: 644, DB: 26) | 200 OK [http://localhost/users]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:18:00) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (1.3ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (1.1ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.9ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (7.4ms)
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (1.6ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (35.5ms)
Rendered users/_preferences (744.7ms)
Rendered users/_form (876.9ms)
Rendered users/_general (893.5ms)
  [4;36;1mRole Load (0.7ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.9ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (37.8ms)
Rendered common/_tabs (939.4ms)
Rendered admin/_menu (3.1ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1517ms (View: 1427, DB: 12) | 200 OK [http://localhost/users/1/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:18:47) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (1.0ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (0.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.4ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (0.9ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (115.1ms)
Rendered users/_preferences (8.1ms)
Rendered users/_form (137.6ms)
Rendered users/_general (142.9ms)
  [4;36;1mRole Load (0.6ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.9ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.9ms)
Rendered common/_tabs (148.2ms)
Rendered admin/_menu (4.1ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 718ms (View: 687, DB: 12) | 200 OK [http://localhost/users/1/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:21:15) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (0.8ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (0.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.5ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (0.9ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (102.5ms)
Rendered users/_preferences (4.7ms)
Rendered users/_form (121.6ms)
Rendered users/_general (127.3ms)
  [4;36;1mRole Load (0.5ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.8ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.3ms)
Rendered common/_tabs (131.9ms)
Rendered admin/_menu (3.7ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 673ms (View: 574, DB: 11) | 200 OK [http://localhost/users/1/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:21:32) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (0.9ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (0.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.5ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (5.8ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (1.0ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (85.3ms)
Rendered users/_preferences (599.6ms)
Rendered users/_form (715.2ms)
Rendered users/_general (724.9ms)
  [4;36;1mRole Load (0.6ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.8ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (4.2ms)
Rendered common/_tabs (737.5ms)
Rendered admin/_menu (14.7ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1374ms (View: 1344, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:21:39) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (1.1ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (2.1ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.9ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (3.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (1.0ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (94.7ms)
Rendered users/_preferences (4.7ms)
Rendered users/_form (120.4ms)
Rendered users/_general (126.0ms)
  [4;36;1mRole Load (0.6ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.8ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.4ms)
Rendered common/_tabs (130.6ms)
Rendered admin/_menu (3.0ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 655ms (View: 624, DB: 13) | 200 OK [http://localhost/users/1/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 15:25:56) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.4ms)
Rendered departments/_department_child (8.6ms)
Rendered departments/_department_child (14.5ms)
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 650ms (View: 613, DB: 18) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 15:25:59) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (389.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (5.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (3.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 570ms (View: 533, DB: 23) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 15:29:11) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (376.0ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 537ms (View: 508, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 15:30:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
Rendered departments/_form (376.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 542ms (View: 511, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-25 15:35:43) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mRole Load (0.7ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;35;1mTracker Load (0.5ms)[0m   [0mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (3.3ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 553ms (View: 511, DB: 16) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-25 15:35:46) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (4.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (2.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.0ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 656ms (View: 540, DB: 27) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:35:56) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAuthSource Load (0.8ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;36;1mGroup Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mStavkaRight Load (0.4ms)[0m   [0mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;36;1mProject Load (1.4ms)[0m   [0;1mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;35;1mUserPreference Load (1.1ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (100.7ms)
Rendered users/_preferences (5.1ms)
Rendered users/_form (119.0ms)
Rendered users/_general (125.3ms)
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mProject Load (0.7ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.4ms)
Rendered common/_tabs (130.2ms)
Rendered admin/_menu (2.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 590ms (View: 560, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 15:51:09) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAuthSource Load (0.9ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;36;1mGroup Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;36;1mCustomField Load (1.0ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mStavkaRight Load (0.4ms)[0m   [0mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mProject Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;36;1mProject Load (1.1ms)[0m   [0;1mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (102.6ms)
Rendered users/_preferences (6.2ms)
Rendered users/_form (123.1ms)
Rendered users/_general (128.9ms)
  [4;35;1mRole Load (0.7ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mProject Load (1.0ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.8ms)
Rendered common/_tabs (134.1ms)
Rendered admin/_menu (3.0ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 692ms (View: 660, DB: 12) | 200 OK [http://localhost/users/1/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 16:11:58) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (10.5ms)
Rendered departments/_department_child (13.4ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 625ms (View: 594, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:12:01) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (4.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m

ActionView::TemplateError (undefined method `order' for #<Array:0xa647878>) on line #18 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
15: 	<%= f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true %>
16: </p>
17: <p>
18: 	<% User.all.order('lastname').each do |user| %>
19: 		<%= user.lastname %>
20: 	<% end %>
21: </p>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:18
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (46.1ms)
Rendered rescues/_request_and_response (9.0ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:12:18) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (454.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 552ms (View: 523, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:14:16) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (453.9ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 555ms (View: 524, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:14:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (392.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 561ms (View: 534, DB: 14) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:15:16) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (378.9ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 551ms (View: 521, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:15:36) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (422.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 595ms (View: 563, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:16:11) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (392.6ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 563ms (View: 533, DB: 14) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:16:50) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (440.7ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 609ms (View: 579, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:16:56) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (388.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 626ms (View: 526, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:04) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (464.6ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 633ms (View: 604, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:12) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (475.2ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 547, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:20) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (732.7ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 909ms (View: 876, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:26) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (3.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (404.8ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 549, DB: 19) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (412.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.8ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 557, DB: 14) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:46) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (390.2ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 563ms (View: 532, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:17:55) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (400.6ms)
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 583ms (View: 553, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:18:05) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (407.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 575ms (View: 546, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-25 16:20:32) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mRole Load (0.6ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;35;1mTracker Load (0.4ms)[0m   [0mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (3.3ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 560ms (View: 519, DB: 16) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-25 16:20:35) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (2.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (2.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 592ms (View: 539, DB: 23) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 16:20:39) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAuthSource Load (0.8ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
  [4;35;1mMember Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;36;1mGroup Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (2.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mStavkaRight Load (0.4ms)[0m   [0mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;36;1mProject Load (1.0ms)[0m   [0;1mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (30.6ms)
Rendered users/_preferences (6.0ms)
Rendered users/_form (130.5ms)
Rendered users/_general (136.9ms)
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mProject Load (0.9ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.8ms)
Rendered common/_tabs (144.2ms)
Rendered admin/_menu (3.6ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 692ms (View: 662, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:20:54) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (499.8ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.8ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 606ms (View: 572, DB: 19) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:33:01) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (397.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 582ms (View: 553, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:33:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:19: syntax error, unexpected ')', expecting tCOLON2 or '[' or '.'
...ude?(role), class:'checkbox' ).to_s); @output_buffer.concat ...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  select#department_parent_id { width: '250px' }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( l(:label_name) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_parent) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, :html_options => { :style => "width:200px;" } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( l(:label_manager) ).to_s); @output_buffer.concat "<br />\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n"

;  User.all.each do |user| ; @output_buffer.concat "\n\t<p>\n\t\t"

; @output_buffer.concat(( check_box_tag 'department[user_id][]', user.id, user.include?(role), class:'checkbox' ).to_s); @output_buffer.concat "\n\t\t"
; @output_buffer.concat(( label_tag :user, user.lastname, :style=>'width:180px;' ).to_s); @output_buffer.concat "\t</p>\n"
;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:29:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:19: syntax error, unexpected ')', expecting tCOLON2 or '[' or '.'
...ude?(role), class:'checkbox' ).to_s); @output_buffer.concat ...
                              ^) on line #19 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
16: </p>
17: <% User.all.each do |user| %>
18: 	<p>
19: 		<%= check_box_tag 'department[user_id][]', user.id, user.include?(role), class:'checkbox' %>
20: 		<%= label_tag :user, user.lastname, :style=>'width:180px;' %>	</p>
21: <% end %>
22: </div>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:29:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.5ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:33:47) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (386.2ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 563ms (View: 534, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:34:15) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (399.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 574ms (View: 544, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:34:35) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (399.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 573ms (View: 542, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:34:44) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (405.4ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 580ms (View: 549, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:35:42) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (7.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 678ms (View: 652, DB: 13) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:36:02) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (7.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 561ms (View: 532, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:36:44) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.8ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 556ms (View: 527, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:37:30) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (7.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 587ms (View: 548, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-25 16:37:36) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mRole Load (1.6ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;35;1mTracker Load (1.4ms)[0m   [0mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (3.0ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 592ms (View: 546, DB: 21) | 200 OK [http://localhost/admin]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-25 16:37:40) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;35;1mGroup Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (2.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 605ms (View: 560, DB: 22) | 200 OK [http://localhost/users]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 16:37:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAuthSource Load (1.0ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;36;1mGroup Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;36;1mCustomField Load (0.9ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mStavkaRight Load (0.4ms)[0m   [0mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (1.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;36;1mProject Load (1.0ms)[0m   [0;1mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (107.2ms)
Rendered users/_preferences (5.1ms)
Rendered users/_form (125.5ms)
Rendered users/_general (131.2ms)
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;36;1mProject Load (0.8ms)[0m   [0;1mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.5ms)
Rendered common/_tabs (135.8ms)
Rendered admin/_menu (3.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 627ms (View: 597, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:38:01) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (2.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (58.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 641ms (View: 609, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:38:58) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (7.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 566ms (View: 537, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:40:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

ActionView::TemplateError (wrong number of arguments (1 for 0)) on line #23 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
20: <% User.all.each do |user| %>
21: 	<p>
22: 		<%= check_box_tag 'department[user_id][]' %>
23: 		<%= label_tag :user, "#{user.lastname user.lastname}" %>
24: 	</p>
25: <% end %>
26: </div>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:23:in `lastname'
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:23
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:20:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:20
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.1ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:40:31) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.6ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 528, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:49:31) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (7.7ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 569ms (View: 538, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:51:13) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:23: syntax error, unexpected tIVAR, expecting ')'
...rtment[user_id][]'	@department.users.include?(user) ).to_s);...
                  	           ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  select#department_parent_id { width: '250px' }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( label_tag("Department name") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Subdivision") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, :html_options => { :style => "width:200px;" } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Department manager") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<h3>Department user list</h3>\n<div class=\"box tabular\">\n"




;  User.all.each do |user| ; @output_buffer.concat "\n\t<p>\n\t\t"

; @output_buffer.concat(( label_tag :user, user.lastname ).to_s); @output_buffer.concat "\n\t\t"
; @output_buffer.concat(( check_box_tag 'department[user_id][]'	@department.users.include?(user) ).to_s); @output_buffer.concat "\n\t</p>\n"

;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:33:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:23: syntax error, unexpected tIVAR, expecting ')'
...rtment[user_id][]'	@department.users.include?(user) ).to_s);...
                  	           ^) on line #23 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
20: <% User.all.each do |user| %>
21: 	<p>
22: 		<%= label_tag :user, user.lastname %>
23: 		<%= check_box_tag 'department[user_id][]'	@department.users.include?(user) %>
24: 	</p>
25: <% end %>
26: </div>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:33:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (120.2ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:51:27) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`id` = 1) AND (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`id` = 2) AND (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
Rendered departments/_form (15.2ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 580ms (View: 550, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 16:51:37) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "user_id"=>["false"], "parent_id"=>"2"}}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 0) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

ActiveRecord::RecordNotFound (Couldn't find User with ID=false):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:33:in `update'
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:32:in `each'
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:32:in `update'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (not_found)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:52:22) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.5ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 560ms (View: 531, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 16:52:43) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "user_id"=>["2"], "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mAnonymousUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mAnonymousUser Update (65.6ms)[0m   [0mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 16:52:43' WHERE `id` = 2[0m
  [4;36;1mCustomValue Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (2.2ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (33.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (58.8ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m

ActiveRecord::UnknownAttributeError (unknown attribute: user_id):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:37:in `update'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (36.0ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 16:54:08) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (8.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 570ms (View: 540, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 16:54:27) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "user_id"=>["2"], "parent_id"=>"2"}}
  [4;35;1mSetting Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (2.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mAnonymousUser Columns (4.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCustomValue Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.1ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.2ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mROLLBACK[0m

ActiveRecord::UnknownAttributeError (unknown attribute: user_id):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:37:in `update'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (32.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:06:21) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 552ms (View: 523, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:14:48) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (7.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (3.1ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 574ms (View: 542, DB: 19) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 17:14:54) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "user_id"=>["2"], "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCustomValue Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.3ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mROLLBACK[0m

ActiveRecord::UnknownAttributeError (unknown attribute: user_id):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:37:in `update'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (33.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:17:49) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.6ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 565ms (View: 534, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m
/!\ FAILSAFE /!\  Sun Dec 25 17:17:53 +0400 2011
  Status: 500 Internal Server Error
  expected Array (got Hash) for param `department'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/utils.rb:84:in `normalize_params'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/utils.rb:61:in `parse_nested_query'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/utils.rb:59:in `each'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/utils.rb:59:in `parse_nested_query'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/request.rb:264:in `parse_query'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/request.rb:153:in `POST'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:15:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
    /home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    script/server:3
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:19:32) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (78.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 638ms (View: 608, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 17:19:37) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["2"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mAnonymousUser Columns (4.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCustomValue Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.0ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 48ms (DB: 19) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 17:19:38) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.2ms)
Rendered departments/_department_child (8.0ms)
Rendered departments/_department_child (9.7ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 576ms (View: 546, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:19:42) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 604ms (View: 575, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mDepartment Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`name` = 'третий отдел') LIMIT 1[0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`name` = 'третий отдел') LIMIT 1[0m
  [4;35;1mUser Columns (5.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (4.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (8.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:21:19) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (6.6ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 583ms (View: 552, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:25:24) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (5.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (3.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (12.5ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 601ms (View: 557, DB: 20) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:26:36) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (12.7ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 585ms (View: 556, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:26:49) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (12.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 618ms (View: 589, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:27:48) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (11.4ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 554, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:29:58) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (10.6ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 551, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 17:30:04) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:32:in `update'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (29.9ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:56:15) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (19.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (85.3ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 709ms (View: 659, DB: 34) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 17:56:27) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m

NoMethodError (You have a nil object when you didn't expect it!
You might have expected an instance of ActiveRecord::Base.
The error occurred while evaluating nil.[]):
  vendor/plugins/redmine_addons2/app/controllers/departments_controller.rb:32:in `update'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
  /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (109.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:56:51) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (11.5ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 575ms (View: 545, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 17:56:54) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 28ms (DB: 10) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 17:56:55) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.4ms)
Rendered departments/_department_child (8.3ms)
Rendered departments/_department_child (10.0ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 596ms (View: 566, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:57:01) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (12.1ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 585ms (View: 554, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 17:57:32) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 27ms (DB: 9) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 17:57:33) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (8.0ms)
Rendered departments/_department_child (9.6ms)
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.6ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 583ms (View: 551, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 17:57:37) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (5.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (17.2ms)
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (3.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 625ms (View: 579, DB: 24) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:00:33) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (4.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (14.9ms)
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (2.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 575, DB: 21) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:00:36) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 31ms (DB: 9) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:00:37) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.7ms)
Rendered departments/_department_child (7.9ms)
Rendered departments/_department_child (10.1ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 658ms (View: 552, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:00:41) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (5.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (15.5ms)
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 595ms (View: 562, DB: 18) | 200 OK [http://localhost/departments/3/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mDepartment Load (1.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
  [4;35;1mDepartment Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `departments`[0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Columns (4.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (3.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (5.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (2.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (1.0ms)[0m   [0;1mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (2)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (2.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:02:55) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendered departments/_form (8.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 555, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:03:36) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["2"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mAnonymousUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mAnonymousUser Update (0.4ms)[0m   [0mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 18:03:36' WHERE `id` = 2[0m
  [4;36;1mCustomValue Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.2ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (187.9ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 233ms (DB: 205) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:03:37) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.2ms)
Rendered departments/_department_child (8.7ms)
Rendered departments/_department_child (10.4ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 657ms (View: 633, DB: 11) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:03:40) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (10.8ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 586, DB: 14) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:03:45) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.2ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 28ms (DB: 8) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:03:46) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (7.9ms)
Rendered departments/_department_child (9.8ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 658ms (View: 634, DB: 11) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:03:50) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (9.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 621ms (View: 596, DB: 11) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:03:59) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.2ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 26ms (DB: 8) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:04:00) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (76.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.2ms)
Rendered departments/_department_child (8.3ms)
Rendered departments/_department_child (10.4ms)
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 653ms (View: 551, DB: 89) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:10:19) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (2.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (17.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 592ms (View: 561, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:11:47) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (108.7ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.5ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.3ms)[0m   [0;1mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 18:11:47' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (0.8ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (1.5ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.1ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (17.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 341ms (DB: 146) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:11:48) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.3ms)
Rendered departments/_department_child (8.8ms)
Rendered departments/_department_child (10.5ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;36;1mSetting Load (96.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 609ms (View: 576, DB: 19) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:11:51) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (12.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 608ms (View: 578, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:11:56) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (16.9ms)[0m   [0;1mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (15.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 156ms (DB: 44) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:11:57) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (3.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (107.8ms)
Rendered departments/_department_child (112.4ms)
Rendered departments/_department_child (114.0ms)
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.6ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 616ms (View: 575, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:12:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (15.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 585, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:12:23) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 32ms (DB: 11) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:12:23) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (100.8ms)
Rendered departments/_department_child (104.7ms)
Rendered departments/_department_child (106.5ms)
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 603ms (View: 572, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:20:30) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mAnonymousUser Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (12.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 612ms (View: 581, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:20:36) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1", "2"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.8ms)[0m   [0;1mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 18:20:36' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (1.3ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.8ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (18.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mAnonymousUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCustomValue Load Including Associations (1.2ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.2ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 87ms (DB: 49) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:20:37) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.6ms)
Rendered departments/_department_child (8.7ms)
Rendered departments/_department_child (10.3ms)
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.6ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 606ms (View: 574, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:20:40) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mAnonymousUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (13.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 629ms (View: 601, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:20:48) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (51.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 86ms (DB: 63) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:20:49) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.5ms)
Rendered departments/_department_child (9.1ms)
Rendered departments/_department_child (10.8ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 696ms (View: 664, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:20:53) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAnonymousUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (14.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 586, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (2.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:24:29) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (436.0ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 633ms (View: 602, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:25:08) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (437.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 640ms (View: 610, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 18:26:34) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (2.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 129ms (DB: 13) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 18:26:35) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (100.9ms)
Rendered departments/_department_child (105.2ms)
Rendered departments/_department_child (107.7ms)
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 613ms (View: 582, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 18:26:40) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (418.6ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 614ms (View: 584, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 19:58:38) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 31ms (DB: 12) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 19:58:39) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (103.8ms)
Rendered departments/_department_child (107.6ms)
Rendered departments/_department_child (109.4ms)
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 617ms (View: 577, DB: 20) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 19:58:42) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (418.2ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 620ms (View: 589, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 19:58:47) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 19:58:47' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.2ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (16.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 72ms (DB: 37) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 19:58:48) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.5ms)
Rendered departments/_department_child (9.0ms)
Rendered departments/_department_child (10.8ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 616ms (View: 584, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 19:58:52) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mAnonymousUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (426.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 633ms (View: 601, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 19:58:57) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (0.6ms)[0m   [0;1mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (3.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 35ms (DB: 15) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 19:58:57) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (3.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.3ms)
Rendered departments/_department_child (8.9ms)
Rendered departments/_department_child (10.6ms)
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.4ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 609ms (View: 574, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 19:59:01) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (424.9ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 630ms (View: 596, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:00:59) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 37ms (DB: 12) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:00:59) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (7.3ms)
Rendered departments/_department_child (8.9ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 720ms (View: 689, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:01:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (418.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (1.1ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 626ms (View: 597, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:05:31) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.2ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 26ms (DB: 8) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:05:32) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (9.1ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 703ms (View: 671, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:05:35) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (421.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 622ms (View: 593, DB: 16) | 200 OK [http://localhost/departments/3/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:06:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`id` = 1) AND (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`id` = 2) AND (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (55.3ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 683ms (View: 644, DB: 21) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:06:08) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["2"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAnonymousUser Columns (4.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCustomValue Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (4.9ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (2.6ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 63ms (DB: 30) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:06:09) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (10.2ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 548ms (View: 516, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:06:12) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (397.0ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 558ms (View: 526, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:06:20) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["2"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mAnonymousUser Columns (4.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCustomValue Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.6ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 2 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 58ms (DB: 25) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:06:21) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (7.5ms)
Rendered departments/_department_child (9.0ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 594ms (View: 561, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:06:24) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (447.1ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 603ms (View: 572, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:06:29) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 28ms (DB: 10) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:06:30) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.7ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (9.0ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 548ms (View: 517, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:06:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (454.7ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 614ms (View: 583, DB: 18) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:06:41) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.7ms)[0m   [0;1mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 20:06:41' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (0.8ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (1.3ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.0ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (3.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 171ms (DB: 24) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:06:42) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.2ms)
Rendered departments/_department_child (8.7ms)
Rendered departments/_department_child (10.3ms)
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 537, DB: 18) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:06:46) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (2.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (406.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 649ms (View: 544, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:06:51) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.7ms)[0m   [0mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (2.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.2ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 41ms (DB: 15) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:06:52) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.8ms)
Rendered departments/_department_child (8.0ms)
Rendered departments/_department_child (9.6ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 564ms (View: 533, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:06:55) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (403.0ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 641ms (View: 541, DB: 16) | 200 OK [http://localhost/departments/3/edit]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:11:11) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`id` = 1) AND (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mAnonymousUser Columns (4.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (0.6ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (`users`.`id` = 2) AND (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (26.1ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 665ms (View: 627, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:11:22) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.2ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 34ms (DB: 14) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:11:23) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (8.2ms)
Rendered departments/_department_child (74.0ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 543ms (View: 513, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:11:26) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (387.0ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 542ms (View: 513, DB: 15) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:11:31) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (111.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.5ms)[0m   [0;1mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 20:11:32' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (2.0ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.1ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (1.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.2ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 225ms (DB: 134) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:11:32) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (9.6ms)
Rendered departments/_department_child (11.2ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 557ms (View: 526, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:11:36) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mAnonymousUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (403.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.8ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 580ms (View: 546, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:11:40) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.7ms)[0m   [0mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (3.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 98ms (DB: 15) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:11:41) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (8.5ms)
Rendered departments/_department_child (10.1ms)
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.7ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 555ms (View: 525, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:11:57) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mAnonymousUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (389.7ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 569ms (View: 539, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (3.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.4ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (0.8ms)[0m   [0;1mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (2)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (1.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:15:55) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
Rendered departments/_form (393.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 560ms (View: 528, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:16:01) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 20:16:01' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (1.0ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.6ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.5ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (14.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.2ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 138ms (DB: 38) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:16:02) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.2ms)
Rendered departments/_department_child (9.2ms)
Rendered departments/_department_child (88.5ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 562ms (View: 531, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:16:05) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (405.1ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 575ms (View: 544, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:16:09) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (0.7ms)[0m   [0;1mUPDATE `users` SET department_id = NULL WHERE (department_id = 3 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (2.8ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.2ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 33ms (DB: 14) | 302 Found [http://localhost/departments/3]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:16:09) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (6.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (3.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (86.8ms)
Rendered departments/_department_child (88.4ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 570ms (View: 527, DB: 23) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:16:13) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
Rendered departments/_form (406.4ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 578ms (View: 547, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:19:31) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:22: syntax error, unexpected '<'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:35: syntax error, unexpected tIDENTIFIER, expecting kEND
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36: syntax error, unexpected $end, expecting kEND
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  select#department_parent_id { width: '250px' }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( label_tag("Department name") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Subdivision") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, :html_options => { :style => "width:200px;" } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Department manager") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<h3>Department user list</h3>\n<div class=\"box tabular\">\n"




;  User.all.each do |user| ; @output_buffer.concat "\n\t"
;  unless user.is_a(AnonymousUser)
	<p>
		<%= label_tag :user, user ; @output_buffer.concat "\n\t\t"
; @output_buffer.concat(( check_box_tag 'department_user[user_id][]', user.id,	@department.users.include?(user) ).to_s); @output_buffer.concat "\n\t\t"
; @output_buffer.concat(( " at the Department of: " + user.department.name if user.department ).to_s); @output_buffer.concat "\n\t</p>\n\t"

;  end ; @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:22: syntax error, unexpected '<'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:35: syntax error, unexpected tIDENTIFIER, expecting kEND
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36: syntax error, unexpected $end, expecting kEND) on line #22 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
19: <div class="box tabular">
20: <% User.all.each do |user| %>
21: 	<% unless user.is_a(AnonymousUser)
22: 	<p>
23: 		<%= label_tag :user, user %>
24: 		<%= check_box_tag 'department_user[user_id][]', user.id,	@department.users.include?(user) %>
25: 		<%= " at the Department of: " + user.department.name if user.department %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.8ms)
Rendered rescues/_request_and_response (16.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:19:50) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m

ActionView::TemplateError (undefined method `is_a' for #<User:0xa849978>) on line #21 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
18: <h3>Department user list</h3>
19: <div class="box tabular">
20: <% User.all.each do |user| %>
21: 	<% unless user.is_a(AnonymousUser) %>
22: 	<p>
23: 		<%= label_tag :user, user %>
24: 		<%= check_box_tag 'department_user[user_id][]', user.id,	@department.users.include?(user) %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:21
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:20:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:20
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:7
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (44.3ms)
Rendered rescues/_request_and_response (0.2ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:24:21) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
Rendered departments/_form (8.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 620ms (View: 526, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-25 20:24:38) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mRole Load (0.8ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;36;1mTracker Load (0.4ms)[0m   [0;1mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (16.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (5.7ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 726ms (View: 591, DB: 19) | 200 OK [http://localhost/admin]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-25 20:24:42) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;36;1mGroup Columns (2.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;36;1mSQL (118.7ms)[0m   [0;1mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1095ms (View: 774, DB: 24) | 200 OK [http://localhost/users]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#new (for 127.0.0.1 at 2011-12-25 20:24:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_language') LIMIT 1[0m
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_notification_option') LIMIT 1[0m
  [4;36;1mAuthSource Load (1.5ms)[0m   [0;1mSELECT * FROM `auth_sources` [0m
Rendering template within layouts/admin
Rendering users/new
  [4;35;1mCustomField Load (0.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
Rendered hooks/users/_user_formhook (1.1ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (8.5ms)
Rendered users/_preferences (728.4ms)
Rendered users/_form (762.1ms)
Rendered admin/_menu (4.8ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 1472ms (View: 1399, DB: 19) | 200 OK [http://localhost/users/new]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#create (for 127.0.0.1 at 2011-12-25 20:25:20) [POST]
  Parameters: {"send_information"=>"1", "commit"=>"Create", "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "pref"=>{"hide_mail"=>"0", "warn_on_leaving_unsaved"=>"1", "comments_sorting"=>"asc", "time_zone"=>""}, "controller"=>"users", "user"=>{"password_confirmation"=>"[FILTERED]", "admin"=>"0", "language"=>"ru", "mail"=>"igel.yulian@mail.ru", "lastname"=>"fam", "firstname"=>"name", "mail_notification"=>"only_my_events", "jabber"=>"", "password"=>"[FILTERED]", "login"=>"user1"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_language') LIMIT 1[0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'default_notification_option') LIMIT 1[0m
WARNING: Can't mass-assign these protected attributes: login
  [4;35;1mUserPreference Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCustomField Load (1.1ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.7ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru') AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;35;1mUser Create (87.2ms)[0m   [0mINSERT INTO `users` (`salt`, `created_on`, `stavka`, `hashed_password`, `admin`, `language`, `lastname`, `mail`, `updated_on`, `type`, `firstname`, `mail_notification`, `jabber`, `login`, `status`, `identity_url`, `last_login_on`, `auth_source_id`, `department_id`) VALUES('4b40e60172a13272adae668afcf452a5', '2011-12-25 20:25:20', 0.0, '16e4fc365de496d8c2a5b12c7ec995eb37d02d26', 0, 'ru', 'fam', 'igel.yulian@mail.ru', '2011-12-25 20:25:20', 'User', 'name', 'only_my_events', '', 'user1', 1, NULL, NULL, NULL, NULL)[0m
  [4;36;1mUserPreference Create (0.5ms)[0m   [0;1mINSERT INTO `user_preferences` (`hide_mail`, `others`, `user_id`, `time_zone`) VALUES(0, '--- \n:warn_on_leaving_unsaved: \"1\"\n:no_self_notified: false\n:comments_sorting: asc\n', 3, '')[0m
  [4;35;1mCustomValue Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.8ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (15.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mUserPreference Update (0.6ms)[0m   [0;1mUPDATE `user_preferences` SET `others` = '--- \n:warn_on_leaving_unsaved: \"1\"\n:no_self_notified: false\n:comments_sorting: asc\n' WHERE `id` = 3[0m
  [4;35;1mSQL (0.4ms)[0m   [0mCOMMIT[0m
  [4;36;1mMember Update (0.4ms)[0m   [0;1mUPDATE `members` SET mail_notification = 0 WHERE (user_id = 3) [0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 3 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'mail_from') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'host_name') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'protocol') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'plain_text_mail') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'emails_header') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'emails_footer') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'text_formatting') LIMIT 1[0m
  [4;35;1mSetting Load (1.1ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'cache_formatted_text') LIMIT 1[0m
  [4;36;1mUserPreference Load (1.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
Sending email notification to: igel.yulian@mail.ru
  [4;35;1mSetting Load (1.2ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'bcc_recipients') LIMIT 1[0m
Sent mail to 

Date: Sun, 25 Dec 2011 20:25:20 +0400
From: redmine@example.net
Bcc: igel.yulian@mail.ru
Subject: =?utf-8?Q?=D0=90=D0=BA=D1=82=D0=B8=D0=B2=D0=B0=D1=86=D0=B8=D1=8F_=D1=83=D1=87=D0=B5=D1=82=D0=BD=D0=BE=D0=B9_=D0=B7=D0=B0=D0=BF=D0=B8=D1=81=D0=B8_Redmine?=
Mime-Version: 1.0
Content-Type: multipart/alternative; boundary=mimepart_4ef74e71a1106_164454507901f1
Precedence: bulk
X-Mailer: Redmine
Auto-Submitted: auto-generated
X-Redmine-Site: Redmine
X-Redmine-Host: localhost:3000


--mimepart_4ef74e71a1106_164454507901f1
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: Quoted-printable
Content-Disposition: inline


=D0=98=D0=BD=D1=84=D0=BE=D1=80=D0=BC=D0=B0=D1=86=D0=B8=D1=8F =D0=BE =D0=92=
=D0=B0=D1=88=D0=B5=D0=B9 =D1=83=D1=87=D0=B5=D1=82=D0=BD=D0=BE=D0=B9 =D0=B7=
=D0=B0=D0=BF=D0=B8=D1=81=D0=B8:
* =D0=9F=D0=BE=D0=BB=D1=8C=D0=B7=D0=BE=D0=B2=D0=B0=D1=82=D0=B5=D0=BB=D1=8C=
: user1
* =D0=9F=D0=B0=D1=80=D0=BE=D0=BB=D1=8C: 1234

=D0=92=D0=BE=D0=B9=D1=82=D0=B8: http://localhost:3000/login

-- =

You have received this notification because you have either subscribed to=
 it, or are involved in it.
To change your notification preferences, please click here: http://hostna=
me/my/account

--mimepart_4ef74e71a1106_164454507901f1
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: Quoted-printable
Content-Disposition: inline

<html>
<head>
<style>
body {
  font-family: Verdana, sans-serif;
  font-size: 0.8em;
  color:#484848;
}
h1, h2, h3 { font-family: "Trebuchet MS", Verdana, sans-serif; margin: 0p=
x; }
h1 { font-size: 1.2em; }
h2, h3 { font-size: 1.1em; }
a, a:link, a:visited { color: #2A5685;}
a:hover, a:active { color: #c61a1a; }
a.wiki-anchor { display: none; }
hr {
  width: 100%;
  height: 1px;
  background: #ccc;
  border: 0;
}
.footer {
  font-size: 0.8em;
  font-style: italic;
}
</style>
</head>
<body>
<span class=3D"header"></span>

<p>=D0=98=D0=BD=D1=84=D0=BE=D1=80=D0=BC=D0=B0=D1=86=D0=B8=D1=8F =D0=BE =D0=
=92=D0=B0=D1=88=D0=B5=D0=B9 =D1=83=D1=87=D0=B5=D1=82=D0=BD=D0=BE=D0=B9 =D0=
=B7=D0=B0=D0=BF=D0=B8=D1=81=D0=B8:</p>
<ul>
    <li>=D0=9F=D0=BE=D0=BB=D1=8C=D0=B7=D0=BE=D0=B2=D0=B0=D1=82=D0=B5=D0=BB=
=D1=8C: user1</li>
    <li>=D0=9F=D0=B0=D1=80=D0=BE=D0=BB=D1=8C: 1234</li>
</ul>


<p>=D0=92=D0=BE=D0=B9=D1=82=D0=B8: <a href=3D"http://localhost:3000/login=
">http://localhost:3000/login</a></p>

<hr />
<span class=3D"footer"><p>You have received this notification because you=
 have either subscribed to it, or are involved in it.<br />To change your=
 notification preferences, please click here: <a class=3D"external" href=3D=
"http://hostname/my/account">http://hostname/my/account</a></p></span>
</body>
</html>

--mimepart_4ef74e71a1106_164454507901f1--
Redirected to http://localhost:3000/users/3/edit
Completed in 1270ms (DB: 142) | 302 Found [http://localhost/users]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 20:25:22) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (1.2ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (0.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (1.0ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=3 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (5.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 3 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (1.1ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 3) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.9ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 3) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (28.6ms)
Rendered users/_preferences (5.1ms)
Rendered users/_form (50.9ms)
Rendered users/_general (75.6ms)
  [4;36;1mRole Load (0.8ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.8ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (20.9ms)
Rendered common/_tabs (145.7ms)
Rendered admin/_menu (3.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 848ms (View: 810, DB: 15) | 200 OK [http://localhost/users/3/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:25:30) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.5ms)
Rendered departments/_department_child (9.2ms)
Rendered departments/_department_child (10.8ms)
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (1.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 665ms (View: 560, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:25:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.8ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
Rendered departments/_form (12.5ms)
  [4;35;1mSetting Load (0.8ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 577ms (View: 548, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:25:39) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"3", "controller"=>"departments", "department"=>{"name"=>"третий отдел", "manager_id"=>"1", "parent_id"=>"2"}}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mUser Load (2.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 3) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET `department_id` = 3, `updated_on` = '2011-12-25 20:25:39' WHERE `id` = 3[0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.2ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'третий отдел' AND `departments`.id <> 3) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 72ms (DB: 24) | 302 Found [http://localhost/departments/3]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:25:40) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (9.3ms)
Rendered departments/_department_child (11.2ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 587ms (View: 554, DB: 19) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:25:44) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.0ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (9.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 570ms (View: 540, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:25:53) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendered departments/_form (9.0ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 584ms (View: 548, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:25:59) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"2", "controller"=>"departments", "department"=>{"name"=>"Отдел2", "manager_id"=>"2", "parent_id"=>"1"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.7ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.6ms)[0m   [0mUPDATE `users` SET `department_id` = 2, `updated_on` = '2011-12-25 20:25:59' WHERE `id` = 3[0m
  [4;36;1mCustomField Load (0.9ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.5ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (19.4ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 76ms (DB: 42) | 302 Found [http://localhost/departments/2]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:26:00) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.0ms)
Rendered departments/_department_child (8.2ms)
Rendered departments/_department_child (9.7ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 656ms (View: 625, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:26:04) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (2.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (12.6ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 583ms (View: 553, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing AdminController#index (for 127.0.0.1 at 2011-12-25 20:27:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"admin"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mRole Load (0.6ms)[0m   [0mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) LIMIT 1[0m
  [4;36;1mTracker Load (0.4ms)[0m   [0;1mSELECT * FROM `trackers` LIMIT 1[0m
Rendering template within layouts/admin
Rendering admin/index
Rendered admin/_menu (4.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 599ms (View: 557, DB: 17) | 200 OK [http://localhost/admin]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#index (for 127.0.0.1 at 2011-12-25 20:27:19) [GET]
  Parameters: {"action"=>"index", "controller"=>"users"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'per_page_options') LIMIT 1[0m
  [4;36;1mSQL (0.8ms)[0m   [0;1mSELECT count(*) AS count_all FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (1=1 AND (status = 1)) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY login LIMIT 0, 25[0m
  [4;36;1mGroup Columns (3.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mGroup Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
Rendering template within layouts/admin
Rendering users/index
  [4;36;1mSQL (1.2ms)[0m   [0;1mSELECT count(*) AS count_all, status AS status FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) GROUP BY status [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'gravatar_enabled') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'date_format') LIMIT 1[0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'time_format') LIMIT 1[0m
Rendered admin/_menu (3.2ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 682ms (View: 559, DB: 24) | 200 OK [http://localhost/users]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing UsersController#edit (for 127.0.0.1 at 2011-12-25 20:27:24) [GET]
  Parameters: {"action"=>"edit", "id"=>"1", "controller"=>"users"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mAuthSource Load (0.9ms)[0m   [0mSELECT * FROM `auth_sources` [0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
Rendering template within layouts/admin
Rendering users/edit
  [4;35;1mGroup Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mGroup Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'Group' ) ) [0m
  [4;35;1mCustomField Load (2.0ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mStavkaRight Load (0.9ms)[0m   [0;1mSELECT * FROM `stavka_rights` WHERE (stavka_user_id=1 AND user_id=1) LIMIT 1[0m
Rendered hooks/users/_user_formhook (3.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'password_min_length') LIMIT 1[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
  [4;35;1mProject Load (1.0ms)[0m   [0mSELECT `projects`.* FROM `projects` INNER JOIN `members` ON `projects`.id = `members`.project_id WHERE ((`members`.user_id = 1) AND ((projects.status=1))) [0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
Rendered users/_mail_notifications (37.8ms)
Rendered users/_preferences (5.0ms)
Rendered users/_form (64.5ms)
Rendered users/_general (70.9ms)
  [4;36;1mRole Load (0.5ms)[0m   [0;1mSELECT * FROM `roles` WHERE (`roles`.`builtin` = 0) ORDER BY position[0m
  [4;35;1mProject Load (0.8ms)[0m   [0mSELECT * FROM `projects` WHERE (projects.status = 1) ORDER BY lft[0m
Rendered users/_memberships (2.4ms)
Rendered common/_tabs (75.6ms)
Rendered admin/_menu (3.1ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 718ms (View: 688, DB: 11) | 200 OK [http://localhost/users/1/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:29:19) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (8.9ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 570, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:29:25) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.7ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 589ms (View: 558, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:29:30) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (9.0ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.6ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 601ms (View: 568, DB: 18) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:30:39) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.9ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 598ms (View: 568, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:30:45) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (7.2ms)
Rendered departments/_department_child (8.8ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 663ms (View: 632, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:30:49) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.2ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 614ms (View: 563, DB: 20) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:31:18) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 596ms (View: 566, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:31:31) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.2ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 594ms (View: 563, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:31:50) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m

ActionView::TemplateError (undefined local variable or method `department' for #<ActionView::Base:0xa9acdd8>) on line #24 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
21: 	<% unless user.is_a?(AnonymousUser) %>
22: 		<p>
23: 			<%= label_tag :user, user %>
24:  			<%= check_box_tag 'department_user[user_id][]', user.id,	department.users.include?(user) %>
25: 			<%= " at the Department of: " + user.department.name if user.department %>
26: 		</p>
27: 	<% end %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:24
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:20:in `each'
    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:20
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (43.3ms)
Rendered rescues/_request_and_response (0.4ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:32:08) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.1ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 596ms (View: 561, DB: 19) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:32:26) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (13.4ms)
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (1.1ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 634ms (View: 598, DB: 22) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:33:06) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.7ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (8.9ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 670ms (View: 560, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 20:33:09) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.0ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 559, DB: 13) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:33:15) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.3ms)
Rendered departments/_department_child (6.8ms)
Rendered departments/_department_child (8.3ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.4ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.0ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 588ms (View: 557, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:33:18) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.0ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 600ms (View: 570, DB: 16) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:33:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.5ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (9.0ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 658ms (View: 629, DB: 15) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:33:26) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.1ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (8.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 553, DB: 19) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:34:57) [PUT]
  Parameters: {"commit"=>"Save", "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"2", "controller"=>"departments", "department"=>{"name"=>"Отдел2", "manager_id"=>"2", "parent_id"=>"1"}}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Update (0.7ms)[0m   [0mUPDATE `users` SET department_id = NULL WHERE (department_id = 2 AND id IN (3)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mSQL (3.9ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mDepartment Load (0.3ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 35ms (DB: 15) | 302 Found [http://localhost/departments/2]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:34:58) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (8.4ms)
Rendered departments/_department_child (10.1ms)
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.1ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 675ms (View: 640, DB: 20) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:35:02) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
Rendered departments/_form (11.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 586ms (View: 556, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:35:10) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"2", "controller"=>"departments", "department"=>{"name"=>"Отдел2", "manager_id"=>"2", "parent_id"=>"1"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.7ms)[0m   [0;1mUPDATE `users` SET `department_id` = 2, `updated_on` = '2011-12-25 20:35:10' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (1.2ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.2ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (3.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 56ms (DB: 25) | 302 Found [http://localhost/departments/2]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:35:11) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (8.9ms)
Rendered departments/_department_child (10.5ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.1ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 665ms (View: 549, DB: 16) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:35:14) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.5ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.0ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (11.8ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 583ms (View: 553, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:39:02) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.9ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.4ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (3.2ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 597ms (View: 565, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:39:19) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (3.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (3.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (17.5ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 606ms (View: 576, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:43:29) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:24: syntax error, unexpected tIDENTIFIER, expecting ')'
...department.users.include? user ).to_s); @output_buffer.conca...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  select#department_parent_id { width: '250px' }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( label_tag("Department name") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Subdivision") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, :html_options => { :style => "width:200px;" } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Department manager") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<h3>Department user list</h3>\n<div class=\"box tabular\">\n"




;  User.all.each do |user| ; @output_buffer.concat "\n\t"
;  unless user.is_a?(AnonymousUser) ; @output_buffer.concat "\n\t\t<p>\n\t\t\t"

; @output_buffer.concat(( label_tag :user, user ).to_s); @output_buffer.concat "\n \t\t\t"
; @output_buffer.concat(( check_box_tag 'department_user[user_id][]', user.id,	@department.users.include? user ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( " at the Department of: " + user.department.name if user.department ).to_s); @output_buffer.concat "\n\t\t</p>\n\t"

;  end ; @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:24: syntax error, unexpected tIDENTIFIER, expecting ')'
...department.users.include? user ).to_s); @output_buffer.conca...
                              ^) on line #24 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
21: 	<% unless user.is_a?(AnonymousUser) %>
22: 		<p>
23: 			<%= label_tag :user, user %>
24:  			<%= check_box_tag 'department_user[user_id][]', user.id,	@department.users.include? user %>
25: 			<%= " at the Department of: " + user.department.name if user.department %>
26: 		</p>
27: 	<% end %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.5ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:44:21) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 598ms (View: 566, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#update (for 127.0.0.1 at 2011-12-25 20:44:28) [PUT]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"update", "_method"=>"put", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "id"=>"2", "controller"=>"departments", "department"=>{"name"=>"Отдел2", "manager_id"=>"2", "parent_id"=>"1"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.7ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.department_id = 2) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Update (0.7ms)[0m   [0;1mUPDATE `users` SET department_id = NULL WHERE (department_id = 2 AND id IN (1)) AND ( (`users`.`type` = 'User' ) ) [0m
  [4;35;1mSQL (16.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mUser Load (2.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.7ms)[0m   [0;1mUPDATE `users` SET `department_id` = 2, `updated_on` = '2011-12-25 20:44:28' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (1.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (4.6ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (2.8ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (0.7ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.3ms)[0m   [0mBEGIN[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'Отдел2' AND `departments`.id <> 2) LIMIT 1[0m
  [4;35;1mSQL (0.3ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+updated.
Completed in 184ms (DB: 49) | 302 Found [http://localhost/departments/2]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:44:29) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully updated.", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.3ms)
Rendered departments/_department_child (100.4ms)
Rendered departments/_department_child (102.0ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 593ms (View: 561, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+updated.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:44:32) [GET]
  Parameters: {"action"=>"edit", "id"=>"3", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (4.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (1.0ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (19.5ms)
  [4;36;1mSetting Load (0.9ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.9ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 609ms (View: 578, DB: 17) | 200 OK [http://localhost/departments/3/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 20:44:37) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.7ms)
Rendered departments/_department_child (8.1ms)
Rendered departments/_department_child (9.8ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 604ms (View: 574, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 20:44:41) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (8.7ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 588ms (View: 557, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:16:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.1ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.7ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 620ms (View: 587, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:18:00) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11: syntax error, unexpected '}', expecting ')'
...name, :include_blank => true } ).to_s); @output_buffer.conca...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  select#department_parent_id { size: '250px'; }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( label_tag("Department name") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Subdivision") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true } ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Department manager") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<h3>Department user list</h3>\n<div class=\"box tabular\">\n"




;  User.all.each do |user| ; @output_buffer.concat "\n\t"
;  unless user.is_a?(AnonymousUser) ; @output_buffer.concat "\n\t\t<p>\n\t\t\t"

; @output_buffer.concat(( label_tag :user, user ).to_s); @output_buffer.concat "\n \t\t\t"
; @output_buffer.concat(( check_box_tag 'department_user[user_id][]', user.id,	user.department == @department ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( " at the Department of: " + user.department.name if user.department ).to_s); @output_buffer.concat "\n\t\t</p>\n\t"

;  end ; @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11: syntax error, unexpected '}', expecting ')'
...name, :include_blank => true } ).to_s); @output_buffer.conca...
                              ^) on line #11 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
8: </p>
9: <p>
10: 	<%= label_tag("Subdivision") %>
11: 	<%= f.collection_select :parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true } %>
12: </p>
13: <p>
14: 	<%= label_tag("Department manager") %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (42.4ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:18:09) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.6ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.1ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 591ms (View: 558, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:19:05) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 604ms (View: 574, DB: 15) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:22:20) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.7ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.7ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.7ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 607ms (View: 573, DB: 20) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:23:19) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 675ms (View: 562, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:23:37) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.7ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 682ms (View: 651, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:24:27) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 595ms (View: 558, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:24:46) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.0ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.3ms)
  [4;35;1mSetting Load (1.1ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 619ms (View: 586, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:25:18) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.7ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 610ms (View: 579, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:25:34) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 583, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:26:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 604ms (View: 572, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:27:21) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 605ms (View: 576, DB: 15) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:27:52) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 607ms (View: 575, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:27:59) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 610ms (View: 580, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:28:07) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (2.1ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (11.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 696ms (View: 577, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:30:06) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.5ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (94.0ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 700ms (View: 578, DB: 109) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:30:24) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.5ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 609ms (View: 579, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:31:41) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.0ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 592ms (View: 563, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:32:35) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 594ms (View: 566, DB: 15) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:33:58) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 572, DB: 16) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:34:09) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11: syntax error, unexpected ')', expecting tASSOC
...de_blank => true, {"size"=>5})  ).to_s); @output_buffer.conc...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  div#content div.splitcontentLeft div.box.tabular p select#department_parent_id { width: '450px'; }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( label_tag("Department name") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Subdivision") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select(:parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, {"size"=>5})  ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Department manager") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<h3>Department user list</h3>\n<div class=\"box tabular\">\n"




;  User.all.each do |user| ; @output_buffer.concat "\n\t"
;  unless user.is_a?(AnonymousUser) ; @output_buffer.concat "\n\t\t<p>\n\t\t\t"

; @output_buffer.concat(( label_tag :user, user ).to_s); @output_buffer.concat "\n \t\t\t"
; @output_buffer.concat(( check_box_tag 'department_user[user_id][]', user.id,	user.department == @department ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( " at the Department of: " + user.department.name if user.department ).to_s); @output_buffer.concat "\n\t\t</p>\n\t"

;  end ; @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11: syntax error, unexpected ')', expecting tASSOC
...de_blank => true, {"size"=>5})  ).to_s); @output_buffer.conc...
                              ^) on line #11 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
8: </p>
9: <p>
10: 	<%= label_tag("Subdivision") %>
11: 	<%= f.collection_select(:parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, {"size"=>5})  %>
12: </p>
13: <p>
14: 	<%= label_tag("Department manager") %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.2ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:35:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m

ActionView::TemplateError (undefined local variable or method `html_options' for #<ActionView::Base:0xa5b1760>) on line #11 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
8: </p>
9: <p>
10: 	<%= label_tag("Subdivision") %>
11: 	<%= f.collection_select(:parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, html_options => {"size"=>5})  %>
12: </p>
13: <p>
14: 	<%= label_tag("Department manager") %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (40.8ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:40:40) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.5ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
ERROR: compiling _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object RAISED compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11: syntax error, unexpected ')', expecting tASSOC
...lank => true, {:class=>'sdf'})  ).to_s); @output_buffer.conc...
                              ^
Function body:           def _run_erb_vendor47plugins47redmine_addons247app47views47departments47_form46html46erb_locals_f_form_object(local_assigns)
            old_output_buffer = output_buffer;f = local_assigns[:f];object = local_assigns[:object];form = local_assigns[:form];;@output_buffer = '';  __in_erb_template=true ; @output_buffer.concat "<style type=\"text/css\">\n  div#content div.splitcontentLeft div.box.tabular p select#department_parent_id { width: '450px'; }\n</style>\n"


; @output_buffer.concat(( f.error_messages ).to_s); @output_buffer.concat "\n<p>\n\t"

; @output_buffer.concat(( label_tag("Department name") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.text_field :name, :required => true ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Subdivision") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select(:parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, {:class=>'sdf'})  ).to_s); @output_buffer.concat "\n</p>\n<p>\n\t"


; @output_buffer.concat(( label_tag("Department manager") ).to_s); @output_buffer.concat "\n\t"
; @output_buffer.concat(( f.collection_select :manager_id, User.all(:order => "lastname"), :id, :lastname, :include_blank => true ).to_s); @output_buffer.concat "\n</p>\n</div>\n<h3>Department user list</h3>\n<div class=\"box tabular\">\n"




;  User.all.each do |user| ; @output_buffer.concat "\n\t"
;  unless user.is_a?(AnonymousUser) ; @output_buffer.concat "\n\t\t<p>\n\t\t\t"

; @output_buffer.concat(( label_tag :user, user ).to_s); @output_buffer.concat "\n \t\t\t"
; @output_buffer.concat(( check_box_tag 'department_user[user_id][]', user.id,	user.department == @department ).to_s); @output_buffer.concat "\n\t\t\t"
; @output_buffer.concat(( " at the Department of: " + user.department.name if user.department ).to_s); @output_buffer.concat "\n\t\t</p>\n\t"

;  end ; @output_buffer.concat "\n"
;  end ; @output_buffer.concat "\n</div>\n<p>\n\t"


; @output_buffer.concat(( f.submit 'Save' ).to_s); @output_buffer.concat "\n</p>\n"

; @output_buffer
          ensure
            self.output_buffer = old_output_buffer
          end
Backtrace: /home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:61:in `compile'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:28:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:20:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:26:in `benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:19:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable_partial.rb:44:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/partials.rb:184:in `render_partial'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:267:in `render'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:499:in `fields_for'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/helpers/form_helper.rb:282:in `form_for'
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5:in `_run_erb_vendor47plugins47redmine_addons247app47views47departments47edit46html46erb'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:34:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:306:in `with_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/renderable.rb:30:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/template.rb:205:in `render_template'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:265:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:348:in `_render_with_layout'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_view/base.rb:262:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1252:in `render_for_file'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:936:in `render_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:51:in `render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1328:in `default_render'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:1334:in `perform_action_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:617:in `call_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:610:in `perform_action_without_benchmark'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/benchmark.rb:308:in `realtime'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activesupport-2.3.11/lib/active_support/core_ext/benchmark.rb:17:in `ms'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/benchmarking.rb:68:in `perform_action_without_rescue'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/rescue.rb:160:in `perform_action_without_flash'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/flash.rb:151:in `perform_action'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `send'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:532:in `process_without_filters'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/filters.rb:606:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:391:in `process'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/base.rb:386:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/routing/route_set.rb:438:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:87:in `dispatch'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:121:in `_call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:130:in `build_middleware_stack'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:29:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/query_cache.rb:34:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:9:in `cache'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/query_cache.rb:28:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/activerecord-2.3.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:361:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/string_coercion.rb:25:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/head.rb:9:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/methodoverride.rb:24:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/params_parser.rb:15:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/session/cookie_store.rb:99:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/failsafe.rb:26:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `synchronize'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/lock.rb:11:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:114:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/reloader.rb:34:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/actionpack-2.3.11/lib/action_controller/dispatcher.rb:108:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/static.rb:31:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:47:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `each'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/urlmap.rb:41:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/rails/rack/log_tailer.rb:17:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/content_length.rb:13:in `call'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:48:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rack-1.1.2/lib/rack/handler/webrick.rb:14:in `run'
/home/igel/.rvm/gems/ree-1.8.7-2011.03@rails235/gems/rails-2.3.11/lib/commands/server.rb:111
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
/home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
script/server:3

ActionView::TemplateError (compile error
/home/igel/proj/redmine/vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:11: syntax error, unexpected ')', expecting tASSOC
...lank => true, {:class=>'sdf'})  ).to_s); @output_buffer.conc...
                              ^) on line #11 of vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:
8: </p>
9: <p>
10: 	<%= label_tag("Subdivision") %>
11: 	<%= f.collection_select(:parent_id, Department.all(:order => "name"), :id, :name, :include_blank => true, {:class=>'sdf'})  %>
12: </p>
13: <p>
14: 	<%= label_tag("Department manager") %>

    vendor/plugins/redmine_addons2/app/views/departments/_form.html.erb:36:in `compile!'
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:6
    vendor/plugins/redmine_addons2/app/views/departments/edit.html.erb:5
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /home/igel/.rvm/rubies/ree-1.8.7-2011.03/lib/ruby/1.8/webrick/server.rb:82:in `start'

Rendered rescues/_trace (41.6ms)
Rendered rescues/_request_and_response (0.3ms)
Rendering rescues/layout (internal_server_error)
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:41:03) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 597ms (View: 564, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:41:43) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (2.1ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (12.5ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 615ms (View: 583, DB: 18) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:42:14) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.1ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 684ms (View: 565, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:42:33) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.3ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (105.2ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.4ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 712ms (View: 684, DB: 14) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:42:40) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (11.7ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 610ms (View: 578, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:42:47) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.6ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (3.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (3.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (17.4ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.5ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.9ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 592, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:43:13) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 605ms (View: 575, DB: 17) | 200 OK [http://localhost/departments/2/edit]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 21:43:23) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.6ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.6ms)
Rendered departments/_department_child (7.4ms)
Rendered departments/_department_child (9.0ms)
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 616ms (View: 585, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 21:43:27) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (9.9ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (4.3ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 621ms (View: 589, DB: 17) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 21:43:33) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (3.9ms)
Rendered departments/_department_child (7.8ms)
Rendered departments/_department_child (9.5ms)
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.7ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 698ms (View: 666, DB: 17) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 21:43:37) [GET]
  Parameters: {"action"=>"edit", "id"=>"2", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.7ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (11.9ms)
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 634ms (View: 599, DB: 19) | 200 OK [http://localhost/departments/2/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 21:57:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (5.9ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (2.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
Rendered departments/_department_child (4.1ms)
Rendered departments/_department_child (12.6ms)
Rendered departments/_department_child (16.3ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 643ms (View: 604, DB: 21) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 22:41:47) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
Rendered departments/_form (10.6ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 707ms (View: 580, DB: 16) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:42:10) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"новый отдел", "manager_id"=>"1", "parent_id"=>"3"}}
  [4;35;1mSetting Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (37.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (22.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.3ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'новый отдел') LIMIT 1[0m
  [4;36;1mDepartment Create (65.6ms)[0m   [0;1mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('новый отдел', '2011-12-25 22:42:10', '2011-12-25 22:42:10', 1, 3)[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.3ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.9ms)[0m   [0mUPDATE `users` SET `department_id` = 5, `updated_on` = '2011-12-25 22:42:11' WHERE `id` = 3[0m
  [4;36;1mCustomField Load (0.9ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (1.5ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.1ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (55.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 239ms (DB: 196) | 302 Found [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:42:11) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"новый отдел", "manager_id"=>"1", "parent_id"=>"3"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'новый отдел') LIMIT 1[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mROLLBACK[0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.5ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (2.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.9ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 5) [0m
Rendered departments/_form (415.5ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.7ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (3.0ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 627ms (View: 587, DB: 22) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.4ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:42:28) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"новый отдел1", "manager_id"=>"1", "parent_id"=>"3"}}
  [4;35;1mSetting Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'новый отдел1') LIMIT 1[0m
  [4;36;1mDepartment Create (0.4ms)[0m   [0;1mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('новый отдел1', '2011-12-25 22:42:28', '2011-12-25 22:42:28', 1, 3)[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.8ms)[0m   [0mUPDATE `users` SET `department_id` = 6, `updated_on` = '2011-12-25 22:42:28' WHERE `id` = 3[0m
  [4;36;1mCustomField Load (0.9ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (3.1ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.3ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (47.1ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 97ms (DB: 67) | 302 Found [http://localhost/departments]
  [4;35;1mSQL (0.6ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:42:29) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"новый отдел1", "manager_id"=>"1", "parent_id"=>"3"}}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'новый отдел1') LIMIT 1[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mROLLBACK[0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (512.1ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.4ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 727ms (View: 686, DB: 21) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:42:42) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (3.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
Rendered departments/_department_child (101.7ms)
Rendered departments/_department_child (110.2ms)
Rendered departments/_department_child (115.2ms)
Rendered departments/_department_child (117.2ms)
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.6ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 620ms (View: 590, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 22:42:46) [GET]
  Parameters: {"action"=>"edit", "id"=>"6", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (4.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (2.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (9.8ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.3ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 618ms (View: 582, DB: 18) | 200 OK [http://localhost/departments/6/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:42:53) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (3.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
Rendered departments/_department_child (2.0ms)
Rendered departments/_department_child (9.6ms)
Rendered departments/_department_child (13.4ms)
Rendered departments/_department_child (15.1ms)
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.2ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (1.1ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.5ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 652ms (View: 623, DB: 16) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 22:42:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (9.9ms)
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.6ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.8ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.4ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 602ms (View: 574, DB: 15) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:43:14) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"новый отдел3", "manager_id"=>"1", "parent_id"=>"3"}}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.2ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.8ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'новый отдел3') LIMIT 1[0m
  [4;35;1mDepartment Create (0.6ms)[0m   [0mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('новый отдел3', '2011-12-25 22:43:14', '2011-12-25 22:43:14', 1, 3)[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.7ms)[0m   [0;1mUPDATE `users` SET `department_id` = 7, `updated_on` = '2011-12-25 22:43:14' WHERE `id` = 1[0m
  [4;35;1mCustomField Load (0.9ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (1.4ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.3ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (9.9ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 58ms (DB: 30) | 302 Found [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:43:15) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"новый отдел3", "manager_id"=>"1", "parent_id"=>"3"}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.3ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mUser Load (1.7ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mCOMMIT[0m
  [4;35;1mSQL (0.1ms)[0m   [0mBEGIN[0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'новый отдел3') LIMIT 1[0m
  [4;35;1mSQL (0.2ms)[0m   [0mROLLBACK[0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 7) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (424.5ms)
  [4;36;1mSetting Load (0.3ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.1ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 630ms (View: 591, DB: 20) | 200 OK [http://localhost/departments]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:44:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.2ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (3.5ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
Rendered departments/_department_child (2.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 7) [0m
Rendered departments/_department_child (2.7ms)
Rendered departments/_department_child (14.3ms)
Rendered departments/_department_child (19.4ms)
Rendered departments/_department_child (22.1ms)
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.7ms)
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.8ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 733ms (View: 609, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.1ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 22:44:45) [GET]
  Parameters: {"action"=>"edit", "id"=>"7", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 7) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 7) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (9.8ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.6ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 612ms (View: 584, DB: 15) | 200 OK [http://localhost/departments/7/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.4ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:44:52) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (0.9ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (2.6ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
Rendered departments/_department_child (1.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 7) [0m
Rendered departments/_department_child (1.9ms)
Rendered departments/_department_child (10.7ms)
Rendered departments/_department_child (14.4ms)
Rendered departments/_department_child (16.2ms)
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.3ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.7ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 621ms (View: 592, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 22:44:56) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.4ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 7) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (11.3ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 598, DB: 16) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:45:19) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"в новом отделе 1", "manager_id"=>"3", "parent_id"=>"6"}}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'в новом отделе 1') LIMIT 1[0m
  [4;36;1mDepartment Create (0.7ms)[0m   [0;1mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('в новом отделе 1', '2011-12-25 22:45:19', '2011-12-25 22:45:19', 3, 6)[0m
  [4;35;1mUser Load (0.3ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.7ms)[0m   [0mUPDATE `users` SET `department_id` = 8, `updated_on` = '2011-12-25 22:45:19' WHERE `id` = 1[0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.8ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.2ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 1 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (16.8ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 158ms (DB: 35) | 302 Found [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:45:20) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["1"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"в новом отделе 1", "manager_id"=>"3", "parent_id"=>"6"}}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.8ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.9ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'admin' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'admin@example.net' AND `users`.id <> 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'в новом отделе 1') LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (512.7ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.2ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 627ms (View: 584, DB: 24) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:45:25) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (3.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 8) [0m
Rendered departments/_department_child (5.1ms)
Rendered departments/_department_child (8.1ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 7) [0m
Rendered departments/_department_child (3.0ms)
Rendered departments/_department_child (19.7ms)
Rendered departments/_department_child (24.6ms)
Rendered departments/_department_child (26.6ms)
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (2.4ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.6ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 646ms (View: 616, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 22:45:53) [GET]
  Parameters: {"action"=>"edit", "id"=>"8", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (3.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.9ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (17.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (1.0ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.5ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (2.5ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 598, DB: 15) | 200 OK [http://localhost/departments/8/edit]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 22:47:43) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.6ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.0ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` ORDER BY name[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (10.4ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.8ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.1ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.8ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 713ms (View: 584, DB: 17) | 200 OK [http://localhost/departments/new]
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:48:11) [POST]
  Parameters: {"commit"=>"Save", "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"еще отдел 12", "manager_id"=>"1", "parent_id"=>""}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'еще отдел 12') LIMIT 1[0m
  [4;36;1mDepartment Create (0.6ms)[0m   [0;1mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('еще отдел 12', '2011-12-25 22:48:11', '2011-12-25 22:48:11', 1, NULL)[0m
  [4;35;1mSQL (3.7ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 27ms (DB: 12) | 302 Found [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:48:12) [POST]
  Parameters: {"commit"=>"Save", "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"еще отдел 12", "manager_id"=>"1", "parent_id"=>""}}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.5ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.4ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'еще отдел 12') LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (413.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.5ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 610ms (View: 579, DB: 16) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:48:16) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.8ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (3.4ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
  [4;35;1mUser Load (1.1ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 8) [0m
Rendered departments/_department_child (4.5ms)
Rendered departments/_department_child (7.5ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 7) [0m
Rendered departments/_department_child (2.8ms)
Rendered departments/_department_child (18.9ms)
Rendered departments/_department_child (24.2ms)
Rendered departments/_department_child (26.3ms)
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
Rendered departments/_department_child (1.8ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 9) [0m
Rendered departments/_department_child (2.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.6ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 725ms (View: 694, DB: 17) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 22:48:48) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;35;1mSetting Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.5ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.1ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.2ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.5ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
Rendered departments/_form (10.9ms)
  [4;35;1mSetting Load (0.5ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.8ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (2.2ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (5.3ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (3.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 633ms (View: 596, DB: 22) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:49:08) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"в четвертом", "manager_id"=>"", "parent_id"=>"4"}}
  [4;35;1mSetting Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.2ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.2ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'в четвертом') LIMIT 1[0m
  [4;36;1mDepartment Create (0.5ms)[0m   [0;1mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('в четвертом', '2011-12-25 22:49:08', '2011-12-25 22:49:08', NULL, 4)[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Update (0.7ms)[0m   [0mUPDATE `users` SET `department_id` = 10, `updated_on` = '2011-12-25 22:49:08' WHERE `id` = 3[0m
  [4;36;1mCustomField Load (0.8ms)[0m   [0;1mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;35;1mCustomValue Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `custom_values`[0m
  [4;36;1mCustomField Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `custom_fields`[0m
  [4;35;1mCustomValue Load Including Associations (1.1ms)[0m   [0mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;36;1mSQL (15.9ms)[0m   [0;1mCOMMIT[0m
Redirected to http://localhost:3000index
Completed in 63ms (DB: 35) | 302 Found [http://localhost/departments]
  [4;35;1mSQL (0.2ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:49:08) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"в четвертом", "manager_id"=>"", "parent_id"=>"4"}}
  [4;35;1mSetting Columns (1.1ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (2.3ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.8ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.1ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.8ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT `departments`.id FROM `departments` WHERE (`departments`.`name` = BINARY 'в четвертом') LIMIT 1[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mROLLBACK[0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.4ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 10) [0m
Rendered departments/_form (423.8ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.7ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 628ms (View: 592, DB: 19) | 200 OK [http://localhost/departments]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:57:39) [GET]
  Parameters: {"action"=>"index", "controller"=>"departments"}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.4ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.4ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.7ms)[0m   [0mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;36;1mDepartment Load (1.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;35;1mUser Load (3.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.3ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;35;1mDepartment Load (1.3ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;36;1mUser Load (3.1ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.6ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;36;1mDepartment Load (1.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (2.2ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (10.6ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.5ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 8) [0m
Rendered departments/_department_child (5.1ms)
Rendered departments/_department_child (12.9ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 7) [0m
Rendered departments/_department_child (2.2ms)
Rendered departments/_department_child (38.4ms)
Rendered departments/_department_child (49.3ms)
Rendered departments/_department_child (51.4ms)
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 4) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 10) [0m
Rendered departments/_department_child (2.7ms)
Rendered departments/_department_child (4.3ms)
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.6ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 9) [0m
Rendered departments/_department_child (1.9ms)
  [4;35;1mSetting Load (0.3ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.4ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.1ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.2ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.0ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.1ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 768ms (View: 641, DB: 17) | 200 OK [http://localhost/departments]
Starting Charts Plugin for RedMine
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.1ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#new (for 127.0.0.1 at 2011-12-25 22:58:01) [GET]
  Parameters: {"action"=>"new", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.6ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `departments`[0m
Rendering template within layouts/base
Rendering departments/new
  [4;35;1mDepartment Load (1.2ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.3ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.5ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;36;1mDepartment Load (0.4ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 10) [0m
Rendered departments/_form (12.8ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.1ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (2.6ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 616ms (View: 580, DB: 18) | 200 OK [http://localhost/departments/new]
  [4;35;1mSQL (0.3ms)[0m   [0mSET NAMES 'utf8'[0m
  [4;36;1mSQL (0.3ms)[0m   [0;1mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#create (for 127.0.0.1 at 2011-12-25 22:58:18) [POST]
  Parameters: {"commit"=>"Save", "department_user"=>{"user_id"=>["3"]}, "action"=>"create", "authenticity_token"=>"dC0eDd70FyNWuT9HFYXsNctuGkOhoVNYK1csJEVgxT4=", "controller"=>"departments", "department"=>{"name"=>"еще один в четвертом", "manager_id"=>"", "parent_id"=>"10"}}
  [4;35;1mSetting Columns (1.7ms)[0m   [0mSHOW FIELDS FROM `settings`[0m
  [4;36;1mSQL (0.5ms)[0m   [0;1mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;35;1mUser Columns (3.4ms)[0m   [0mSHOW FIELDS FROM `users`[0m
  [4;36;1mUser Load (1.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mUser Load (1.3ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSQL (0.2ms)[0m   [0;1mBEGIN[0m
  [4;35;1mSQL (0.2ms)[0m   [0mCOMMIT[0m
  [4;36;1mSQL (0.1ms)[0m   [0;1mBEGIN[0m
  [4;35;1mUser Load (0.4ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mDepartment Create (0.6ms)[0m   [0mINSERT INTO `departments` (`name`, `created_at`, `updated_at`, `manager_id`, `parent_id`) VALUES('еще один в четвертом', '2011-12-25 22:58:18', '2011-12-25 22:58:18', NULL, 10)[0m
  [4;36;1mUser Load (0.2ms)[0m   [0;1mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`login`) = BINARY 'user1' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;35;1mUser Load (0.2ms)[0m   [0mSELECT `users`.id FROM `users` WHERE (LOWER(`users`.`mail`) = BINARY 'igel.yulian@mail.ru' AND `users`.id <> 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) LIMIT 1[0m
  [4;36;1mUser Update (0.6ms)[0m   [0;1mUPDATE `users` SET `department_id` = 11, `updated_on` = '2011-12-25 22:58:18' WHERE `id` = 3[0m
  [4;35;1mCustomField Load (0.8ms)[0m   [0mSELECT * FROM `custom_fields` WHERE (type = 'UserCustomField') ORDER BY position[0m
  [4;36;1mCustomValue Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `custom_values`[0m
  [4;35;1mCustomField Columns (2.7ms)[0m   [0mSHOW FIELDS FROM `custom_fields`[0m
  [4;36;1mCustomValue Load Including Associations (1.1ms)[0m   [0;1mSELECT `custom_values`.`id` AS t0_r0, `custom_values`.`customized_type` AS t0_r1, `custom_values`.`customized_id` AS t0_r2, `custom_values`.`custom_field_id` AS t0_r3, `custom_values`.`value` AS t0_r4, `custom_fields`.`id` AS t1_r0, `custom_fields`.`type` AS t1_r1, `custom_fields`.`name` AS t1_r2, `custom_fields`.`field_format` AS t1_r3, `custom_fields`.`possible_values` AS t1_r4, `custom_fields`.`regexp` AS t1_r5, `custom_fields`.`min_length` AS t1_r6, `custom_fields`.`max_length` AS t1_r7, `custom_fields`.`is_required` AS t1_r8, `custom_fields`.`is_for_all` AS t1_r9, `custom_fields`.`is_filter` AS t1_r10, `custom_fields`.`position` AS t1_r11, `custom_fields`.`searchable` AS t1_r12, `custom_fields`.`default_value` AS t1_r13, `custom_fields`.`editable` AS t1_r14, `custom_fields`.`visible` AS t1_r15 FROM `custom_values` LEFT OUTER JOIN `custom_fields` ON `custom_fields`.id = `custom_values`.custom_field_id WHERE (`custom_values`.customized_id = 3 AND `custom_values`.customized_type = 'Principal') ORDER BY custom_fields.position[0m
  [4;35;1mSQL (8.5ms)[0m   [0mCOMMIT[0m
Redirected to http://localhost:3000/departments?notice=Otdel+was+successfully+created.
Completed in 206ms (DB: 26) | 302 Found [http://localhost/departments]
  [4;36;1mSQL (0.2ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.2ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#index (for 127.0.0.1 at 2011-12-25 22:58:18) [GET]
  Parameters: {"action"=>"index", "notice"=>"Otdel was successfully created.", "controller"=>"departments"}
  [4;36;1mSetting Columns (2.0ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (3.2ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (1.7ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (1.5ms)[0m   [0;1mSELECT * FROM `departments` [0m
Rendering template within layouts/base
Rendering departments/index
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (parent_id IS NULL) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 1) [0m
  [4;35;1mDepartment Load (1.0ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 1) [0m
  [4;36;1mUser Load (1.5ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 2) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 2) [0m
  [4;36;1mDepartment Load (0.7ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 2) [0m
  [4;35;1mUser Load (1.4ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 3) [0m
  [4;35;1mDepartment Load (0.7ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 5) [0m
Rendered departments/_department_child (3.2ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 6) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 6) [0m
  [4;36;1mUser Load (1.6ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 3) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 8) [0m
Rendered departments/_department_child (5.4ms)
Rendered departments/_department_child (8.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 3) [0m
  [4;35;1mCACHE (0.0ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.parent_id = 7) [0m
Rendered departments/_department_child (2.6ms)
Rendered departments/_department_child (19.2ms)
Rendered departments/_department_child (24.8ms)
Rendered departments/_department_child (27.4ms)
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 4) [0m
  [4;36;1mDepartment Load (1.1ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 4) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 10) [0m
  [4;36;1mDepartment Load (0.8ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 10) [0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 11) [0m
Rendered departments/_department_child (3.2ms)
Rendered departments/_department_child (7.1ms)
Rendered departments/_department_child (9.1ms)
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;35;1mDepartment Load (0.8ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.parent_id = 9) [0m
Rendered departments/_department_child (2.3ms)
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;35;1mSetting Load (0.6ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;36;1mUserPreference Load (0.7ms)[0m   [0;1mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;35;1mUserPreference Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `user_preferences`[0m
  [4;36;1mMember Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `members`[0m
  [4;35;1mProject Columns (3.0ms)[0m   [0mSHOW FIELDS FROM `projects`[0m
  [4;36;1mRole Columns (1.9ms)[0m   [0;1mSHOW FIELDS FROM `roles`[0m
  [4;35;1mMember Load Including Associations (1.3ms)[0m   [0mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 601ms (View: 568, DB: 17) | 200 OK [http://localhost/departments?notice=Otdel+was+successfully+created.]
  [4;36;1mSQL (0.4ms)[0m   [0;1mSET NAMES 'utf8'[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSET SQL_AUTO_IS_NULL=0[0m


Processing DepartmentsController#edit (for 127.0.0.1 at 2011-12-25 22:58:24) [GET]
  Parameters: {"action"=>"edit", "id"=>"11", "controller"=>"departments"}
  [4;36;1mSetting Columns (1.8ms)[0m   [0;1mSHOW FIELDS FROM `settings`[0m
  [4;35;1mSQL (0.3ms)[0m   [0mSELECT max(`settings`.updated_on) AS max_updated_on FROM `settings` [0m
  [4;36;1mUser Columns (4.8ms)[0m   [0;1mSHOW FIELDS FROM `users`[0m
  [4;35;1mUser Load (2.6ms)[0m   [0mSELECT * FROM `users` WHERE (`users`.`id` = 1) AND (users.status = 1) AND ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mDepartment Load (0.9ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 11) [0m
Rendering template within layouts/base
Rendering departments/edit
  [4;35;1mDepartment Load (1.5ms)[0m   [0mSELECT * FROM `departments` ORDER BY name[0m
  [4;36;1mUser Load (1.9ms)[0m   [0;1mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) ORDER BY lastname[0m
  [4;35;1mUser Load (1.8ms)[0m   [0mSELECT * FROM `users` WHERE ( (`users`.`type` = 'User' OR `users`.`type` = 'AnonymousUser' ) ) [0m
  [4;36;1mSetting Load (0.5ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'user_format') LIMIT 1[0m
  [4;35;1mDepartment Load (0.9ms)[0m   [0mSELECT * FROM `departments` WHERE (`departments`.`id` = 8) [0m
  [4;36;1mCACHE (0.0ms)[0m   [0;1mSELECT * FROM `departments` WHERE (`departments`.`id` = 11) [0m
Rendered departments/_form (12.6ms)
  [4;35;1mSetting Load (0.4ms)[0m   [0mSELECT * FROM `settings` WHERE (`settings`.`name` = 'app_title') LIMIT 1[0m
  [4;36;1mSetting Load (0.4ms)[0m   [0;1mSELECT * FROM `settings` WHERE (`settings`.`name` = 'ui_theme') LIMIT 1[0m
  [4;35;1mUserPreference Load (0.5ms)[0m   [0mSELECT * FROM `user_preferences` WHERE (`user_preferences`.user_id = 1) LIMIT 1[0m
  [4;36;1mUserPreference Columns (1.7ms)[0m   [0;1mSHOW FIELDS FROM `user_preferences`[0m
  [4;35;1mMember Columns (1.9ms)[0m   [0mSHOW FIELDS FROM `members`[0m
  [4;36;1mProject Columns (2.9ms)[0m   [0;1mSHOW FIELDS FROM `projects`[0m
  [4;35;1mRole Columns (2.2ms)[0m   [0mSHOW FIELDS FROM `roles`[0m
  [4;36;1mMember Load Including Associations (1.3ms)[0m   [0;1mSELECT `members`.`id` AS t0_r0, `members`.`user_id` AS t0_r1, `members`.`project_id` AS t0_r2, `members`.`created_on` AS t0_r3, `members`.`mail_notification` AS t0_r4, `projects`.`id` AS t1_r0, `projects`.`name` AS t1_r1, `projects`.`description` AS t1_r2, `projects`.`homepage` AS t1_r3, `projects`.`is_public` AS t1_r4, `projects`.`parent_id` AS t1_r5, `projects`.`created_on` AS t1_r6, `projects`.`updated_on` AS t1_r7, `projects`.`identifier` AS t1_r8, `projects`.`status` AS t1_r9, `projects`.`lft` AS t1_r10, `projects`.`rgt` AS t1_r11, `projects`.`start_pr_date` AS t1_r12, `projects`.`end_pr_date` AS t1_r13, `projects`.`is_pr_closed` AS t1_r14, `projects`.`default_product_manager_id` AS t1_r15, `projects`.`default_project_manager_id` AS t1_r16, `roles`.`id` AS t2_r0, `roles`.`name` AS t2_r1, `roles`.`position` AS t2_r2, `roles`.`assignable` AS t2_r3, `roles`.`builtin` AS t2_r4, `roles`.`permissions` AS t2_r5, `roles`.`issues_visibility` AS t2_r6 FROM `members` LEFT OUTER JOIN `projects` ON `projects`.id = `members`.project_id LEFT OUTER JOIN `member_roles` ON (`members`.`id` = `member_roles`.`member_id`) LEFT OUTER JOIN `roles` ON (`roles`.`id` = `member_roles`.`role_id`) WHERE (`members`.user_id = 1 AND (projects.status=1)) ORDER BY projects.name[0m
Completed in 561ms (View: 524, DB: 19) | 200 OK [http://localhost/departments/11/edit]
